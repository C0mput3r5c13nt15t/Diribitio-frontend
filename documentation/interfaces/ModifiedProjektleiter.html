<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>diribit.io documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/readthedocs.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">diribit.io documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>ModifiedProjektleiter</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/log-in/admin-page/admin-students-leaders/admin-students-leaders.page.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#email">email</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#email_verified_at">email_verified_at</a>
                                </li>
                                <li>
                                        <a href="#id">id</a>
                                </li>
                                <li>
                                        <a href="#project_id">project_id</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#project_title">project_title</a>
                                </li>
                                <li>
                                        <a href="#user_name">user_name</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="email"></a>
                                        <span class="name"><b>email</b><a href="#email"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>email:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="email_verified_at"></a>
                                        <span class="name"><b>email_verified_at</b><a href="#email_verified_at"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>email_verified_at:         <code><a href="https://angular.io/api/common/Time" target="_blank" >Time</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://angular.io/api/common/Time" target="_blank" >Time</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="id"></a>
                                        <span class="name"><b>id</b><a href="#id"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>id:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="project_id"></a>
                                        <span class="name"><b>project_id</b><a href="#project_id"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>project_id:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="project_title"></a>
                                        <span class="name"><b>project_title</b><a href="#project_title"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>project_title:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="user_name"></a>
                                        <span class="name"><b>user_name</b><a href="#user_name"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>user_name:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnDestroy, OnInit } from &#x27;@angular/core&#x27;;
import { ActivatedRoute } from &#x27;@angular/router&#x27;;
import { StudentsService } from &#x27;src/app/services/students.service&#x27;;
import { LeadersService } from &#x27;src/app/services/leaders.service&#x27;;
import { ProjectsService } from &#x27;src/app/services/projects.service&#x27;;
import { AlertController } from &#x27;@ionic/angular&#x27;;
import { Schedule } from &#x27;src/models/Schedule.model&#x27;;
import { AdminsService } from &#x27;src/app/services/admins.service&#x27;;
import { AlertService } from &#x27;src/app/services/alert.service&#x27;;
import { ConfigService } from &#x27;src/app/services/config.service&#x27;;
import { Project } from &#x27;src/models/Project.model&#x27;;
import { ScheduleService } from &#x27;src/app/services/schedule.service&#x27;;
import { Time } from &#x27;@angular/common&#x27;;
import { formatDate } from &#x27;@angular/common&#x27;;
import { Subscription } from &#x27;rxjs&#x27;;

export interface ModifiedSchüler {
  id: number;
  first_name: string;
  last_name: string;
  grade: number;
  letter: string;
  exchange_requests?: any[];
  first_friend: number;
  first_friend_name: string;
  second_friend: number;
  second_friend_name: string;
  third_friend: number;
  third_friend_name: string;
  first_wish: number;
  first_wish_title: string;
  second_wish: number;
  second_wish_title: string;
  third_wish: number;
  third_wish_title: string;
  project_id: number;
  project_title?: string;
  role: number;
}

export interface ModifiedProjektleiter {
  id: number;
  user_name: string;
  email: string;
  project_id: number;
  project_title?: string;
  email_verified_at?: Time;
}

@Component({
  selector: &#x27;app-admin-students-leaders&#x27;,
  templateUrl: &#x27;./admin-students-leaders.page.html&#x27;,
  styleUrls: [&#x27;./admin-students-leaders.page.scss&#x27;],
})
export class AdminStudentsLeadersPage implements OnInit, OnDestroy {
  private subscriptions: Subscription[] &#x3D; [];

  adminUrl: string;

  loadedProjects: Project[] &#x3D; [];
  loadedParticipantsNames: any[] &#x3D; [];

  sortedProjects: Project[] &#x3D; [];
  searchStudents: ModifiedSchüler[];
  loadedStudents: ModifiedSchüler[] &#x3D; [];
  loadedLeaders: ModifiedProjektleiter[] &#x3D; [];

  sorted &#x3D; false;

  /**
   * Contains the time schedule of the application
   */
  schedule: Schedule &#x3D; {
    id: 1,
    begin: null,
    control: null,
    registration: null,
    sort_students: null,
    exchange: null,
    projects: null,
    end: null
  };

  /**
   * Contains the current date in yyyy-MM-dd format
   */
  currentDate: any;

  searchValue: string;
  text1 &#x3D; this.config.get_content_by_index(&#x27;admin-students-leaders&#x27;, 0);
  text2 &#x3D; this.config.get_content_by_index(&#x27;admin-students-leaders&#x27;, 1);
  text3 &#x3D; this.config.get_content_by_index(&#x27;admin-students-leaders&#x27;, 2);
  text4 &#x3D; this.config.get_content_by_index(&#x27;admin-students-leaders&#x27;, 3);

  page &#x3D; 1;
  lastPage &#x3D; 1;

  projectNoun &#x3D; this.config.app_config.project_noun;
  projectsNoun &#x3D; this.config.app_config.projects_noun;
  /**
   * Conatins the name of the event that the application is used for
   */
  eventName &#x3D; this.config.app_config.event_name;

  constructor(private studentsService: StudentsService,
              private scheduleService: ScheduleService,
              private leadersService: LeadersService,
              private projectsService: ProjectsService,
              private activatedRoute: ActivatedRoute,
              private alertCtrl: AlertController,
              private adminsService: AdminsService,
              private alert: AlertService,
              private config: ConfigService) { }

  ngOnInit() {
    this.currentDate &#x3D; formatDate(new Date(), &#x27;yyyy-MM-dd&#x27;, &#x27;en&#x27;);

    this.activatedRoute.paramMap.subscribe(paramMap &#x3D;&gt; {
      this.adminUrl &#x3D; paramMap.get(&#x27;AdminName&#x27;);
    });

    this.load();

    this.subscriptions.push(
      this.studentsService.update.subscribe(() &#x3D;&gt; this.load()),
      this.leadersService.update.subscribe(() &#x3D;&gt; this.load()),
      this.projectsService.update.subscribe(() &#x3D;&gt; this.load())
    );
  }

  /**
   * Unsubscribes from all events when the page is unloaded
   */
  ngOnDestroy() {
    this.subscriptions.forEach(sub &#x3D;&gt; sub.unsubscribe());
  }

  load() {
    this.alert.loading(2000);

    this.page &#x3D; 1;

    this.scheduleService.getSchedule().subscribe(data &#x3D;&gt; {
      this.schedule &#x3D; data.data;
    });

    this.getProjects();
    this.getAllStudentNames();

    if (this.currentDate &gt; this.schedule.sort_students &amp;&amp; this.currentDate &lt;&#x3D; this.schedule.exchange) {
      this.requestSortingProposal();
    }
  }

  eventHandler(keyCode) {
    if (keyCode &#x3D;&#x3D;&#x3D; 13) {
      this.search();
    }
  }

  search() {
    // tslint:disable-next-line: triple-equals
    if (this.searchValue &#x3D;&#x3D; &#x27;&#x27;) {
      this.searchStudents &#x3D; null;
      return;
    }
    this.studentsService.getAllSearchedStudents(this.searchValue).subscribe(data &#x3D;&gt; {
      this.searchStudents &#x3D; [];
      data.data.forEach(async student &#x3D;&gt; {
        const stu: ModifiedSchüler &#x3D; {
          id: 0,
          first_name: &#x27;&#x27;,
          last_name: &#x27;&#x27;,
          grade: 1,
          letter: &#x27;&#x27;,
          first_friend: 0,
          first_friend_name: &#x27;&#x27;,
          second_friend: 0,
          second_friend_name: &#x27;&#x27;,
          third_friend: 0,
          third_friend_name: &#x27;&#x27;,
          first_wish: 0,
          first_wish_title: &#x27;&#x27;,
          second_wish: 0,
          second_wish_title: &#x27;&#x27;,
          third_wish: 0,
          third_wish_title: &#x27;&#x27;,
          project_id: 0,
          project_title: &#x27;kein Projekt&#x27;,
          role: 1
        };

        stu.id &#x3D; student.id;
        stu.first_name &#x3D; student.first_name;
        stu.last_name &#x3D; student.last_name;
        stu.grade &#x3D; student.grade;
        stu.letter &#x3D; student.letter;
        stu.first_friend &#x3D; student.first_friend;
        stu.second_friend &#x3D; student.second_friend;
        stu.third_friend &#x3D; student.third_friend;
        stu.first_wish &#x3D; student.first_wish;
        stu.second_wish &#x3D; student.second_wish;
        stu.third_wish &#x3D; student.third_wish;
        stu.project_id &#x3D; student.project_id;
        stu.role &#x3D; student.role;

        stu.first_friend_name &#x3D; this.getParticipantName(stu.first_friend);
        stu.second_friend_name &#x3D; this.getParticipantName(stu.second_friend);
        stu.third_friend_name &#x3D; this.getParticipantName(stu.third_friend);

        stu.first_wish_title &#x3D; this.getProjectTitle(stu.first_wish);
        stu.second_wish_title &#x3D; this.getProjectTitle(stu.second_wish);
        stu.third_wish_title &#x3D; this.getProjectTitle(stu.third_wish);
        stu.project_title &#x3D; this.getProjectTitle(stu.project_id);

        this.searchStudents.push(stu);
      });
    });
  }

  refresh() {
    this.page &#x3D; 1;
    this.getProjects();
    this.getAllStudentNames();
  }

  getProjects() {
    this.projectsService.getAllProjects().subscribe(data &#x3D;&gt; {
      this.loadedProjects &#x3D; data.data;
      this.getStudents();
      this.getLeaders();
    });
  }

  getAllStudentNames() {
    this.studentsService.getAllStudentNames().subscribe(data &#x3D;&gt; {
      this.loadedParticipantsNames &#x3D; data.data;
    });
  }

  getStudents() {
    this.loadedStudents &#x3D; [];
    this.studentsService.getAllStudents(this.page).subscribe(data &#x3D;&gt; {
      this.lastPage &#x3D; data.meta.last_page;
      data.data.forEach(async student &#x3D;&gt; {
        const stu: ModifiedSchüler &#x3D; {
          id: 0,
          first_name: &#x27;&#x27;,
          last_name: &#x27;&#x27;,
          grade: 1,
          letter: &#x27;&#x27;,
          first_friend: 0,
          first_friend_name: &#x27;&#x27;,
          second_friend: 0,
          second_friend_name: &#x27;&#x27;,
          third_friend: 0,
          third_friend_name: &#x27;&#x27;,
          first_wish: 0,
          first_wish_title: &#x27;&#x27;,
          second_wish: 0,
          second_wish_title: &#x27;&#x27;,
          third_wish: 0,
          third_wish_title: &#x27;&#x27;,
          project_id: 0,
          project_title: &#x27;kein Projekt&#x27;,
          role: 1
        };

        stu.id &#x3D; student.id;
        stu.first_name &#x3D; student.first_name;
        stu.last_name &#x3D; student.last_name;
        stu.grade &#x3D; student.grade;
        stu.letter &#x3D; student.letter;
        stu.first_friend &#x3D; student.first_friend;
        stu.second_friend &#x3D; student.second_friend;
        stu.third_friend &#x3D; student.third_friend;
        stu.first_wish &#x3D; student.first_wish;
        stu.second_wish &#x3D; student.second_wish;
        stu.third_wish &#x3D; student.third_wish;
        stu.project_id &#x3D; student.project_id;
        stu.role &#x3D; student.role;

        stu.first_friend_name &#x3D; this.getParticipantName(stu.first_friend);
        stu.second_friend_name &#x3D; this.getParticipantName(stu.second_friend);
        stu.third_friend_name &#x3D; this.getParticipantName(stu.third_friend);

        stu.first_wish_title &#x3D; this.getProjectTitle(stu.first_wish);
        stu.second_wish_title &#x3D; this.getProjectTitle(stu.second_wish);
        stu.third_wish_title &#x3D; this.getProjectTitle(stu.third_wish);
        stu.project_title &#x3D; this.getProjectTitle(stu.project_id);

        // await this.getWishNames(stu.first_wish, stu.second_wish, stu.third_wish, stu);

        // await this.getFriendsNames(stu.first_friend, stu.second_friend, stu.third_friend, stu);

        this.loadedStudents.push(stu);
      });
    });
  }

  getMoreStudents() {
    this.alert.loading(2000);
    this.page +&#x3D; 1;
    this.studentsService.getAllStudents(this.page).subscribe(data &#x3D;&gt; {
      data.data.forEach(async student &#x3D;&gt; {
        const stu: ModifiedSchüler &#x3D; {
          id: 0,
          first_name: &#x27;&#x27;,
          last_name: &#x27;&#x27;,
          grade: 1,
          letter: &#x27;&#x27;,
          first_friend: 0,
          first_friend_name: &#x27;&#x27;,
          second_friend: 0,
          second_friend_name: &#x27;&#x27;,
          third_friend: 0,
          third_friend_name: &#x27;&#x27;,
          first_wish: 0,
          first_wish_title: &#x27;&#x27;,
          second_wish: 0,
          second_wish_title: &#x27;&#x27;,
          third_wish: 0,
          third_wish_title: &#x27;&#x27;,
          project_id: 0,
          project_title: &#x27;kein Projekt&#x27;,
          role: 1
        };

        stu.id &#x3D; student.id;
        stu.first_name &#x3D; student.first_name;
        stu.last_name &#x3D; student.last_name;
        stu.grade &#x3D; student.grade;
        stu.letter &#x3D; student.letter;
        stu.first_friend &#x3D; student.first_friend;
        stu.second_friend &#x3D; student.second_friend;
        stu.third_friend &#x3D; student.third_friend;
        stu.first_wish &#x3D; student.first_wish;
        stu.second_wish &#x3D; student.second_wish;
        stu.third_wish &#x3D; student.third_wish;
        stu.project_id &#x3D; student.project_id;
        stu.role &#x3D; student.role;

        stu.first_friend_name &#x3D; this.getParticipantName(stu.first_friend);
        stu.second_friend_name &#x3D; this.getParticipantName(stu.second_friend);
        stu.third_friend_name &#x3D; this.getParticipantName(stu.third_friend);

        stu.first_wish_title &#x3D; this.getProjectTitle(stu.first_wish);
        stu.second_wish_title &#x3D; this.getProjectTitle(stu.second_wish);
        stu.third_wish_title &#x3D; this.getProjectTitle(stu.third_wish);
        stu.project_title &#x3D; this.getProjectTitle(stu.project_id);

        this.loadedStudents.push(stu);
      });
    });
  }

  getLeaders() {
    this.loadedLeaders &#x3D; [];
    this.leadersService.getAllLeaders().subscribe(data &#x3D;&gt; {
      data.data.forEach(leader &#x3D;&gt; {
        const lea: ModifiedProjektleiter &#x3D; {
          id: 0,
          user_name: &#x27;&#x27;,
          email: &#x27;&#x27;,
          project_id: 0,
          project_title: &#x27;kein Projekt&#x27;
        };

        lea.id &#x3D; leader.id;
        lea.user_name &#x3D; leader.user_name;
        lea.email &#x3D; leader.email;
        lea.project_id &#x3D; leader.project_id;

        lea.project_title &#x3D; this.getProjectTitle(lea.project_id);

        this.loadedLeaders.push(lea);
      });
    });
  }

  getProjectTitle(projectID) {
    if (projectID !&#x3D;&#x3D; 0 &amp;&amp; this.loadedProjects) {
      const searchedProject &#x3D; this.loadedProjects.filter(
        project &#x3D;&gt; project.id &#x3D;&#x3D;&#x3D; projectID);
      if (searchedProject[0] !&#x3D; null) {
        return searchedProject[0].title;
      } else {
        return &#x27;fehlerhaftes Projekt&#x27;;
      }
    } else {
      return &#x27;kein Projekt&#x27;;
    }
  }

  getParticipantName(participantID) {
    if (participantID !&#x3D;&#x3D; 0 &amp;&amp; this.loadedParticipantsNames) {
      const searchedParticipant &#x3D; this.loadedParticipantsNames.filter(
        participant &#x3D;&gt; participant.id &#x3D;&#x3D;&#x3D; participantID);
      if (searchedParticipant[0] !&#x3D; null) {
        return searchedParticipant[0].first_name + &#x27; &#x27; + searchedParticipant[0].last_name;
      } else {
        return &#x27;fehlerhafter Freund&#x27;;
      }
    } else {
      return &#x27;&#x27;;
    }
  }

  deleteLeader(leaderID) {
    this.alertCtrl.create({
      header: &#x27;Sind sie sicher?&#x27;,
      message: &#x27;Wollen sie diesen Projektleiter wirklich unwiederruflich löschen?&#x27;,
      buttons: [{
        text: &#x27;Abbrechen&#x27;,
        role: &#x27;cancel&#x27;,
      }, {
        text: &#x27;Löschen&#x27;,
        handler: () &#x3D;&gt; {
          this.leadersService.deleteLeader(leaderID);
        }
      }]
    }).then(alertEl &#x3D;&gt; {
      alertEl.present();
    });
  }

  createSortingProposal() {
    this.adminsService.createSortingProposal().subscribe(data &#x3D;&gt; {
      this.alert.alert(data.message);
      this.sorted &#x3D; true;
      this.sortedProjects &#x3D; data.data;
    // tslint:disable-next-line: no-shadowed-variable
    }, error &#x3D;&gt; {
      this.alert.error(&#x27;Sortierung der Schüler fehlgeschlagen.&#x27;, error.error);
    });
  }

  requestSortingProposal() {
    this.adminsService.requestSortingProposal().subscribe(data &#x3D;&gt; {
      this.sortedProjects &#x3D; data.data;
      this.sorted &#x3D; true;
    // tslint:disable-next-line: no-shadowed-variable
    }, error &#x3D;&gt; {
      this.alert.error(&#x27;Es konnte kein Sortiervorschlag gefunden werden.&#x27;, error.error);
    });
  }

  moveParticipant(event) {
    const participant &#x3D; event.detail.value[0];
    const oldProjectId &#x3D; event.detail.value[1];
    const newProjectId &#x3D; event.detail.value[2];

    if (oldProjectId !&#x3D;&#x3D; 0 &amp;&amp; this.sortedProjects) {
      const searchedProject &#x3D; this.sortedProjects.filter(
        project &#x3D;&gt; project.id &#x3D;&#x3D;&#x3D; oldProjectId);
      if (searchedProject[0] !&#x3D; null) {
        const oldProject &#x3D; searchedProject[0];

        const index &#x3D; oldProject.participants.indexOf(participant);
        if (index !&#x3D;&#x3D; -1) {
          oldProject.participants.splice(index, 1);
        }
      }
    }

    if (newProjectId !&#x3D;&#x3D; 0 &amp;&amp; this.sortedProjects) {
      const searchedProject &#x3D; this.sortedProjects.filter(
        project &#x3D;&gt; project.id &#x3D;&#x3D;&#x3D; newProjectId);
      if (searchedProject[0] !&#x3D; null) {
        const newProject &#x3D; searchedProject[0];

        if (participant) {
          newProject.participants.push(participant);
        }
      }
    }
  }

  editSortingProposal() {
    const newProposal &#x3D; {
      data: this.sortedProjects
    };
    this.adminsService.editSortingProposal(newProposal);
    // this.requestSortingProposal();
    this.sorted &#x3D; true;
  }

  applySortingProposal() {
    if (this.sorted &#x3D;&#x3D;&#x3D; true) {
      this.alertCtrl.create({
        header: &#x27;Sind sie sicher?&#x27;,
        message: &#x27;Wollen sie die vorgeschlagene Konfiguration wirklich anwenden?&#x27;,
        buttons: [{
          text: &#x27;Abbrechen&#x27;,
          role: &#x27;cancel&#x27;
        }, {
          text: &#x27;Anwenden&#x27;,
          handler: () &#x3D;&gt; {
            this.adminsService.applySortingProposal();
            this.sorted &#x3D; false;
            this.refresh();
          }
        }]
      }).then(alertEl &#x3D;&gt; {
        alertEl.present();
      });
    }
  }

}
</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'ModifiedProjektleiter.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
