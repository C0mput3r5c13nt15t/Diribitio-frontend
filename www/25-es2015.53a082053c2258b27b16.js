(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"0zAt":function(e,t,s){"use strict";s.r(t),s.d(t,"LeaderMessagesPageModule",function(){return _});var n=s("ofXK"),o=s("3Pt+"),i=s("tyNb"),a=s("TEn/"),c=s("fXoL"),r=s("3LUQ"),b=s("CoJz"),d=s("PO/Q"),l=s("Hzbo"),g=s("r4Kj");function u(e,t){if(1&e){const e=c.Nb();c.Mb(0,"ion-buttons",20),c.Ub("click",function(){c.lc(e);const t=c.Wb().$implicit;return c.Wb(2).delete(t)}),c.Kb(1,"ion-icon",21),c.Lb()}}function m(e,t){if(1&e&&(c.Mb(0,"ion-card",22),c.Mb(1,"ion-card-content"),c.Mb(2,"ion-text",23),c.pc(3),c.Lb(),c.Kb(4,"br"),c.Mb(5,"ion-text",24),c.pc(6),c.Lb(),c.Lb(),c.Lb()),2&e){const e=c.Wb().$implicit;c.yb(3),c.qc(e.sender_name),c.yb(3),c.qc(e.message)}}function h(e,t){if(1&e&&(c.Mb(0,"ion-card",25),c.Mb(1,"ion-card-content"),c.Mb(2,"ion-text",23),c.pc(3),c.Lb(),c.Kb(4,"br"),c.Mb(5,"ion-text",24),c.pc(6),c.Lb(),c.Lb(),c.Lb()),2&e){const e=c.Wb().$implicit;c.yb(3),c.qc(e.sender_name),c.yb(3),c.qc(e.message)}}function f(e,t){if(1&e){const e=c.Nb();c.Mb(0,"ion-buttons",26),c.Ub("click",function(){c.lc(e);const t=c.Wb().$implicit;return c.Wb(2).delete(t)}),c.Kb(1,"ion-icon",21),c.Lb()}}function p(e,t){if(1&e&&(c.Mb(0,"ion-item",15),c.oc(1,u,2,0,"ion-buttons",16),c.oc(2,m,7,2,"ion-card",17),c.oc(3,h,7,2,"ion-card",18),c.oc(4,f,2,0,"ion-buttons",19),c.Lb()),2&e){const e=t.$implicit,s=c.Wb(2);c.yb(1),c.bc("ngIf",e.sender_name==s.loadedLeader.user_name),c.yb(1),c.bc("ngIf",e.sender_name==s.loadedLeader.user_name),c.yb(1),c.bc("ngIf",e.sender_name!=s.loadedLeader.user_name),c.yb(1),c.bc("ngIf",e.sender_name!=s.loadedLeader.user_name)}}function L(e,t){if(1&e&&(c.Mb(0,"ion-list",13),c.oc(1,p,5,4,"ion-item",14),c.Lb()),2&e){const e=c.Wb();c.yb(1),c.bc("ngForOf",e.leadedProject.messages)}}const M=[{path:"",component:(()=>{class e{constructor(e,t,s,n,o,i,a){this.activatedRoute=e,this.router=t,this.alert=s,this.projectsService=n,this.leadersService=o,this.messagesService=i,this.config=a,this.subscriptions=[],this.loadedLeader={id:0,user_name:"",email:"",password:"",project_id:0},this.leadedProject={id:0,authorized:0,editable:0,title:"",image:"",descr:"",leader_name:"",leader_id:0,cost:0,first_day_begin:{hours:0,minutes:0},first_day_end:{hours:0,minutes:0},second_day_begin:{hours:0,minutes:0},second_day_end:{hours:0,minutes:0},min_grade:0,max_grade:0,min_participants:0,max_participants:0,messages:[],participants:[]},this.newMessage={message:""},this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{e.has("LeaderName")?this.leaderUrl=e.get("LeaderName"):this.router.navigate([""])}),this.getProject(),this.getLeader(),this.subscriptions.push(this.messagesService.update.subscribe(()=>this.getProject()),this.messagesService.update.subscribe(()=>this.getLeader()))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getLeader(){this.leadersService.getSelfLeader().subscribe(e=>{this.loadedLeader=e.data})}getProject(){this.projectsService.getSelfLeadedProject("leaders").subscribe(e=>{this.leadedProject=e.data})}send(e){!0===e.valid&&(this.messagesService.createMessage("leaders",this.newMessage).subscribe(e=>{this.messagesService.update.emit(),this.leadedProject.messages.push(e.data)},e=>{this.alert.error("Versandt der Nachricht fehlgeschlagen!",e.error)}),e.reset())}delete(e){this.leadedProject.messages=this.leadedProject.messages.filter(t=>t.id!==e.id),this.messagesService.deleteMessage("leaders",e.id)}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(i.a),c.Jb(i.g),c.Jb(r.a),c.Jb(b.a),c.Jb(d.a),c.Jb(l.a),c.Jb(g.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-messages"]],decls:18,vars:6,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["class","content",4,"ngIf"],["color","background","name","MessageBox",1,"content"],["id","Formular","name","MessageForm",3,"ngSubmit"],["form","ngForm"],["color","items"],["color","text","required","","name","MessageText","type","text",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","type","submit","expand","block",1,"ion-no-margin",3,"disabled"],["name","send"],[1,"content"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],["slot","end",3,"click",4,"ngIf"],["class","message sended_message","slot","end","color","background",4,"ngIf"],["class","message","slot","start","color","background",4,"ngIf"],["slot","start",3,"click",4,"ngIf"],["slot","end",3,"click"],["color","danger","name","close"],["slot","end","color","background",1,"message","sended_message"],["color","buttons"],["color","text"],["slot","start","color","background",1,"message"],["slot","start",3,"click"]],template:function(e,t){if(1&e){const e=c.Nb();c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-button",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.pc(5,"Nachrichten"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content",3),c.oc(7,L,2,1,"ion-list",4),c.Mb(8,"ion-card",5),c.Mb(9,"form",6,7),c.Ub("ngSubmit",function(){c.lc(e);const s=c.jc(10);return t.send(s)}),c.Mb(11,"ion-item",8),c.Mb(12,"ion-input",9),c.Ub("ngModelChange",function(e){return t.newMessage.message=e}),c.Lb(),c.Lb(),c.Mb(13,"div",10),c.Mb(14,"ion-button",11),c.Mb(15,"ion-label"),c.Kb(16,"ion-icon",12),c.pc(17," Nachricht senden"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&e){const e=c.jc(10);c.yb(3),c.ec("defaultHref","",t.eventName,"/",t.projectNoun,"leiter/",t.leaderUrl,""),c.yb(4),c.bc("ngIf",t.leadedProject.messages.length),c.yb(5),c.bc("ngModel",t.newMessage.message),c.yb(2),c.bc("disabled",e.invalid)}},directives:[a.t,a.R,a.h,a.e,a.f,a.P,a.p,n.j,a.j,o.k,o.g,o.h,a.x,a.w,a.ab,o.j,o.f,o.i,a.A,a.u,a.B,n.i,a.i,a.k,a.N],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[n.b,o.a,a.S,i.k.forChild(M)]]}),e})()}}]);