(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1i7b":function(e,t,n){"use strict";n.r(t),n.d(t,"RegistrationPageModule",function(){return _});var i=n("ofXK"),o=n("3Pt+"),d=n("tyNb"),s=n("TEn/"),r=n("fXoL"),a=n("CoJz"),c=n("ZvwH"),l=n("r4Kj");function b(e,t){if(1&e&&(r.Mb(0,"ion-card-content"),r.Mb(1,"ion-label",11),r.pc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb();r.yb(2),r.rc(" ",e.text," ")}}function h(e,t){if(1&e){const e=r.Nb();r.Mb(0,"ion-card",3),r.Mb(1,"form",6,7),r.Ub("ngSubmit",function(){return r.lc(e),r.Wb().appendFriendFunction()}),r.Mb(3,"ion-item",8),r.Mb(4,"ion-input",36),r.Ub("ngModelChange",function(t){return r.lc(e),r.Wb().appendFriend.first_name=t}),r.Lb(),r.Lb(),r.Mb(5,"ion-item",8),r.Mb(6,"ion-input",37),r.Ub("ngModelChange",function(t){return r.lc(e),r.Wb().appendFriend.last_name=t}),r.Lb(),r.Lb(),r.Mb(7,"ion-item",8),r.Mb(8,"ion-label",11),r.pc(9,"Klassenstufe"),r.Lb(),r.Mb(10,"ion-select",38),r.Ub("ngModelChange",function(t){return r.lc(e),r.Wb().appendFriend.grade=t}),r.Mb(11,"ion-select-option",13),r.pc(12,"5"),r.Lb(),r.Mb(13,"ion-select-option",14),r.pc(14,"6"),r.Lb(),r.Mb(15,"ion-select-option",15),r.pc(16,"7"),r.Lb(),r.Mb(17,"ion-select-option",16),r.pc(18,"8"),r.Lb(),r.Mb(19,"ion-select-option",17),r.pc(20,"9"),r.Lb(),r.Mb(21,"ion-select-option",18),r.pc(22,"10"),r.Lb(),r.Mb(23,"ion-select-option",19),r.pc(24,"11"),r.Lb(),r.Lb(),r.Lb(),r.Mb(25,"ion-item",8),r.Mb(26,"ion-radio-group",39),r.Ub("ngModelChange",function(t){return r.lc(e),r.Wb().appendFriend.letter=t}),r.Mb(27,"ion-item",21),r.Mb(28,"ion-label",11),r.pc(29,"A "),r.Lb(),r.Kb(30,"ion-radio",22),r.Lb(),r.Mb(31,"ion-item",21),r.Mb(32,"ion-label",11),r.pc(33,"B "),r.Lb(),r.Kb(34,"ion-radio",23),r.Lb(),r.Mb(35,"ion-item",21),r.Mb(36,"ion-label",11),r.pc(37,"C "),r.Lb(),r.Kb(38,"ion-radio",24),r.Lb(),r.Mb(39,"ion-item",21),r.Mb(40,"ion-label",11),r.pc(41,"D "),r.Lb(),r.Kb(42,"ion-radio",25),r.Lb(),r.Lb(),r.Lb(),r.Mb(43,"div",34),r.Mb(44,"ion-button",35),r.pc(45,"Als Freund hinzuf\xfcgen"),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&e){const e=r.jc(2),t=r.Wb();r.yb(4),r.bc("ngModel",t.appendFriend.first_name),r.yb(2),r.bc("ngModel",t.appendFriend.last_name),r.yb(4),r.bc("selectedText",t.appendFriend.grade)("ngModel",t.appendFriend.grade),r.yb(16),r.bc("ngModel",t.appendFriend.letter),r.yb(18),r.bc("disabled",e.invalid)}}function u(e,t){if(1&e){const e=r.Nb();r.Mb(0,"ion-item",21),r.pc(1),r.Mb(2,"ion-button",41),r.Ub("click",function(){r.lc(e);const n=t.$implicit;return r.Wb(2).removeFriendFunction(n)}),r.Kb(3,"ion-icon",42),r.Lb(),r.Lb()}if(2&e){const e=t.$implicit;r.yb(1),r.uc(" ",e.first_name," ",e.last_name," ",e.grade,"",e.letter," ")}}function p(e,t){if(1&e&&(r.Mb(0,"ion-item",8),r.Mb(1,"ion-list"),r.oc(2,u,4,4,"ion-item",40),r.Lb(),r.Lb()),2&e){const e=r.Wb();r.yb(2),r.bc("ngForOf",e.friendsList)}}function g(e,t){if(1&e&&(r.Mb(0,"ion-item",8),r.Mb(1,"ion-label",11),r.pc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb();r.yb(2),r.uc(" ",e.definiteArticle," ",e.projectNoun," muss die Klassenstufen ",e.lowestGrade," bis ",e.highestGrade," erlauben. ")}}function f(e,t){if(1&e&&(r.Mb(0,"ion-item",3),r.Mb(1,"ion-label",43),r.pc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb();r.yb(2),r.sc(" Du kanst leider keine Freunde ausw\xe4hlen, da du selbst ",e.indefiniteArticle," ",e.projectNoun," erstellt hast. ")}}function M(e,t){if(1&e&&(r.Mb(0,"ion-select-option",44),r.pc(1),r.Lb()),2&e){const e=t.$implicit;r.bc("value",e.id),r.yb(1),r.tc("",e.title," (",e.min_grade,". - ",e.max_grade,".Klasse)")}}function m(e,t){if(1&e&&(r.Mb(0,"ion-select-option",44),r.pc(1),r.Lb()),2&e){const e=t.$implicit;r.bc("value",e.id),r.yb(1),r.tc("",e.title," (",e.min_grade,". - ",e.max_grade,".Klasse)")}}function L(e,t){if(1&e&&(r.Mb(0,"ion-select-option",44),r.pc(1),r.Lb()),2&e){const e=t.$implicit;r.bc("value",e.id),r.yb(1),r.tc("",e.title," (",e.min_grade,". - ",e.max_grade,".Klasse)")}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,d){this.projectsService=e,this.studentsService=t,this.activatedRoute=n,this.router=i,this.alertCtrl=o,this.config=d,this.subscriptions=[],this.loadedProjects=[],this.possibleProjects=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.appendFriend={id:0,first_name:"",last_name:"",grade:0,letter:""},this.friendsList=[],this.definiteArticle=this.config.definite_article,this.indefiniteArticle=this.config.indefinite_article.toLowerCase(),this.projectsNoun=this.config.app_config.projects_noun,this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}ngOnInit(){this.text=this.config.get_content("student-registration"),this.activatedRoute.paramMap.subscribe(e=>{e.has("ParticipantName")?this.studentUrl=e.get("ParticipantName"):this.router.navigate([""])}),this.getProjects(),this.getStudent(),this.subscriptions.push(this.projectsService.update.subscribe(()=>this.getProjects()),this.studentsService.update.subscribe(()=>this.getStudent()))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getStudent(){this.studentsService.getSelfStudent().subscribe(e=>{this.loadedStudent=e.data,this.lowestGrade=+e.data.grade,this.highestGrade=+e.data.grade,this.friendsList=[],this.studentsService.getFriends().subscribe(e=>{this.friendsList=e.data,this.friendsList.forEach(e=>{+e.grade<=this.lowestGrade&&(this.lowestGrade=+e.grade),+e.grade>=this.highestGrade&&(this.highestGrade=+e.grade),this.filterProjects()})})})}userChanges(){this.lowestGrade=+this.loadedStudent.grade,this.highestGrade=+this.loadedStudent.grade,this.friendsList.forEach(e=>{+e.grade<=this.lowestGrade&&(this.lowestGrade=+e.grade),+e.grade>=this.highestGrade&&(this.highestGrade=+e.grade)}),this.filterProjects()}getProjects(){this.projectsService.getAllProjects().subscribe(e=>{this.loadedProjects=e.data})}validateProject(e){return this.lowestGrade>=+e.min_grade&&+e.max_grade>=this.highestGrade&&e.id!==this.loadedStudent.project_id&&!!e.authorized}filterProjects(){this.possibleProjects=[],this.loadedProjects.forEach(e=>{this.validateProject(e)&&this.possibleProjects.push(e)})}appendFriendFunction(){this.studentsService.getStudentID(this.appendFriend).subscribe(e=>{0!=e.id?(this.appendFriend.id=e.id,this.friendsList.length<3&&!this.friendsList.some(t=>t.id===e.id)&&(this.friendsList.push(JSON.parse(JSON.stringify(this.appendFriend))),console.log(this.friendsList),+this.appendFriend.grade<=this.lowestGrade&&(this.lowestGrade=+this.appendFriend.grade),+this.appendFriend.grade>=this.highestGrade&&(this.highestGrade=+this.appendFriend.grade)),this.filterProjects()):this.alertCtrl.create({header:"Fehler",message:"Der angegebene Sch\xfcler konnte nicht gefunden werden!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{e.present()})})}removeFriendFunction(e){this.friendsList.splice(this.friendsList.indexOf(e),1),this.lowestGrade=+this.loadedStudent.grade,this.highestGrade=+this.loadedStudent.grade,this.friendsList.forEach(e=>{+e.grade<this.lowestGrade&&(this.lowestGrade=+e.grade),+e.grade>this.highestGrade&&(this.highestGrade=+e.grade)}),this.filterProjects()}registrate(){this.loadedStudent.first_wish!=this.loadedStudent.project_id&&this.loadedStudent.second_wish!=this.loadedStudent.project_id&&this.loadedStudent.third_wish!=this.loadedStudent.project_id?this.loadedStudent.first_wish!==this.loadedStudent.second_wish&&this.loadedStudent.first_wish!==this.loadedStudent.third_wish&&this.loadedStudent.second_wish!==this.loadedStudent.third_wish?3===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=this.friendsList[1].id,this.loadedStudent.third_friend=this.friendsList[2].id,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):2===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=this.friendsList[1].id,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):1===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=0,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):(this.loadedStudent.first_friend=0,this.loadedStudent.second_friend=0,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):this.alertCtrl.create({header:"Fehler",message:"Du must drei verschiedene Projektw\xfcnsche angeben!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{e.present()}):this.alertCtrl.create({header:"Fehler",message:"Du kannst nicht an deinem eigenen Projekt teilnehmen!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{e.present()})}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(a.a),r.Jb(c.a),r.Jb(d.a),r.Jb(d.g),r.Jb(s.a),r.Jb(l.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-registration"]],decls:89,vars:20,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["name","ParticipantForm",3,"ngSubmit"],["form","ngForm"],["color","items"],["color","text","required","","name","ParticipantFirstName","placeholder","Vorname","type","text",3,"ngModel","ngModelChange"],["color","text","required","","name","ParticipantLastName","placeholder","Nachname","type","text",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ionChange","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","items","lines","none"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],["color","text","slot","start","value","e"],["color","text","slot","start","value","f"],["color","background",4,"ngIf"],["color","items",4,"ngIf"],["required","","placeholder","1. Wunsch","name","ParticipantFirstWish","okText","Ausw\xe4hlen","cancelText","Abbrechen","type","number",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","","placeholder","2. Wunsch","name","ParticipantSecondWish","okText","Ausw\xe4hlen","cancelText","Abbrechen","type","number",3,"ngModel","ngModelChange"],["required","","placeholder","3. Wunsch","name","ParticipantThirdWish","okText","Ausw\xe4hlen","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","text","type","text","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["name","ParticipantGrade","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["color","buttons","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","buttons","slot","end",3,"click"],["color","text","name","close"],["color","danger"],[3,"value"]],template:function(e,t){if(1&e&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar",0),r.Mb(2,"ion-button",1),r.Kb(3,"ion-back-button",2),r.Lb(),r.Mb(4,"ion-title"),r.pc(5,"Anmeldung"),r.Lb(),r.Lb(),r.Lb(),r.Mb(6,"ion-content",3),r.Mb(7,"ion-card",4),r.Mb(8,"ion-card-header",3),r.Mb(9,"ion-card-title"),r.pc(10),r.Lb(),r.Lb(),r.oc(11,b,3,1,"ion-card-content",5),r.Mb(12,"ion-card-content"),r.Mb(13,"form",6,7),r.Ub("ngSubmit",function(){return t.registrate()}),r.Mb(15,"ion-list"),r.Mb(16,"ion-item",8),r.Mb(17,"ion-input",9),r.Ub("ngModelChange",function(e){return t.loadedStudent.first_name=e}),r.Lb(),r.Lb(),r.Mb(18,"ion-item",8),r.Mb(19,"ion-input",10),r.Ub("ngModelChange",function(e){return t.loadedStudent.last_name=e}),r.Lb(),r.Lb(),r.Mb(20,"ion-item",8),r.Mb(21,"ion-label",11),r.pc(22,"Klassenstufe"),r.Lb(),r.Mb(23,"ion-select",12),r.Ub("ionChange",function(){return t.userChanges()})("ngModelChange",function(e){return t.loadedStudent.grade=e}),r.Mb(24,"ion-select-option",13),r.pc(25,"5"),r.Lb(),r.Mb(26,"ion-select-option",14),r.pc(27,"6"),r.Lb(),r.Mb(28,"ion-select-option",15),r.pc(29,"7"),r.Lb(),r.Mb(30,"ion-select-option",16),r.pc(31,"8"),r.Lb(),r.Mb(32,"ion-select-option",17),r.pc(33,"9"),r.Lb(),r.Mb(34,"ion-select-option",18),r.pc(35,"10"),r.Lb(),r.Mb(36,"ion-select-option",19),r.pc(37,"11"),r.Lb(),r.Lb(),r.Lb(),r.Mb(38,"ion-item",8),r.Mb(39,"ion-radio-group",20),r.Ub("ngModelChange",function(e){return t.loadedStudent.letter=e}),r.Mb(40,"ion-item",21),r.Mb(41,"ion-label",11),r.pc(42,"A "),r.Lb(),r.Kb(43,"ion-radio",22),r.Lb(),r.Mb(44,"ion-item",21),r.Mb(45,"ion-label",11),r.pc(46,"B "),r.Lb(),r.Kb(47,"ion-radio",23),r.Lb(),r.Mb(48,"ion-item",21),r.Mb(49,"ion-label",11),r.pc(50,"C "),r.Lb(),r.Kb(51,"ion-radio",24),r.Lb(),r.Mb(52,"ion-item",21),r.Mb(53,"ion-label",11),r.pc(54,"D "),r.Lb(),r.Kb(55,"ion-radio",25),r.Lb(),r.Mb(56,"ion-item",21),r.Mb(57,"ion-label",11),r.pc(58,"E "),r.Lb(),r.Kb(59,"ion-radio",26),r.Lb(),r.Mb(60,"ion-item",21),r.Mb(61,"ion-label",11),r.pc(62,"F "),r.Lb(),r.Kb(63,"ion-radio",27),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.oc(64,h,46,6,"ion-card",28),r.Mb(65,"ion-list"),r.Mb(66,"ion-title",3),r.pc(67,"Freunde"),r.Lb(),r.oc(68,p,3,1,"ion-item",29),r.oc(69,g,3,4,"ion-item",29),r.oc(70,f,3,2,"ion-item",28),r.Mb(71,"ion-item",8),r.Mb(72,"ion-label",11),r.pc(73,"1. Wunsch"),r.Lb(),r.Mb(74,"ion-select",30),r.Ub("ngModelChange",function(e){return t.loadedStudent.first_wish=e}),r.oc(75,M,2,4,"ion-select-option",31),r.Lb(),r.Lb(),r.Mb(76,"ion-item",8),r.Mb(77,"ion-label",11),r.pc(78,"2. Wunsch"),r.Lb(),r.Mb(79,"ion-select",32),r.Ub("ngModelChange",function(e){return t.loadedStudent.second_wish=e}),r.oc(80,m,2,4,"ion-select-option",31),r.Lb(),r.Lb(),r.Mb(81,"ion-item",8),r.Mb(82,"ion-label",11),r.pc(83,"3. Wunsch"),r.Lb(),r.Mb(84,"ion-select",33),r.Ub("ngModelChange",function(e){return t.loadedStudent.third_wish=e}),r.oc(85,L,2,4,"ion-select-option",31),r.Lb(),r.Lb(),r.Lb(),r.Mb(86,"div",34),r.Mb(87,"ion-button",35),r.pc(88,"Anmelden"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&e){const e=r.jc(14);r.yb(3),r.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),r.yb(7),r.rc("F\xfcr ",t.projectsNoun," Anmelden"),r.yb(1),r.bc("ngIf",t.text),r.yb(6),r.bc("ngModel",t.loadedStudent.first_name),r.yb(2),r.bc("ngModel",t.loadedStudent.last_name),r.yb(4),r.bc("selectedText",t.loadedStudent.grade)("ngModel",t.loadedStudent.grade),r.yb(16),r.bc("ngModel",t.loadedStudent.letter),r.yb(25),r.bc("ngIf",0==t.loadedStudent.project_id),r.yb(4),r.bc("ngIf",0==t.loadedStudent.project_id||null==t.loadedStudent.project_id),r.yb(1),r.bc("ngIf",0==t.loadedStudent.project_id&&1===t.loadedStudent.role||null==t.loadedStudent.project_id&&1===t.loadedStudent.role),r.yb(1),r.bc("ngIf",0!=t.loadedStudent.project_id&&null!=t.loadedStudent.project_id||2===t.loadedStudent.role),r.yb(4),r.bc("ngModel",t.loadedStudent.first_wish),r.yb(1),r.bc("ngForOf",t.possibleProjects),r.yb(4),r.bc("ngModel",t.loadedStudent.second_wish),r.yb(1),r.bc("ngForOf",t.possibleProjects),r.yb(4),r.bc("ngModel",t.loadedStudent.third_wish),r.yb(1),r.bc("ngForOf",t.possibleProjects),r.yb(2),r.bc("disabled",e.invalid)}},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.p,s.j,s.l,s.n,i.j,s.k,o.k,o.g,o.h,s.B,s.x,s.w,s.ab,o.j,o.f,o.i,s.A,s.I,s.Z,s.J,s.D,s.C,s.X,i.i,s.u],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[i.b,o.a,s.S,d.k.forChild(S)]]}),e})()}}]);