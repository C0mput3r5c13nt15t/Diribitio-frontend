!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"67tE":function(t,a,r){"use strict";r.r(a),r.d(a,"ExchangeRequestPageModule",function(){return y});var i=r("ofXK"),o=r("3Pt+"),c=r("tyNb"),b=r("TEn/"),l=r("fXoL"),s=r("ZvwH"),d=r("hQbD"),u=r("3LUQ"),g=r("r4Kj");function h(e,n){if(1&e&&(l.Mb(0,"ion-card-content"),l.Mb(1,"ion-label",18),l.pc(2),l.Lb(),l.Lb()),2&e){var t=l.Wb(2);l.yb(2),l.rc(" ",t.text," ")}}function f(e,n){1&e&&(l.Mb(0,"ion-title"),l.pc(1,"Dein Freund "),l.Lb())}function p(e,n){if(1&e&&(l.Mb(0,"ion-title"),l.pc(1),l.Lb()),2&e){var t=l.Wb(2);l.yb(1),l.uc(" ",t.exchangePartner.first_name," ",t.exchangePartner.last_name," ",t.exchangePartner.grade,"",t.exchangePartner.letter," ")}}function M(e,n){if(1&e){var t=l.Nb();l.Mb(0,"ion-card",7),l.Mb(1,"ion-card-header",5),l.Mb(2,"ion-card-title"),l.pc(3,"Tauschanfragen senden"),l.Lb(),l.Lb(),l.oc(4,h,3,1,"ion-card-content",8),l.Mb(5,"ion-card-content"),l.Mb(6,"form",9,10),l.Ub("ngSubmit",function(){return l.lc(t),l.Wb().submit()}),l.Mb(8,"ion-list"),l.Mb(9,"ion-item-divider",5),l.Mb(10,"ion-card-title"),l.pc(11,"Du"),l.Lb(),l.Lb(),l.Mb(12,"ion-item",11),l.Mb(13,"ion-input",12),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().loadedStudent.first_name=e}),l.Lb(),l.Lb(),l.Mb(14,"ion-item",11),l.Mb(15,"ion-input",13),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().loadedStudent.last_name=e}),l.Lb(),l.Lb(),l.Mb(16,"ion-item",11),l.Mb(17,"ion-input",14),l.pc(18),l.Lb(),l.Lb(),l.Mb(19,"ion-item-divider",5),l.oc(20,f,2,0,"ion-title",8),l.oc(21,p,2,4,"ion-title",8),l.Lb(),l.Mb(22,"ion-item",15),l.Mb(23,"ion-input",16),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().exchangePartner.first_name=e}),l.Lb(),l.Lb(),l.Mb(24,"ion-item",15),l.Mb(25,"ion-input",17),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().exchangePartner.last_name=e}),l.Lb(),l.Lb(),l.Mb(26,"ion-item",15),l.Mb(27,"ion-label",18),l.pc(28,"Klassenstufe"),l.Lb(),l.Mb(29,"ion-select",19),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().exchangePartner.grade=e}),l.Mb(30,"ion-select-option",20),l.pc(31,"5"),l.Lb(),l.Mb(32,"ion-select-option",21),l.pc(33,"6"),l.Lb(),l.Mb(34,"ion-select-option",22),l.pc(35,"7"),l.Lb(),l.Mb(36,"ion-select-option",23),l.pc(37,"8"),l.Lb(),l.Mb(38,"ion-select-option",24),l.pc(39,"9"),l.Lb(),l.Mb(40,"ion-select-option",25),l.pc(41,"10"),l.Lb(),l.Mb(42,"ion-select-option",26),l.pc(43,"11"),l.Lb(),l.Lb(),l.Lb(),l.Mb(44,"ion-item",15),l.Mb(45,"ion-radio-group",27),l.Ub("ngModelChange",function(e){return l.lc(t),l.Wb().exchangePartner.letter=e}),l.Mb(46,"ion-item",11),l.Mb(47,"ion-label",18),l.pc(48,"A "),l.Lb(),l.Kb(49,"ion-radio",28),l.Lb(),l.Mb(50,"ion-item",11),l.Mb(51,"ion-label",18),l.pc(52,"B "),l.Lb(),l.Kb(53,"ion-radio",29),l.Lb(),l.Mb(54,"ion-item",11),l.Mb(55,"ion-label",18),l.pc(56,"C "),l.Lb(),l.Kb(57,"ion-radio",30),l.Lb(),l.Mb(58,"ion-item",11),l.Mb(59,"ion-label",18),l.pc(60,"D "),l.Lb(),l.Kb(61,"ion-radio",31),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(62,"div",32),l.Mb(63,"ion-button",33),l.pc(64,"Tauschanfrage senden"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&e){var a=l.jc(7),r=l.Wb();l.yb(4),l.bc("ngIf",r.text),l.yb(9),l.bc("ngModel",r.loadedStudent.first_name),l.yb(2),l.bc("ngModel",r.loadedStudent.last_name),l.yb(3),l.sc("",r.loadedStudent.grade,"",r.loadedStudent.letter,""),l.yb(2),l.bc("ngIf",0===r.exchangePartner.id),l.yb(1),l.bc("ngIf",0!=r.exchangePartner.id),l.yb(2),l.bc("ngModel",r.exchangePartner.first_name),l.yb(2),l.bc("ngModel",r.exchangePartner.last_name),l.yb(4),l.bc("selectedText",r.exchangePartner.grade)("ngModel",r.exchangePartner.grade),l.yb(16),l.bc("ngModel",r.exchangePartner.letter),l.yb(18),l.bc("disabled",a.invalid)}}function m(e,n){if(1&e&&(l.Mb(0,"ion-card",7),l.Mb(1,"ion-card-content"),l.Mb(2,"ion-text",34),l.pc(3),l.Lb(),l.Lb(),l.Lb()),2&e){var t=l.Wb();l.yb(3),l.qc(t.studentAlreadyExchangeError)}}var x,L,v=[{path:"",component:(x=function(){function t(n,a,r,i,o,c,b){e(this,t),this.activatedRoute=n,this.router=a,this.studentsService=r,this.exchangesService=i,this.alertCtrl=o,this.alert=c,this.config=b,this.subscriptions=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.exchangePartner={first_name:"",last_name:"",grade:0,letter:""},this.eventName=this.config.app_config.event_name}var a,r,i;return a=t,(r=[{key:"ngOnInit",value:function(){var e=this;this.text=this.config.get_content("student-exchange-request"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.activatedRoute.paramMap.subscribe(function(n){n.has("ParticipantName")?e.studentUrl=n.get("ParticipantName"):e.router.navigate([""])}),this.getStudent(),this.subscriptions.push(this.studentsService.update.subscribe(function(){return e.getStudent()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getStudent",value:function(){var e=this;this.studentsService.getSelfStudent().subscribe(function(n){e.loadedStudent=n.data})}},{key:"submit",value:function(){var e=this;this.studentsService.getStudentID(this.exchangePartner).subscribe(function(n){0!=n.id&&0==e.loadedStudent.exchange_id?e.exchangesService.createExchange(n.id).subscribe(function(n){e.alert.alert(n.message),e.router.navigate([e.eventName+"/Sch\xfcler/"+e.studentUrl]),e.exchangesService.update.emit()},function(n){e.alert.error("Erstellung des Tausches fehlgeschlagen!",n.error)}):e.alertCtrl.create({header:"Fehler",message:"Du must zuerst einen validen Tauschpartner ausw\xe4hlen!",buttons:[{text:"Ok",role:"cancel"}]}).then(function(e){e.present()})})}},{key:"delete",value:function(){var e=this;this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich deine Tauschanfrage l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:function(){e.exchangesService.deleteSelfExchange().subscribe(function(n){e.alert.alert(n.message),e.router.navigate([e.eventName+"/Sch\xfcler/"+e.studentUrl]),e.exchangesService.update.emit()},function(n){e.alert.error("L\xf6schung der Tauschanfrage fehlgeschlagen!",n.error)})}}]}).then(function(e){e.present()})}}])&&n(a.prototype,r),i&&n(a,i),t}(),x.\u0275fac=function(e){return new(e||x)(l.Jb(c.a),l.Jb(c.g),l.Jb(s.a),l.Jb(d.a),l.Jb(b.a),l.Jb(u.a),l.Jb(g.a))},x.\u0275cmp=l.Db({type:x,selectors:[["app-exchange-request"]],decls:11,vars:5,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","slot","end","color","danger",3,"disabled","click"],["name","trash"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["name","ExchangeForm",3,"ngSubmit"],["form","ngForm"],["color","items","lines","none"],["color","text","readonly","","name","ExchangeFirstFirstName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstLastName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstGradeAndClass"],["color","items"],["color","text","type","text","required","","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","required","","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"]],template:function(e,n){1&e&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar",0),l.Mb(2,"ion-button",1),l.Kb(3,"ion-back-button",2),l.Lb(),l.Mb(4,"ion-title"),l.pc(5,"Tausch anfragen"),l.Lb(),l.Mb(6,"ion-button",3),l.Ub("click",function(){return n.delete()}),l.Kb(7,"ion-icon",4),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-content",5),l.oc(9,M,65,13,"ion-card",6),l.oc(10,m,4,1,"ion-card",6),l.Lb()),2&e&&(l.yb(3),l.dc("defaultHref","",n.eventName,"/Sch\xfcler/",n.studentUrl,""),l.yb(3),l.bc("disabled",0==n.loadedStudent.exchange_id),l.yb(3),l.bc("ngIf",0==n.loadedStudent.exchange_id),l.yb(1),l.bc("ngIf",0!=n.loadedStudent.exchange_id))},directives:[b.t,b.R,b.h,b.e,b.f,b.P,b.u,b.p,i.j,b.j,b.l,b.n,b.k,o.k,o.g,o.h,b.B,b.y,b.x,b.w,b.ab,o.f,o.i,o.j,b.A,b.I,b.Z,b.J,b.D,b.C,b.X,b.N],styles:[""]}),x)}],y=((L=function n(){e(this,n)}).\u0275mod=l.Hb({type:L}),L.\u0275inj=l.Gb({factory:function(e){return new(e||L)},imports:[[i.b,o.a,b.S,c.k.forChild(v)]]}),L)}}])}();
//# sourceMappingURL=log-in-student-page-exchange-request-exchange-request-module-es5.a6e29eb99eb4588435d7.js.map