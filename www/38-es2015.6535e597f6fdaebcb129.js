(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"7RaF":function(t,e,n){"use strict";n.r(e),n.d(e,"PromoteStudentsPageModule",function(){return y});var i=n("ofXK"),s=n("3Pt+"),o=n("tyNb"),a=n("TEn/"),c=n("fXoL"),r=n("CoJz"),d=n("ZvwH"),b=n("r4Kj"),l=n("3LUQ");function u(t,e){if(1&t&&(c.Mb(0,"ion-card-content"),c.Mb(1,"ion-label",8),c.pc(2),c.Lb(),c.Lb()),2&t){const t=c.Wb(2);c.yb(2),c.rc(" ",t.text," ")}}function g(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-card",3),c.Mb(1,"form",9,10),c.Ub("ngSubmit",function(){c.lc(t);const e=c.jc(2);return c.Wb(2).promoteStudent(e)}),c.Mb(3,"ion-item",11),c.Mb(4,"ion-input",12),c.Ub("ngModelChange",function(e){return c.lc(t),c.Wb(2).declaredAssistant.first_name=e}),c.Lb(),c.Lb(),c.Mb(5,"ion-item",11),c.Mb(6,"ion-input",13),c.Ub("ngModelChange",function(e){return c.lc(t),c.Wb(2).declaredAssistant.last_name=e}),c.Lb(),c.Lb(),c.Mb(7,"ion-item",11),c.Mb(8,"ion-label",8),c.pc(9,"Klassenstufe"),c.Lb(),c.Mb(10,"ion-select",14),c.Ub("ngModelChange",function(e){return c.lc(t),c.Wb(2).declaredAssistant.grade=e}),c.Mb(11,"ion-select-option",15),c.pc(12,"5"),c.Lb(),c.Mb(13,"ion-select-option",16),c.pc(14,"6"),c.Lb(),c.Mb(15,"ion-select-option",17),c.pc(16,"7"),c.Lb(),c.Mb(17,"ion-select-option",18),c.pc(18,"8"),c.Lb(),c.Mb(19,"ion-select-option",19),c.pc(20,"9"),c.Lb(),c.Mb(21,"ion-select-option",20),c.pc(22,"10"),c.Lb(),c.Mb(23,"ion-select-option",21),c.pc(24,"11"),c.Lb(),c.Lb(),c.Lb(),c.Mb(25,"ion-item",11),c.Mb(26,"ion-radio-group",22),c.Ub("ngModelChange",function(e){return c.lc(t),c.Wb(2).declaredAssistant.letter=e}),c.Mb(27,"ion-item",23),c.Mb(28,"ion-label",8),c.pc(29,"A "),c.Lb(),c.Kb(30,"ion-radio",24),c.Lb(),c.Mb(31,"ion-item",23),c.Mb(32,"ion-label",8),c.pc(33,"B "),c.Lb(),c.Kb(34,"ion-radio",25),c.Lb(),c.Mb(35,"ion-item",23),c.Mb(36,"ion-label",8),c.pc(37,"C "),c.Lb(),c.Kb(38,"ion-radio",26),c.Lb(),c.Mb(39,"ion-item",23),c.Mb(40,"ion-label",8),c.pc(41,"D "),c.Lb(),c.Kb(42,"ion-radio",27),c.Lb(),c.Lb(),c.Lb(),c.Mb(43,"div",28),c.Mb(44,"ion-button",29),c.pc(45,"Als Assistent auszeichnen"),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=c.jc(2),e=c.Wb(2);c.yb(4),c.bc("ngModel",e.declaredAssistant.first_name),c.yb(2),c.bc("ngModel",e.declaredAssistant.last_name),c.yb(4),c.bc("selectedText",e.declaredAssistant.grade)("ngModel",e.declaredAssistant.grade),c.yb(16),c.bc("ngModel",e.declaredAssistant.letter),c.yb(18),c.bc("disabled",t.invalid||e.leadedProject.leader_id!=e.loadedStudent.id)}}function h(t,e){if(1&t&&(c.Mb(0,"ion-card",5),c.Mb(1,"ion-card-content"),c.Mb(2,"ion-text",30),c.pc(3),c.Lb(),c.Lb(),c.Lb()),2&t){const t=c.Wb(2);c.yb(3),c.qc(t.studentNoAssistantsEditByAssistants)}}function p(t,e){1&t&&(c.Mb(0,"ion-item-divider",3),c.Mb(1,"ion-label",8),c.pc(2,"Assistenten"),c.Lb(),c.Lb())}function m(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-buttons",34),c.Ub("click",function(){c.lc(t);const e=c.Wb().$implicit;return c.Wb(4).suspendStudent(e.id)}),c.Kb(1,"ion-icon",35),c.Lb()}}function f(t,e){if(1&t&&(c.Mb(0,"ion-item",23),c.Mb(1,"ion-card",3),c.Mb(2,"ion-card-content"),c.Mb(3,"ion-text",8),c.Kb(4,"ion-icon",32),c.pc(5),c.Lb(),c.Lb(),c.Lb(),c.oc(6,m,2,0,"ion-buttons",33),c.Lb()),2&t){const t=e.$implicit,n=c.Wb(4);c.yb(5),c.uc(" ",t.first_name," ",t.last_name," ",t.grade,"",t.letter,""),c.yb(1),c.bc("ngIf",n.leadedProject.leader_id==n.loadedStudent.id)}}function M(t,e){if(1&t&&(c.Mb(0,"div"),c.oc(1,f,7,5,"ion-item",31),c.Lb()),2&t){const t=c.Wb(3);c.yb(1),c.bc("ngForOf",t.leadedProject.assistant_student_leaders)}}function _(t,e){if(1&t&&(c.Mb(0,"ion-card-content"),c.Mb(1,"ion-item-group"),c.oc(2,p,3,0,"ion-item-divider",7),c.oc(3,M,2,1,"div",6),c.Lb(),c.Lb()),2&t){const t=c.Wb(2);c.yb(2),c.bc("ngIf",t.leadedProject.assistant_student_leaders.length),c.yb(1),c.bc("ngIf",t.leadedProject.assistant_student_leaders.length)}}function L(t,e){if(1&t){const t=c.Nb();c.Mb(0,"ion-card-content"),c.Mb(1,"div",28),c.Mb(2,"ion-button",36),c.Ub("click",function(){return c.lc(t),c.Wb(2).quitAssistent()}),c.pc(3,"Assistent 'k\xfcndigen'"),c.Lb(),c.Lb(),c.Lb()}}function S(t,e){if(1&t&&(c.Mb(0,"ion-card",5),c.Mb(1,"ion-card-header"),c.Mb(2,"ion-card-title"),c.pc(3,"Assistenten verwalten"),c.Lb(),c.Lb(),c.oc(4,u,3,1,"ion-card-content",6),c.oc(5,g,46,6,"ion-card",7),c.oc(6,h,4,1,"ion-card",4),c.oc(7,_,4,2,"ion-card-content",6),c.oc(8,L,4,0,"ion-card-content",6),c.Lb()),2&t){const t=c.Wb();c.yb(4),c.bc("ngIf",t.text),c.yb(1),c.bc("ngIf",0!=t.loadedStudent.project_id&&t.leadedProject.leader_id==t.loadedStudent.id),c.yb(1),c.bc("ngIf",t.leadedProject.leader_id!=t.loadedStudent.id),c.yb(1),c.bc("ngIf",0!=t.loadedStudent.project_id&&t.leadedProject.leader_id==t.loadedStudent.id),c.yb(1),c.bc("ngIf",t.leadedProject.leader_id!=t.loadedStudent.id)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s,o,a){this.activatedRoute=t,this.router=e,this.projectsService=n,this.studentsService=i,this.config=s,this.alertCtrl=o,this.alert=a,this.subscriptions=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:2},this.leadedProject={id:0,authorized:0,editable:0,title:"",image:"",descr:"",leader_name:"",leader_type:"",leader_id:0,cost:0,first_day_begin:{hours:0,minutes:0},first_day_end:{hours:0,minutes:0},second_day_begin:{hours:0,minutes:0},second_day_end:{hours:0,minutes:0},min_grade:0,max_grade:0,min_participants:0,max_participants:0,messages:[],participants:[],assistant_student_leaders:[]},this.declaredAssistant={id:0,first_name:"",last_name:"",grade:0,letter:""},this.studentNoAssistantsEditByAssistants="",this.eventName=this.config.app_config.event_name}ngOnInit(){this.text=this.config.get_content("promote-students"),this.studentNoAssistantsEditByAssistants=this.config.get_error("student-no_assistants_edit_by_assistants"),this.activatedRoute.paramMap.subscribe(t=>{t.has("ParticipantName")?this.studentUrl=t.get("ParticipantName"):this.router.navigate([""])}),this.getProject(),this.getStudent(),this.subscriptions.push(this.projectsService.update.subscribe(()=>{this.getProject(),this.getStudent()}),this.studentsService.update.subscribe(()=>{this.getProject(),this.getStudent()}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}getProject(){this.projectsService.getSelfLeadedProject("students").subscribe(t=>{this.leadedProject=t.data})}getStudent(){this.studentsService.getSelfStudent().subscribe(t=>{this.loadedStudent=t.data})}promoteStudent(t){this.studentsService.getStudentID(this.declaredAssistant).subscribe(e=>{0!==e.id?(this.studentsService.promoteStudent(e.id),t.reset()):this.alertCtrl.create({header:"Fehler",message:"Der angegebene Sch\xfcler konnte nicht gefunden werden!",buttons:[{text:"Ok",role:"cancel"}]}).then(t=>{t.present()})})}suspendStudent(t){this.studentsService.suspendStudent(t)}quitAssistent(){this.studentsService.quitAssistant().subscribe(t=>{this.alert.alert(t.message),this.router.navigate([this.eventName+"/Sch\xfcler/"+this.studentUrl]),this.studentsService.update.emit()},t=>{this.alert.error("K\xfcndigung als Assistent fehlgeschlagen!",t.error)})}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(o.a),c.Jb(o.g),c.Jb(r.a),c.Jb(d.a),c.Jb(b.a),c.Jb(a.a),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-promote-students"]],decls:8,vars:3,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["color","background",4,"ngIf"],["color","text"],["name","ParticipantForm",3,"ngSubmit"],["promoteStudentForm","ngForm"],["color","items"],["required","","color","text","type","text","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["required","","color","text","type","text","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["required","","name","ParticipantGrade","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","color","buttons","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","items","lines","none"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"],["color","items","lines","none",4,"ngFor","ngForOf"],["name","star-half"],[3,"click",4,"ngIf"],[3,"click"],["color","danger","name","arrow-down"],["color","buttons","expand","block",1,"ion-no-margin",3,"click"]],template:function(t,e){1&t&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-button",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.pc(5,"Assistenten verwalten"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content",3),c.oc(7,S,9,5,"ion-card",4),c.Lb()),2&t&&(c.yb(3),c.dc("defaultHref","",e.eventName,"/Sch\xfcler/",e.studentUrl,""),c.yb(4),c.bc("ngIf",2===e.loadedStudent.role))},directives:[a.t,a.R,a.h,a.e,a.f,a.P,a.p,i.j,a.j,a.l,a.n,a.k,a.A,s.k,s.g,s.h,a.x,a.w,a.ab,s.j,s.f,s.i,a.I,a.Z,a.J,a.D,a.C,a.X,a.N,a.z,a.y,i.i,a.u,a.i],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[i.b,s.a,a.S,o.k.forChild(v)]]}),t})()}}]);