!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{HFXa:function(i,t,o){"use strict";o.r(t),o.d(t,"AdminLogsPageModule",function(){return S});var a=o("ofXK"),r=o("3Pt+"),c=o("tyNb"),l=o("TEn/"),s=o("fXoL"),b=o("OeS+"),u=o("uVPj"),d=o("3LUQ"),g=o("r4Kj");function m(n,e){if(1&n&&(s.Mb(0,"ion-card-content"),s.Mb(1,"ion-label",14),s.pc(2),s.Lb(),s.Lb()),2&n){var i=s.Wb();s.yb(2),s.rc(" ",i.text," ")}}function p(n,e){if(1&n){var i=s.Nb();s.Mb(0,"ion-item",16),s.Mb(1,"ion-card",3),s.Mb(2,"ion-card-content"),s.Mb(3,"ion-text",14),s.pc(4),s.Lb(),s.Lb(),s.Lb(),s.Mb(5,"ion-buttons",17),s.Ub("click",function(){s.lc(i);var n=e.$implicit;return s.Wb(2).deleteSignUpEmail(n.id)}),s.Kb(6,"ion-icon",18),s.Lb(),s.Lb()}if(2&n){var t=e.$implicit;s.yb(4),s.qc(t.email)}}function f(n,e){if(1&n&&(s.Mb(0,"ion-card-content"),s.oc(1,p,7,1,"ion-item",15),s.Lb()),2&n){var i=s.Wb();s.yb(1),s.bc("ngForOf",i.SignUpEmails)}}var h,M,v=[{path:"",component:(h=function(){function i(e,t,o,a,r,c){n(this,i),this.activatedRoute=e,this.scheduleService=t,this.adminsService=o,this.alertCtrl=a,this.alert=r,this.config=c,this.subscriptions=[],this.SignUpEmails=[],this.SignUpEmail={id:0,email:"",email_confirmation:""},this.schedule={id:1,begin:null,control:null,registration:null,sort_students:null,exchange:null,projects:null,end:null},this.eventName=this.config.app_config.event_name}var t,o,r;return t=i,(o=[{key:"ngOnInit",value:function(){var n=this;this.text=this.config.get_content("admin-logs"),this.currentDate=Object(a.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(function(e){n.adminUrl=e.get("AdminName")}),this.getSchedule(),this.getSignUpemails(),this.subscriptions.push(this.scheduleService.update.subscribe(function(){return n.getSchedule()}),this.adminsService.update.subscribe(function(){return n.getSignUpemails()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(n){return n.unsubscribe()})}},{key:"getSchedule",value:function(){var n=this;this.scheduleService.getSchedule().subscribe(function(e){n.schedule=e.data})}},{key:"getSignUpemails",value:function(){var n=this;this.adminsService.getAllSignUpEmails().subscribe(function(e){n.SignUpEmails=e.data})}},{key:"postSignUpEmail",value:function(n){var e=this;this.adminsService.createSignUpEmail(this.SignUpEmail).subscribe(function(i){e.SignUpEmails.push(i.data),e.alert.alert(i.message),n.reset(),e.adminsService.update.emit()},function(n){e.alert.error("Freigeben der E-Mail fehlgeschlagen!",n.error)})}},{key:"deleteSignUpEmail",value:function(n){var e=this;this.alertCtrl.create({header:"Sind sie sicher?",message:"Wollen sie diese E-Mail wirklich sperren?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Sperren",handler:function(){e.SignUpEmail.email===e.SignUpEmail.email_confirmation?(e.SignUpEmails=e.SignUpEmails.filter(function(e){return n!==e.id}),e.adminsService.deleteSignUpEmail(n)):e.alert.error("Die angegebenen E-Mails stimmen nicht \xfcberein.")}}]}).then(function(n){n.present()})}}])&&e(t.prototype,o),r&&e(t,r),i}(),h.\u0275fac=function(n){return new(n||h)(s.Jb(c.a),s.Jb(b.a),s.Jb(u.a),s.Jb(l.a),s.Jb(d.a),s.Jb(g.a))},h.\u0275cmp=s.Db({type:h,selectors:[["app-admin-logs"]],decls:26,vars:7,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["name","SignUpEmailForm",1,"content",3,"ngSubmit"],["signUpEmail","ngForm"],["color","background","color","background"],["color","items"],["color","text","name","Email","placeholder","E-Mail","required","","type","email",3,"ngModel","ngModelChange"],["color","text","name","Email","placeholder","E-Mail-Best\xe4tigung","required","","type","email",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","text"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],[3,"click"],["color","danger","name","close"]],template:function(n,e){if(1&n){var i=s.Nb();s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar",0),s.Mb(2,"ion-button",1),s.Kb(3,"ion-back-button",2),s.Lb(),s.Mb(4,"ion-title"),s.pc(5,"Appverwaltung"),s.Lb(),s.Lb(),s.Lb(),s.Mb(6,"ion-content",3),s.Mb(7,"ion-card",4),s.Mb(8,"ion-card-header"),s.Mb(9,"ion-card-title"),s.pc(10,"E-Mails f\xfcr Admin-Accounts verwalten"),s.Lb(),s.Lb(),s.oc(11,m,3,1,"ion-card-content",5),s.oc(12,f,2,1,"ion-card-content",5),s.Mb(13,"ion-card-content"),s.Mb(14,"form",6,7),s.Ub("ngSubmit",function(){s.lc(i);var n=s.jc(15);return e.postSignUpEmail(n)}),s.Mb(16,"ion-card",8),s.Mb(17,"ion-card-content"),s.Mb(18,"ion-list"),s.Mb(19,"ion-item",9),s.Mb(20,"ion-input",10),s.Ub("ngModelChange",function(n){return e.SignUpEmail.email=n}),s.Lb(),s.Lb(),s.Mb(21,"ion-item",9),s.Mb(22,"ion-input",11),s.Ub("ngModelChange",function(n){return e.SignUpEmail.email_confirmation=n}),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"div",12),s.Mb(24,"ion-button",13),s.pc(25,"Freigeben"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&n){var t=s.jc(15);s.yb(3),s.dc("defaultHref","",e.eventName,"/Admin/",e.adminUrl,""),s.yb(8),s.bc("ngIf",e.text),s.yb(1),s.bc("ngIf",e.SignUpEmails.length),s.yb(8),s.bc("ngModel",e.SignUpEmail.email),s.yb(2),s.bc("ngModel",e.SignUpEmail.email_confirmation),s.yb(2),s.bc("disabled",t.invalid||e.currentDate<=e.schedule.begin&&e.currentDate>e.schedule.sort_students)}},directives:[l.t,l.R,l.h,l.e,l.f,l.P,l.p,l.j,l.l,l.n,a.j,l.k,r.k,r.g,r.h,l.B,l.x,l.w,l.ab,r.j,r.f,r.i,l.A,a.i,l.N,l.i,l.u],styles:["ion-col[_ngcontent-%COMP%]{height:80px}"]}),h)}],S=((M=function e(){n(this,e)}).\u0275mod=s.Hb({type:M}),M.\u0275inj=s.Gb({factory:function(n){return new(n||M)},imports:[[a.b,r.a,l.S,c.k.forChild(v)]]}),M)}}])}();