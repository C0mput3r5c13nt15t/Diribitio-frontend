(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"p+Yt":function(e,t,n){"use strict";n.r(t),n.d(t,"ExchangeConfirmPageModule",function(){return m});var r=n("ofXK"),i=n("3Pt+"),c=n("tyNb"),s=n("TEn/"),o=n("mrSG"),a=n("fXoL"),b=n("hQbD"),d=n("CoJz"),h=n("r4Kj"),l=n("3LUQ");function u(e,t){if(1&e){const e=a.Nb();a.Mb(0,"ion-item",8),a.Mb(1,"ion-button",9),a.Ub("click",function(){a.lc(e);const n=t.$implicit;return a.Wb(2).confirm(n.id)}),a.Kb(2,"ion-icon",10),a.Lb(),a.pc(3),a.Lb()}if(2&e){const e=t.$implicit;a.yb(3),a.vc(" ",e.sender.first_name," ",e.sender.last_name," ",e.sender.grade,"",e.sender.letter," aus ",e.sender.project_title," ")}}function g(e,t){if(1&e&&(a.Mb(0,"ion-card",5),a.Mb(1,"ion-card-header",3),a.Mb(2,"ion-card-title"),a.pc(3,"Tauschanfragen annehmen"),a.Lb(),a.Lb(),a.Mb(4,"ion-card-content"),a.Mb(5,"ion-label",6),a.pc(6),a.Lb(),a.Lb(),a.Mb(7,"ion-card-content"),a.Mb(8,"ion-list"),a.oc(9,u,4,5,"ion-item",7),a.Lb(),a.Lb(),a.Lb()),2&e){const e=a.Wb();a.yb(6),a.rc(" ",e.content," "),a.yb(3),a.bc("ngForOf",e.loadedStudent.exchange_requests)}}function f(e,t){if(1&e&&(a.Mb(0,"ion-card",5),a.Mb(1,"ion-card-content"),a.Mb(2,"label",11),a.pc(3),a.Lb(),a.Lb(),a.Lb()),2&e){const e=a.Wb();a.yb(3),a.qc(e.studentAlreadyExchangeError)}}const p=[{path:"",component:(()=>{class e{constructor(e,t,n,r,i,c,s){this.router=e,this.activatedRoute=t,this.exchangesService=n,this.projectsService=r,this.alertCtrl=i,this.config=c,this.alert=s,this.subscriptions=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.eventName=this.config.app_config.event_name}ngOnInit(){this.content=this.config.get_content("user-exchange-confirm"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.currentDate=Object(r.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(e=>{e.has("ParticipantName")?this.studentUrl=e.get("ParticipantName"):this.router.navigate([""])}),this.getExchanges(),this.subscriptions.push(this.exchangesService.update.subscribe(()=>this.getExchanges()))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getExchanges(){this.exchangesService.getAllExchangesForParticipant().subscribe(e=>{this.loadedStudent.exchange_requests=e.data,this.loadedStudent.exchange_requests.forEach(e=>{this.projectsService.getLittleProject(e.sender.project_id).subscribe(t=>{e.sender.project_title=t.data.title})})})}confirm(e){this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich tauschen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Ja",handler:()=>Object(o.a)(this,void 0,void 0,function*(){this.exchangesService.confirmExchange(e).subscribe(e=>{this.alert.alert(e.message),this.router.navigate([this.eventName+"/Sch\xfcler/"+this.studentUrl]),this.exchangesService.update.emit()},e=>{this.alert.error("Best\xe4tigung des Tausches fehlgeschlagen!",e.error)})})}]}).then(e=>{e.present()})}}return e.\u0275fac=function(t){return new(t||e)(a.Jb(c.g),a.Jb(c.a),a.Jb(b.a),a.Jb(d.a),a.Jb(s.a),a.Jb(h.a),a.Jb(l.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-exchange-confirm"]],decls:9,vars:4,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],["color","text"],["color","items",4,"ngFor","ngForOf"],["color","items"],["color","buttons","slot","start",3,"click"],["name","checkmark"],["color","danger"]],template:function(e,t){1&e&&(a.Mb(0,"ion-header"),a.Mb(1,"ion-toolbar",0),a.Mb(2,"ion-button",1),a.Kb(3,"ion-back-button",2),a.Lb(),a.Mb(4,"ion-title"),a.pc(5,"Tauschanfrage best\xe4tigen"),a.Lb(),a.Lb(),a.Lb(),a.Mb(6,"ion-content",3),a.oc(7,g,10,2,"ion-card",4),a.oc(8,f,4,1,"ion-card",4),a.Lb()),2&e&&(a.yb(3),a.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),a.yb(4),a.bc("ngIf",0==t.loadedStudent.exchange_id),a.yb(1),a.bc("ngIf",0!=t.loadedStudent.exchange_id))},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.p,r.j,s.j,s.l,s.n,s.k,s.A,s.B,r.i,s.x,s.u],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({factory:function(t){return new(t||e)},imports:[[r.b,i.a,s.S,c.k.forChild(p)]]}),e})()}}]);