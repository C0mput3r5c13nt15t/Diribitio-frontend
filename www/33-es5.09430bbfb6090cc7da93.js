!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"p+Yt":function(n,r,i){"use strict";i.r(r),i.d(r,"ExchangeConfirmPageModule",function(){return _});var c=i("ofXK"),a=i("3Pt+"),o=i("tyNb"),s=i("TEn/"),u=i("mrSG"),b=i("fXoL"),d=i("hQbD"),l=i("CoJz"),h=i("r4Kj"),f=i("3LUQ");function g(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-item",8),b.Mb(1,"ion-button",9),b.Ub("click",function(){b.lc(n);var e=t.$implicit;return b.Wb(2).confirm(e.id)}),b.Kb(2,"ion-icon",10),b.Lb(),b.pc(3),b.Lb()}if(2&e){var r=t.$implicit;b.yb(3),b.vc(" ",r.sender.first_name," ",r.sender.last_name," ",r.sender.grade,"",r.sender.letter," aus ",r.sender.project_title," ")}}function p(e,t){if(1&e&&(b.Mb(0,"ion-card",5),b.Mb(1,"ion-card-header",3),b.Mb(2,"ion-card-title"),b.pc(3,"Tauschanfragen annehmen"),b.Lb(),b.Lb(),b.Mb(4,"ion-card-content"),b.Mb(5,"ion-label",6),b.pc(6),b.Lb(),b.Lb(),b.Mb(7,"ion-card-content"),b.Mb(8,"ion-list"),b.oc(9,g,4,5,"ion-item",7),b.Lb(),b.Lb(),b.Lb()),2&e){var n=b.Wb();b.yb(6),b.rc(" ",n.content," "),b.yb(3),b.bc("ngForOf",n.loadedStudent.exchange_requests)}}function m(e,t){if(1&e&&(b.Mb(0,"ion-card",5),b.Mb(1,"ion-card-content"),b.Mb(2,"label",11),b.pc(3),b.Lb(),b.Lb(),b.Lb()),2&e){var n=b.Wb();b.yb(3),b.qc(n.studentAlreadyExchangeError)}}var v,x,y=[{path:"",component:(v=function(){function n(t,r,i,c,a,o,s){e(this,n),this.router=t,this.activatedRoute=r,this.exchangesService=i,this.projectsService=c,this.alertCtrl=a,this.config=o,this.alert=s,this.subscriptions=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.eventName=this.config.app_config.event_name}var r,i,a;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.content=this.config.get_content("student-exchange-confirm"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.currentDate=Object(c.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(function(t){t.has("ParticipantName")?e.studentUrl=t.get("ParticipantName"):e.router.navigate([""])}),this.getExchanges(),this.subscriptions.push(this.exchangesService.update.subscribe(function(){return e.getExchanges()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getExchanges",value:function(){var e=this;this.exchangesService.getAllExchangesForParticipant().subscribe(function(t){e.loadedStudent.exchange_requests=t.data,e.loadedStudent.exchange_requests.forEach(function(t){e.projectsService.getLittleProject(t.sender.project_id).subscribe(function(e){t.sender.project_title=e.data.title})})})}},{key:"confirm",value:function(e){var t=this;this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich tauschen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Ja",handler:function(){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.exchangesService.confirmExchange(e).subscribe(function(e){n.alert.alert(e.message),n.router.navigate([n.eventName+"/Sch\xfcler/"+n.studentUrl]),n.exchangesService.update.emit()},function(e){n.alert.error("Best\xe4tigung des Tausches fehlgeschlagen!",e.error)});case 1:case"end":return t.stop()}},t,this)}))}}]}).then(function(e){e.present()})}}])&&t(r.prototype,i),a&&t(r,a),n}(),v.\u0275fac=function(e){return new(e||v)(b.Jb(o.g),b.Jb(o.a),b.Jb(d.a),b.Jb(l.a),b.Jb(s.a),b.Jb(h.a),b.Jb(f.a))},v.\u0275cmp=b.Db({type:v,selectors:[["app-exchange-confirm"]],decls:9,vars:4,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],["color","text"],["color","items",4,"ngFor","ngForOf"],["color","items"],["color","buttons","slot","start",3,"click"],["name","checkmark"],["color","danger"]],template:function(e,t){1&e&&(b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",0),b.Mb(2,"ion-button",1),b.Kb(3,"ion-back-button",2),b.Lb(),b.Mb(4,"ion-title"),b.pc(5,"Tauschanfrage best\xe4tigen"),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",3),b.oc(7,p,10,2,"ion-card",4),b.oc(8,m,4,1,"ion-card",4),b.Lb()),2&e&&(b.yb(3),b.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),b.yb(4),b.bc("ngIf",0==t.loadedStudent.exchange_id),b.yb(1),b.bc("ngIf",0!=t.loadedStudent.exchange_id))},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.p,c.j,s.j,s.l,s.n,s.k,s.A,s.B,c.i,s.x,s.u],styles:[""]}),v)}],_=((x=function t(){e(this,t)}).\u0275mod=b.Hb({type:x}),x.\u0275inj=b.Gb({factory:function(e){return new(e||x)},imports:[[c.b,a.a,s.S,o.k.forChild(y)]]}),x)}}])}();