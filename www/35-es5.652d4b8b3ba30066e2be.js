!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[35,13,49],{uXsc:function(t,a,r){"use strict";r.r(a),r.d(a,"ExchangeRequestPageModule",(function(){return w}));var i=r("ofXK"),o=r("3Pt+"),s=r("tyNb"),c=r("TEn/"),u=r("fXoL"),l=r("uwJC"),d=r("SfEx"),h=r("YdJ5"),b=r("wxHw");function g(e,t){if(1&e&&(u.Lb(0,"ion-card-content"),u.Lb(1,"ion-label",18),u.oc(2),u.Kb(),u.Kb()),2&e){var n=u.Vb(2);u.xb(2),u.qc(" ",n.text," ")}}function f(e,t){1&e&&(u.Lb(0,"ion-title"),u.oc(1,"Dein Freund "),u.Kb())}function p(e,t){if(1&e&&(u.Lb(0,"ion-title"),u.oc(1),u.Kb()),2&e){var n=u.Vb(2);u.xb(1),u.tc(" ",n.exchangePartner.first_name," ",n.exchangePartner.last_name," ",n.exchangePartner.grade,"",n.exchangePartner.letter," ")}}function m(e,t){if(1&e){var n=u.Mb();u.Lb(0,"ion-card",7),u.Lb(1,"ion-card-header",5),u.Lb(2,"ion-card-title"),u.oc(3,"Tauschanfragen senden"),u.Kb(),u.Kb(),u.nc(4,g,3,1,"ion-card-content",8),u.Lb(5,"ion-card-content"),u.Lb(6,"form",9,10),u.Tb("ngSubmit",(function(){return u.kc(n),u.Vb().submit()})),u.Lb(8,"ion-list"),u.Lb(9,"ion-item-divider",5),u.Lb(10,"ion-card-title"),u.oc(11,"Du"),u.Kb(),u.Kb(),u.Lb(12,"ion-item",11),u.Lb(13,"ion-input",12),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().loadedStudent.first_name=e})),u.Kb(),u.Kb(),u.Lb(14,"ion-item",11),u.Lb(15,"ion-input",13),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().loadedStudent.last_name=e})),u.Kb(),u.Kb(),u.Lb(16,"ion-item",11),u.Lb(17,"ion-input",14),u.oc(18),u.Kb(),u.Kb(),u.Lb(19,"ion-item-divider",5),u.nc(20,f,2,0,"ion-title",8),u.nc(21,p,2,4,"ion-title",8),u.Kb(),u.Lb(22,"ion-item",15),u.Lb(23,"ion-input",16),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().exchangePartner.first_name=e})),u.Kb(),u.Kb(),u.Lb(24,"ion-item",15),u.Lb(25,"ion-input",17),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().exchangePartner.last_name=e})),u.Kb(),u.Kb(),u.Lb(26,"ion-item",15),u.Lb(27,"ion-label",18),u.oc(28,"Klassenstufe"),u.Kb(),u.Lb(29,"ion-select",19),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().exchangePartner.grade=e})),u.Lb(30,"ion-select-option",20),u.oc(31,"5"),u.Kb(),u.Lb(32,"ion-select-option",21),u.oc(33,"6"),u.Kb(),u.Lb(34,"ion-select-option",22),u.oc(35,"7"),u.Kb(),u.Lb(36,"ion-select-option",23),u.oc(37,"8"),u.Kb(),u.Lb(38,"ion-select-option",24),u.oc(39,"9"),u.Kb(),u.Lb(40,"ion-select-option",25),u.oc(41,"10"),u.Kb(),u.Lb(42,"ion-select-option",26),u.oc(43,"11"),u.Kb(),u.Kb(),u.Kb(),u.Lb(44,"ion-item",15),u.Lb(45,"ion-radio-group",27),u.Tb("ngModelChange",(function(e){return u.kc(n),u.Vb().exchangePartner.letter=e})),u.Lb(46,"ion-item",11),u.Lb(47,"ion-label",18),u.oc(48,"A "),u.Kb(),u.Jb(49,"ion-radio",28),u.Kb(),u.Lb(50,"ion-item",11),u.Lb(51,"ion-label",18),u.oc(52,"B "),u.Kb(),u.Jb(53,"ion-radio",29),u.Kb(),u.Lb(54,"ion-item",11),u.Lb(55,"ion-label",18),u.oc(56,"C "),u.Kb(),u.Jb(57,"ion-radio",30),u.Kb(),u.Lb(58,"ion-item",11),u.Lb(59,"ion-label",18),u.oc(60,"D "),u.Kb(),u.Jb(61,"ion-radio",31),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Lb(62,"div",32),u.Lb(63,"ion-button",33),u.oc(64,"Tauschanfrage senden"),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb()}if(2&e){var a=u.ic(7),r=u.Vb();u.xb(4),u.ac("ngIf",r.text),u.xb(9),u.ac("ngModel",r.loadedStudent.first_name),u.xb(2),u.ac("ngModel",r.loadedStudent.last_name),u.xb(3),u.rc("",r.loadedStudent.grade,"",r.loadedStudent.letter,""),u.xb(2),u.ac("ngIf",0===r.exchangePartner.id),u.xb(1),u.ac("ngIf",0!=r.exchangePartner.id),u.xb(2),u.ac("ngModel",r.exchangePartner.first_name),u.xb(2),u.ac("ngModel",r.exchangePartner.last_name),u.xb(4),u.ac("selectedText",r.exchangePartner.grade)("ngModel",r.exchangePartner.grade),u.xb(16),u.ac("ngModel",r.exchangePartner.letter),u.xb(18),u.ac("disabled",a.invalid)}}function v(e,t){if(1&e&&(u.Lb(0,"ion-card",7),u.Lb(1,"ion-card-content"),u.Lb(2,"ion-text",34),u.oc(3),u.Kb(),u.Kb(),u.Kb()),2&e){var n=u.Vb();u.xb(3),u.pc(n.studentAlreadyExchangeError)}}var x,k,L=[{path:"",component:(x=function(){function t(n,a,r,i,o,s,c){e(this,t),this.activatedRoute=n,this.router=a,this.studentsService=r,this.exchangesService=i,this.alertCtrl=o,this.alert=s,this.config=c,this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.exchangePartner={first_name:"",last_name:"",grade:0,letter:""},this.eventName=this.config.app_config.event_name}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.text=this.config.get_content("user-exchange-request"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.activatedRoute.paramMap.subscribe((function(t){t.has("ParticipantName")?e.studentUrl=t.get("ParticipantName"):e.router.navigate([""])})),this.getStudent()}},{key:"getStudent",value:function(){var e=this;this.studentsService.getSelfStudent().subscribe((function(t){e.loadedStudent=t.data}))}},{key:"submit",value:function(){var e=this;this.studentsService.getStudentID(this.exchangePartner).subscribe((function(t){0!=t.id&&0==e.loadedStudent.exchange_id?e.exchangesService.createExchange(t.id).subscribe((function(t){e.alert.alert(t.message),e.router.navigate([e.eventName+"/Sch\xfcler/"+e.studentUrl]),e.exchangesService.update.emit()}),(function(t){e.alert.error("Erstellung des Tausches fehlgeschlagen!",t.error)})):e.alertCtrl.create({header:"Fehler",message:"Du must zuerst einen validen Tauschpartner ausw\xe4hlen!",buttons:[{text:"Ok",role:"cancel"}]}).then((function(e){e.present()}))}))}},{key:"delete",value:function(){var e=this;this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich deine Tauschanfrage l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:function(){e.exchangesService.deleteSelfExchange().subscribe((function(t){e.alert.alert(t.message),e.router.navigate([e.eventName+"/Sch\xfcler/"+e.studentUrl]),e.exchangesService.update.emit()}),(function(t){e.alert.error("L\xf6schung der Tauschanfrage fehlgeschlagen!",t.error)}))}}]}).then((function(e){e.present()}))}}]),t}(),x.\u0275fac=function(e){return new(e||x)(u.Ib(s.a),u.Ib(s.g),u.Ib(l.a),u.Ib(d.a),u.Ib(c.a),u.Ib(h.a),u.Ib(b.a))},x.\u0275cmp=u.Cb({type:x,selectors:[["app-exchange-request"]],decls:11,vars:5,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","slot","end","color","danger",3,"disabled","click"],["name","trash"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["name","ExchangeForm",3,"ngSubmit"],["form","ngForm"],["color","items","lines","none"],["color","text","readonly","","name","ExchangeFirstFirstName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstLastName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstGradeAndClass"],["color","items"],["color","text","type","text","required","","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","required","","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"]],template:function(e,t){1&e&&(u.Lb(0,"ion-header"),u.Lb(1,"ion-toolbar",0),u.Lb(2,"ion-button",1),u.Jb(3,"ion-back-button",2),u.Kb(),u.Lb(4,"ion-title"),u.oc(5,"Tausch anfragen"),u.Kb(),u.Lb(6,"ion-button",3),u.Tb("click",(function(){return t.delete()})),u.Jb(7,"ion-icon",4),u.Kb(),u.Kb(),u.Kb(),u.Lb(8,"ion-content",5),u.nc(9,m,65,13,"ion-card",6),u.nc(10,v,4,1,"ion-card",6),u.Kb()),2&e&&(u.xb(3),u.cc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),u.xb(3),u.ac("disabled",0==t.loadedStudent.exchange_id),u.xb(3),u.ac("ngIf",0==t.loadedStudent.exchange_id),u.xb(1),u.ac("ngIf",0!=t.loadedStudent.exchange_id))},directives:[c.t,c.R,c.h,c.e,c.f,c.P,c.u,c.p,i.j,c.j,c.l,c.n,c.k,o.k,o.g,o.h,c.B,c.y,c.x,c.w,c.ab,o.f,o.i,o.j,c.A,c.I,c.Z,c.J,c.D,c.C,c.X,c.N],styles:[""]}),x)}],w=((k=function t(){e(this,t)}).\u0275mod=u.Gb({type:k}),k.\u0275inj=u.Fb({factory:function(e){return new(e||k)},imports:[[i.b,o.a,c.S,s.k.forChild(L)]]}),k)},uwJC:function(t,a,r){"use strict";r.d(a,"a",(function(){return d}));var i=r("fXoL"),o=r("tk/3"),s=r("18Le"),c=r("YdJ5"),u=r("wxHw"),l=r("tyNb"),d=function(){var t=function(){function t(n,a,r,o,s){e(this,t),this.http=n,this.auth=a,this.alert=r,this.config=o,this.router=s,this.update=new i.n,this.backendUrl=this.config.backend_config.url,this.eventName=this.config.app_config.event_name}return n(t,[{key:"signUpStudent",value:function(e,t){var n=this,a=new o.c({"Content-Type":"application/json"});this.http.post(this.backendUrl+"students/register",e,{headers:a}).subscribe((function(e){e.token&&(n.auth.set_jwt(e.token),n.auth.setLoggedIn(!0),n.router.navigate([n.eventName+"/Anmeldung"])),n.alert.alert("Dein Account wurde erfolgreich erstellt!"),n.sendAuthentificationEmail(),n.update.emit(),t.reset()}),(function(e){n.alert.error("Erstellung des Accounts fehlgeschlagen!",e.error)}))}},{key:"sendAuthentificationEmail",value:function(){var e=this,t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"students/email/resend",null,{headers:t}).subscribe((function(t){e.alert.alert(t.message)}),(function(t){e.alert.error("Versandt der Verifizierungs E-Mail fehlgeschlagen!",t.error)}))}},{key:"sendAuthentificationEmailSubscribe",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/email/resend",null,{headers:e})}},{key:"logInStudent",value:function(e){var t=new o.c({"Content-Type":"application/json"});return this.http.post(this.backendUrl+"students/login",e,{headers:t})}},{key:"logOutStudent",value:function(){var e=this,t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/logout",null,{headers:t}).subscribe((function(t){e.alert.alert(t.message),e.auth.setLoggedIn(!1),e.router.navigate([e.eventName+"/Anmeldung"])}),(function(t){e.alert.error("Logout fehlgeschlagen!",t.error)}))}},{key:"getSelfStudent",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/self",{headers:e})}},{key:"getStudentID",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/id",e,{headers:t})}},{key:"getAllStudentNames",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/little_index_students",{headers:e})}},{key:"getAllStudents",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/index_students?page="+e,{headers:t})}},{key:"getAllSearchedStudents",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"admins/search_index_students",{search_value:e},{headers:t})}},{key:"getFriends",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/friends",{headers:e})}},{key:"promoteStudent",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/promote_student/"+e,null,{headers:n}).subscribe((function(e){t.alert.alert(e.message),t.update.emit()}),(function(e){t.alert.error("Ernennung des Assistenten fehlgeschlagen!",e.error)}))}},{key:"suspendStudent",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/suspend_student/"+e,null,{headers:n}).subscribe((function(e){t.alert.alert(e.message),t.update.emit()}),(function(e){t.alert.error("Suspendierung des Assistenten fehlgeschlagen!",e.error)}))}},{key:"quitAssistant",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.put(this.backendUrl+"students/quit_assistant",null,{headers:e})}},{key:"putSelfStudent",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/self_update",e,{headers:n}).subscribe((function(){t.alert.alert("Der Account wurde erfolgreich aktualisiert!"),t.update.emit()}),(function(e){t.alert.error("Aktualisierung des Accounts fehlgeschlagen!",e.error)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(s.a),i.Pb(c.a),i.Pb(u.a),i.Pb(l.g))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();