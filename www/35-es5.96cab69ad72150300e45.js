!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[35,10,48],{"4ARy":function(t,a,r){"use strict";r.d(a,"a",(function(){return d}));var i=r("fXoL"),o=r("tk/3"),s=r("18Le"),c=r("YdJ5"),l=r("wxHw"),u=r("tyNb"),d=function(){var t=function(){function t(n,a,r,o,s){e(this,t),this.http=n,this.auth=a,this.alert=r,this.config=o,this.router=s,this.update=new i.n,this.backendUrl=this.config.backend_config.url}return n(t,[{key:"signUpParticipant",value:function(e,t){var n=this,a=new o.c({"Content-Type":"application/json"});this.http.post(this.backendUrl+"students/register",e,{headers:a}).subscribe((function(e){e.token&&(n.auth.set_jwt(e.token),n.auth.setLoggedIn(!0),n.router.navigate(["Projekttage/Anmeldung"])),n.alert.alert("Dein Account wurde erfolgreich erstellt!"),n.sendAuthentificationEmail(),n.update.emit(),t.reset()}),(function(e){n.alert.error("Accounterstellung fehlgeschlagen!",e.error)}))}},{key:"sendAuthentificationEmail",value:function(){var e=this,t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"students/email/resend",null,{headers:t}).subscribe((function(t){e.alert.alert(t.message)}),(function(t){e.alert.error("Verifizierungs E-Mail konnte nicht versandt werden!",t.error)}))}},{key:"sendAuthentificationEmailSubscribe",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/email/resend",null,{headers:e})}},{key:"logInParticipant",value:function(e){var t=new o.c({"Content-Type":"application/json"});return this.http.post(this.backendUrl+"students/login",e,{headers:t})}},{key:"logOutParticipant",value:function(){var e=this,t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/logout",null,{headers:t}).subscribe((function(t){e.alert.alert(t.message),e.auth.setLoggedIn(!1),e.router.navigate(["Projekttage/Anmeldung"])}),(function(t){e.alert.error("Logout fehlgeschlagen!",t.error)}))}},{key:"getSelfParticipant",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/self",{headers:e})}},{key:"getParticipantID",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/id",e,{headers:t})}},{key:"getAllParticipantNames",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/little_index_students",{headers:e})}},{key:"getAllStudents",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/index_students?page="+e,{headers:t})}},{key:"getAllSearchedStudents",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"admins/search_index_students",{search_value:e},{headers:t})}},{key:"getFriends",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/friends",{headers:e})}},{key:"promoteStudent",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/promote_student/"+e,null,{headers:n}).subscribe((function(e){t.alert.alert(e.message),t.update.emit()}),(function(e){t.alert.error("Ernennung des Assistenten fehlgeschlagen!",e.error)}))}},{key:"suspendStudent",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/suspend_student/"+e,null,{headers:n}).subscribe((function(e){t.alert.alert(e.message),t.update.emit()}),(function(e){t.alert.error("Suspendierung des Assistenten fehlgeschlagen!",e.error)}))}},{key:"quitAssistant",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.put(this.backendUrl+"students/quit_assistant",null,{headers:e})}},{key:"putSelfParticipant",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/self_update",e,{headers:n}).subscribe((function(){t.alert.alert("Erfolgreich registriert!"),t.update.emit()}),(function(e){t.alert.error("Aktualisierung des Accounts fehlgeschlagen!",e.error)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(s.a),i.Pb(c.a),i.Pb(l.a),i.Pb(u.g))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},uXsc:function(t,a,r){"use strict";r.r(a),r.d(a,"ExchangeRequestPageModule",(function(){return y}));var i=r("ofXK"),o=r("3Pt+"),s=r("tyNb"),c=r("TEn/"),l=r("fXoL"),u=r("4ARy"),d=r("SfEx"),h=r("YdJ5"),b=r("wxHw");function g(e,t){if(1&e&&(l.Lb(0,"ion-card-content"),l.Lb(1,"ion-label",18),l.mc(2),l.Kb(),l.Kb()),2&e){var n=l.Vb(2);l.xb(2),l.oc(" ",n.text," ")}}function p(e,t){1&e&&(l.Lb(0,"ion-title"),l.mc(1,"Dein Freund "),l.Kb())}function f(e,t){if(1&e&&(l.Lb(0,"ion-title"),l.mc(1),l.Kb()),2&e){var n=l.Vb(2);l.xb(1),l.rc(" ",n.exchangePartner.first_name," ",n.exchangePartner.last_name," ",n.exchangePartner.grade,"",n.exchangePartner.letter," ")}}function m(e,t){if(1&e){var n=l.Mb();l.Lb(0,"ion-card",7),l.Lb(1,"ion-card-header",5),l.Lb(2,"ion-title"),l.mc(3,"Tauschanfragen senden"),l.Kb(),l.Kb(),l.lc(4,g,3,1,"ion-card-content",8),l.Lb(5,"ion-card-content"),l.Lb(6,"form",9,10),l.Tb("ngSubmit",(function(){return l.ic(n),l.Vb().submit()})),l.Lb(8,"ion-list"),l.Lb(9,"ion-item-divider",5),l.Lb(10,"ion-title"),l.mc(11,"Du"),l.Kb(),l.Kb(),l.Lb(12,"ion-item",11),l.Lb(13,"ion-input",12),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().loadedUser.first_name=e})),l.Kb(),l.Kb(),l.Lb(14,"ion-item",11),l.Lb(15,"ion-input",13),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().loadedUser.last_name=e})),l.Kb(),l.Kb(),l.Lb(16,"ion-item",11),l.Lb(17,"ion-input",14),l.mc(18),l.Kb(),l.Kb(),l.Lb(19,"ion-item-divider",5),l.lc(20,p,2,0,"ion-title",8),l.lc(21,f,2,4,"ion-title",8),l.Kb(),l.Lb(22,"ion-item",15),l.Lb(23,"ion-input",16),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().exchangePartner.first_name=e})),l.Kb(),l.Kb(),l.Lb(24,"ion-item",15),l.Lb(25,"ion-input",17),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().exchangePartner.last_name=e})),l.Kb(),l.Kb(),l.Lb(26,"ion-item",15),l.Lb(27,"ion-label",18),l.mc(28,"Klassenstufe"),l.Kb(),l.Lb(29,"ion-select",19),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().exchangePartner.grade=e})),l.Lb(30,"ion-select-option",20),l.mc(31,"5"),l.Kb(),l.Lb(32,"ion-select-option",21),l.mc(33,"6"),l.Kb(),l.Lb(34,"ion-select-option",22),l.mc(35,"7"),l.Kb(),l.Lb(36,"ion-select-option",23),l.mc(37,"8"),l.Kb(),l.Lb(38,"ion-select-option",24),l.mc(39,"9"),l.Kb(),l.Lb(40,"ion-select-option",25),l.mc(41,"10"),l.Kb(),l.Lb(42,"ion-select-option",26),l.mc(43,"11"),l.Kb(),l.Kb(),l.Kb(),l.Lb(44,"ion-item",15),l.Lb(45,"ion-radio-group",27),l.Tb("ngModelChange",(function(e){return l.ic(n),l.Vb().exchangePartner.letter=e})),l.Lb(46,"ion-item",11),l.Lb(47,"ion-label",18),l.mc(48,"A "),l.Kb(),l.Jb(49,"ion-radio",28),l.Kb(),l.Lb(50,"ion-item",11),l.Lb(51,"ion-label",18),l.mc(52,"B "),l.Kb(),l.Jb(53,"ion-radio",29),l.Kb(),l.Lb(54,"ion-item",11),l.Lb(55,"ion-label",18),l.mc(56,"C "),l.Kb(),l.Jb(57,"ion-radio",30),l.Kb(),l.Lb(58,"ion-item",11),l.Lb(59,"ion-label",18),l.mc(60,"D "),l.Kb(),l.Jb(61,"ion-radio",31),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(62,"div",32),l.Lb(63,"ion-button",33),l.mc(64,"Tauschanfrage senden"),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb()}if(2&e){var a=l.gc(7),r=l.Vb();l.xb(4),l.ac("ngIf",r.text),l.xb(9),l.ac("ngModel",r.loadedUser.first_name),l.xb(2),l.ac("ngModel",r.loadedUser.last_name),l.xb(3),l.pc("",r.loadedUser.grade,"",r.loadedUser.letter,""),l.xb(2),l.ac("ngIf",0===r.exchangePartner.id),l.xb(1),l.ac("ngIf",0!=r.exchangePartner.id),l.xb(2),l.ac("ngModel",r.exchangePartner.first_name),l.xb(2),l.ac("ngModel",r.exchangePartner.last_name),l.xb(4),l.ac("selectedText",r.exchangePartner.grade)("ngModel",r.exchangePartner.grade),l.xb(16),l.ac("ngModel",r.exchangePartner.letter),l.xb(18),l.ac("disabled",a.invalid)}}function x(e,t){if(1&e&&(l.Lb(0,"ion-card",7),l.Lb(1,"ion-card-content"),l.Lb(2,"ion-text",34),l.mc(3),l.Kb(),l.Kb(),l.Kb()),2&e){var n=l.Vb();l.xb(3),l.nc(n.studentAlreadyExchangeError)}}var v,L,k=[{path:"",component:(v=function(){function t(n,a,r,i,o,s,c){e(this,t),this.activatedRoute=n,this.router=a,this.participantsService=r,this.exchangesService=i,this.alertCtrl=o,this.alert=s,this.config=c,this.loadedUser={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.exchangePartner={first_name:"",last_name:"",grade:0,letter:""}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.text=this.config.get_content("user-exchange-request"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.activatedRoute.paramMap.subscribe((function(t){t.has("ParticipantName")?e.participantUrl=t.get("ParticipantName"):e.router.navigate([""])})),this.getStudent()}},{key:"getStudent",value:function(){var e=this;this.participantsService.getSelfParticipant().subscribe((function(t){e.loadedUser=t.data}))}},{key:"submit",value:function(){var e=this;this.participantsService.getParticipantID(this.exchangePartner).subscribe((function(t){0!=t.id&&0==e.loadedUser.exchange_id?e.exchangesService.createExchange(t.id).subscribe((function(t){e.alert.alert(t.message),e.router.navigate(["Projekttage/Benutzer/"+e.participantUrl]),e.exchangesService.update.emit()}),(function(t){e.alert.error("Erstellung des Tausches fehlgeschlagen!",t.error)})):e.alertCtrl.create({header:"Fehler",message:"Du must zuerst einen validen Tauschpartner ausw\xe4hlen!",buttons:[{text:"Ok",role:"cancel"}]}).then((function(e){e.present()}))}))}},{key:"delete",value:function(){var e=this;this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich deine Tauschanfrage l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:function(){e.exchangesService.deleteSelfExchange().subscribe((function(t){e.alert.alert(t.message),e.router.navigate(["Projekttage/Benutzer/"+e.participantUrl]),e.exchangesService.update.emit()}),(function(t){e.alert.error("L\xf6schung der Tauschanfrage fehlgeschlagen!",t.error)}))}}]}).then((function(e){e.present()}))}}]),t}(),v.\u0275fac=function(e){return new(e||v)(l.Ib(s.a),l.Ib(s.g),l.Ib(u.a),l.Ib(d.a),l.Ib(c.a),l.Ib(h.a),l.Ib(b.a))},v.\u0275cmp=l.Cb({type:v,selectors:[["app-exchange-request"]],decls:11,vars:4,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","slot","end","color","danger",3,"disabled","click"],["name","trash"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["name","ExchangeForm",3,"ngSubmit"],["form","ngForm"],["color","items","lines","none"],["color","text","readonly","","name","ExchangeFirstFirstName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstLastName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstGradeAndClass"],["color","items"],["color","text","type","text","required","","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","required","","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"]],template:function(e,t){1&e&&(l.Lb(0,"ion-header"),l.Lb(1,"ion-toolbar",0),l.Lb(2,"ion-button",1),l.Jb(3,"ion-back-button",2),l.Kb(),l.Lb(4,"ion-title"),l.mc(5,"Tausch anfragen"),l.Kb(),l.Lb(6,"ion-button",3),l.Tb("click",(function(){return t.delete()})),l.Jb(7,"ion-icon",4),l.Kb(),l.Kb(),l.Kb(),l.Lb(8,"ion-content",5),l.lc(9,m,65,13,"ion-card",6),l.lc(10,x,4,1,"ion-card",6),l.Kb()),2&e&&(l.xb(3),l.bc("defaultHref","Projekttage/Benutzer/",t.participantUrl,""),l.xb(3),l.ac("disabled",0==t.loadedUser.exchange_id),l.xb(3),l.ac("ngIf",0==t.loadedUser.exchange_id),l.xb(1),l.ac("ngIf",0!=t.loadedUser.exchange_id))},directives:[c.t,c.R,c.h,c.e,c.f,c.P,c.u,c.p,i.j,c.j,c.l,c.k,o.k,o.g,o.h,c.B,c.y,c.x,c.w,c.ab,o.f,o.i,o.j,c.A,c.I,c.Z,c.J,c.D,c.C,c.X,c.N],styles:[""]}),v)}],y=((L=function t(){e(this,t)}).\u0275mod=l.Gb({type:L}),L.\u0275inj=l.Fb({factory:function(e){return new(e||L)},imports:[[i.b,o.a,c.S,s.k.forChild(k)]]}),L)}}])}();