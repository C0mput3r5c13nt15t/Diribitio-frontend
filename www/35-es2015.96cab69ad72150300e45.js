(window.webpackJsonp=window.webpackJsonp||[]).push([[35,10,48],{"4ARy":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("fXoL"),r=n("tk/3"),i=n("18Le"),s=n("YdJ5"),o=n("wxHw"),c=n("tyNb");let l=(()=>{class e{constructor(e,t,n,r,i){this.http=e,this.auth=t,this.alert=n,this.config=r,this.router=i,this.update=new a.n,this.backendUrl=this.config.backend_config.url}signUpParticipant(e,t){const n=new r.c({"Content-Type":"application/json"});this.http.post(this.backendUrl+"students/register",e,{headers:n}).subscribe(e=>{e.token&&(this.auth.set_jwt(e.token),this.auth.setLoggedIn(!0),this.router.navigate(["Projekttage/Anmeldung"])),this.alert.alert("Dein Account wurde erfolgreich erstellt!"),this.sendAuthentificationEmail(),this.update.emit(),t.reset()},e=>{this.alert.error("Accounterstellung fehlgeschlagen!",e.error)})}sendAuthentificationEmail(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"students/email/resend",null,{headers:e}).subscribe(e=>{this.alert.alert(e.message)},e=>{this.alert.error("Verifizierungs E-Mail konnte nicht versandt werden!",e.error)})}sendAuthentificationEmailSubscribe(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/email/resend",null,{headers:e})}logInParticipant(e){const t=new r.c({"Content-Type":"application/json"});return this.http.post(this.backendUrl+"students/login",e,{headers:t})}logOutParticipant(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/logout",null,{headers:e}).subscribe(e=>{this.alert.alert(e.message),this.auth.setLoggedIn(!1),this.router.navigate(["Projekttage/Anmeldung"])},e=>{this.alert.error("Logout fehlgeschlagen!",e.error)})}getSelfParticipant(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/self",{headers:e})}getParticipantID(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"students/id",e,{headers:t})}getAllParticipantNames(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/little_index_students",{headers:e})}getAllStudents(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/index_students?page="+e,{headers:t})}getAllSearchedStudents(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"admins/search_index_students",{search_value:e},{headers:t})}getFriends(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/friends",{headers:e})}promoteStudent(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/promote_student/"+e,null,{headers:t}).subscribe(e=>{this.alert.alert(e.message),this.update.emit()},e=>{this.alert.error("Ernennung des Assistenten fehlgeschlagen!",e.error)})}suspendStudent(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/suspend_student/"+e,null,{headers:t}).subscribe(e=>{this.alert.alert(e.message),this.update.emit()},e=>{this.alert.error("Suspendierung des Assistenten fehlgeschlagen!",e.error)})}quitAssistant(){const e=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.put(this.backendUrl+"students/quit_assistant",null,{headers:e})}putSelfParticipant(e){const t=new r.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"students/self_update",e,{headers:t}).subscribe(()=>{this.alert.alert("Erfolgreich registriert!"),this.update.emit()},e=>{this.alert.error("Aktualisierung des Accounts fehlgeschlagen!",e.error)})}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(r.a),a.Pb(i.a),a.Pb(s.a),a.Pb(o.a),a.Pb(c.g))},e.\u0275prov=a.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},uXsc:function(e,t,n){"use strict";n.r(t),n.d(t,"ExchangeRequestPageModule",(function(){return x}));var a=n("ofXK"),r=n("3Pt+"),i=n("tyNb"),s=n("TEn/"),o=n("fXoL"),c=n("4ARy"),l=n("SfEx"),h=n("YdJ5"),d=n("wxHw");function b(e,t){if(1&e&&(o.Lb(0,"ion-card-content"),o.Lb(1,"ion-label",18),o.mc(2),o.Kb(),o.Kb()),2&e){const e=o.Vb(2);o.xb(2),o.oc(" ",e.text," ")}}function u(e,t){1&e&&(o.Lb(0,"ion-title"),o.mc(1,"Dein Freund "),o.Kb())}function g(e,t){if(1&e&&(o.Lb(0,"ion-title"),o.mc(1),o.Kb()),2&e){const e=o.Vb(2);o.xb(1),o.rc(" ",e.exchangePartner.first_name," ",e.exchangePartner.last_name," ",e.exchangePartner.grade,"",e.exchangePartner.letter," ")}}function p(e,t){if(1&e){const e=o.Mb();o.Lb(0,"ion-card",7),o.Lb(1,"ion-card-header",5),o.Lb(2,"ion-title"),o.mc(3,"Tauschanfragen senden"),o.Kb(),o.Kb(),o.lc(4,b,3,1,"ion-card-content",8),o.Lb(5,"ion-card-content"),o.Lb(6,"form",9,10),o.Tb("ngSubmit",(function(){return o.ic(e),o.Vb().submit()})),o.Lb(8,"ion-list"),o.Lb(9,"ion-item-divider",5),o.Lb(10,"ion-title"),o.mc(11,"Du"),o.Kb(),o.Kb(),o.Lb(12,"ion-item",11),o.Lb(13,"ion-input",12),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().loadedUser.first_name=t})),o.Kb(),o.Kb(),o.Lb(14,"ion-item",11),o.Lb(15,"ion-input",13),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().loadedUser.last_name=t})),o.Kb(),o.Kb(),o.Lb(16,"ion-item",11),o.Lb(17,"ion-input",14),o.mc(18),o.Kb(),o.Kb(),o.Lb(19,"ion-item-divider",5),o.lc(20,u,2,0,"ion-title",8),o.lc(21,g,2,4,"ion-title",8),o.Kb(),o.Lb(22,"ion-item",15),o.Lb(23,"ion-input",16),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().exchangePartner.first_name=t})),o.Kb(),o.Kb(),o.Lb(24,"ion-item",15),o.Lb(25,"ion-input",17),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().exchangePartner.last_name=t})),o.Kb(),o.Kb(),o.Lb(26,"ion-item",15),o.Lb(27,"ion-label",18),o.mc(28,"Klassenstufe"),o.Kb(),o.Lb(29,"ion-select",19),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().exchangePartner.grade=t})),o.Lb(30,"ion-select-option",20),o.mc(31,"5"),o.Kb(),o.Lb(32,"ion-select-option",21),o.mc(33,"6"),o.Kb(),o.Lb(34,"ion-select-option",22),o.mc(35,"7"),o.Kb(),o.Lb(36,"ion-select-option",23),o.mc(37,"8"),o.Kb(),o.Lb(38,"ion-select-option",24),o.mc(39,"9"),o.Kb(),o.Lb(40,"ion-select-option",25),o.mc(41,"10"),o.Kb(),o.Lb(42,"ion-select-option",26),o.mc(43,"11"),o.Kb(),o.Kb(),o.Kb(),o.Lb(44,"ion-item",15),o.Lb(45,"ion-radio-group",27),o.Tb("ngModelChange",(function(t){return o.ic(e),o.Vb().exchangePartner.letter=t})),o.Lb(46,"ion-item",11),o.Lb(47,"ion-label",18),o.mc(48,"A "),o.Kb(),o.Jb(49,"ion-radio",28),o.Kb(),o.Lb(50,"ion-item",11),o.Lb(51,"ion-label",18),o.mc(52,"B "),o.Kb(),o.Jb(53,"ion-radio",29),o.Kb(),o.Lb(54,"ion-item",11),o.Lb(55,"ion-label",18),o.mc(56,"C "),o.Kb(),o.Jb(57,"ion-radio",30),o.Kb(),o.Lb(58,"ion-item",11),o.Lb(59,"ion-label",18),o.mc(60,"D "),o.Kb(),o.Jb(61,"ion-radio",31),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Lb(62,"div",32),o.Lb(63,"ion-button",33),o.mc(64,"Tauschanfrage senden"),o.Kb(),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&e){const e=o.gc(7),t=o.Vb();o.xb(4),o.ac("ngIf",t.text),o.xb(9),o.ac("ngModel",t.loadedUser.first_name),o.xb(2),o.ac("ngModel",t.loadedUser.last_name),o.xb(3),o.pc("",t.loadedUser.grade,"",t.loadedUser.letter,""),o.xb(2),o.ac("ngIf",0===t.exchangePartner.id),o.xb(1),o.ac("ngIf",0!=t.exchangePartner.id),o.xb(2),o.ac("ngModel",t.exchangePartner.first_name),o.xb(2),o.ac("ngModel",t.exchangePartner.last_name),o.xb(4),o.ac("selectedText",t.exchangePartner.grade)("ngModel",t.exchangePartner.grade),o.xb(16),o.ac("ngModel",t.exchangePartner.letter),o.xb(18),o.ac("disabled",e.invalid)}}function m(e,t){if(1&e&&(o.Lb(0,"ion-card",7),o.Lb(1,"ion-card-content"),o.Lb(2,"ion-text",34),o.mc(3),o.Kb(),o.Kb(),o.Kb()),2&e){const e=o.Vb();o.xb(3),o.nc(e.studentAlreadyExchangeError)}}const f=[{path:"",component:(()=>{class e{constructor(e,t,n,a,r,i,s){this.activatedRoute=e,this.router=t,this.participantsService=n,this.exchangesService=a,this.alertCtrl=r,this.alert=i,this.config=s,this.loadedUser={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.exchangePartner={first_name:"",last_name:"",grade:0,letter:""}}ngOnInit(){this.text=this.config.get_content("user-exchange-request"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.activatedRoute.paramMap.subscribe(e=>{e.has("ParticipantName")?this.participantUrl=e.get("ParticipantName"):this.router.navigate([""])}),this.getStudent()}getStudent(){this.participantsService.getSelfParticipant().subscribe(e=>{this.loadedUser=e.data})}submit(){this.participantsService.getParticipantID(this.exchangePartner).subscribe(e=>{0!=e.id&&0==this.loadedUser.exchange_id?this.exchangesService.createExchange(e.id).subscribe(e=>{this.alert.alert(e.message),this.router.navigate(["Projekttage/Benutzer/"+this.participantUrl]),this.exchangesService.update.emit()},e=>{this.alert.error("Erstellung des Tausches fehlgeschlagen!",e.error)}):this.alertCtrl.create({header:"Fehler",message:"Du must zuerst einen validen Tauschpartner ausw\xe4hlen!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{e.present()})})}delete(){this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich deine Tauschanfrage l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:()=>{this.exchangesService.deleteSelfExchange().subscribe(e=>{this.alert.alert(e.message),this.router.navigate(["Projekttage/Benutzer/"+this.participantUrl]),this.exchangesService.update.emit()},e=>{this.alert.error("L\xf6schung der Tauschanfrage fehlgeschlagen!",e.error)})}}]}).then(e=>{e.present()})}}return e.\u0275fac=function(t){return new(t||e)(o.Ib(i.a),o.Ib(i.g),o.Ib(c.a),o.Ib(l.a),o.Ib(s.a),o.Ib(h.a),o.Ib(d.a))},e.\u0275cmp=o.Cb({type:e,selectors:[["app-exchange-request"]],decls:11,vars:4,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","slot","end","color","danger",3,"disabled","click"],["name","trash"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["name","ExchangeForm",3,"ngSubmit"],["form","ngForm"],["color","items","lines","none"],["color","text","readonly","","name","ExchangeFirstFirstName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstLastName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstGradeAndClass"],["color","items"],["color","text","type","text","required","","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","required","","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"]],template:function(e,t){1&e&&(o.Lb(0,"ion-header"),o.Lb(1,"ion-toolbar",0),o.Lb(2,"ion-button",1),o.Jb(3,"ion-back-button",2),o.Kb(),o.Lb(4,"ion-title"),o.mc(5,"Tausch anfragen"),o.Kb(),o.Lb(6,"ion-button",3),o.Tb("click",(function(){return t.delete()})),o.Jb(7,"ion-icon",4),o.Kb(),o.Kb(),o.Kb(),o.Lb(8,"ion-content",5),o.lc(9,p,65,13,"ion-card",6),o.lc(10,m,4,1,"ion-card",6),o.Kb()),2&e&&(o.xb(3),o.bc("defaultHref","Projekttage/Benutzer/",t.participantUrl,""),o.xb(3),o.ac("disabled",0==t.loadedUser.exchange_id),o.xb(3),o.ac("ngIf",0==t.loadedUser.exchange_id),o.xb(1),o.ac("ngIf",0!=t.loadedUser.exchange_id))},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.u,s.p,a.j,s.j,s.l,s.k,r.k,r.g,r.h,s.B,s.y,s.x,s.w,s.ab,r.f,r.i,r.j,s.A,s.I,s.Z,s.J,s.D,s.C,s.X,s.N],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=o.Gb({type:e}),e.\u0275inj=o.Fb({factory:function(t){return new(t||e)},imports:[[a.b,r.a,s.S,i.k.forChild(f)]]}),e})()}}]);