!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"0zAt":function(t,i,s){"use strict";s.r(i),s.d(i,"LeaderMessagesPageModule",function(){return j});var o=s("ofXK"),a=s("3Pt+"),r=s("tyNb"),c=s("TEn/"),b=s("fXoL"),d=s("3LUQ"),u=s("CoJz"),l=s("PO/Q"),g=s("Hzbo"),f=s("r4Kj");function m(e,n){if(1&e){var t=b.Nb();b.Mb(0,"ion-buttons",20),b.Ub("click",function(){b.lc(t);var e=b.Wb().$implicit;return b.Wb(2).delete(e)}),b.Kb(1,"ion-icon",21),b.Lb()}}function p(e,n){if(1&e&&(b.Mb(0,"ion-card",22),b.Mb(1,"ion-card-content"),b.Mb(2,"ion-text",23),b.pc(3),b.Lb(),b.Kb(4,"br"),b.Mb(5,"ion-text",24),b.pc(6),b.Lb(),b.Lb(),b.Lb()),2&e){var t=b.Wb().$implicit;b.yb(3),b.qc(t.sender_name),b.yb(3),b.qc(t.message)}}function h(e,n){if(1&e&&(b.Mb(0,"ion-card",25),b.Mb(1,"ion-card-content"),b.Mb(2,"ion-text",23),b.pc(3),b.Lb(),b.Kb(4,"br"),b.Mb(5,"ion-text",24),b.pc(6),b.Lb(),b.Lb(),b.Lb()),2&e){var t=b.Wb().$implicit;b.yb(3),b.qc(t.sender_name),b.yb(3),b.qc(t.message)}}function v(e,n){if(1&e){var t=b.Nb();b.Mb(0,"ion-buttons",26),b.Ub("click",function(){b.lc(t);var e=b.Wb().$implicit;return b.Wb(2).delete(e)}),b.Kb(1,"ion-icon",21),b.Lb()}}function L(e,n){if(1&e&&(b.Mb(0,"ion-item",15),b.oc(1,m,2,0,"ion-buttons",16),b.oc(2,p,7,2,"ion-card",17),b.oc(3,h,7,2,"ion-card",18),b.oc(4,v,2,0,"ion-buttons",19),b.Lb()),2&e){var t=n.$implicit,i=b.Wb(2);b.yb(1),b.bc("ngIf",t.sender_name==i.loadedLeader.user_name),b.yb(1),b.bc("ngIf",t.sender_name==i.loadedLeader.user_name),b.yb(1),b.bc("ngIf",t.sender_name!=i.loadedLeader.user_name),b.yb(1),b.bc("ngIf",t.sender_name!=i.loadedLeader.user_name)}}function M(e,n){if(1&e&&(b.Mb(0,"ion-list",13),b.oc(1,L,5,4,"ion-item",14),b.Lb()),2&e){var t=b.Wb();b.yb(1),b.bc("ngForOf",t.leadedProject.messages)}}var y,_,k=[{path:"",component:(y=function(){function t(n,i,s,o,a,r,c){e(this,t),this.activatedRoute=n,this.router=i,this.alert=s,this.projectsService=o,this.leadersService=a,this.messagesService=r,this.config=c,this.subscriptions=[],this.loadedLeader={id:0,user_name:"",email:"",password:"",project_id:0},this.leadedProject={id:0,authorized:0,editable:0,title:"",image:"",descr:"",leader_name:"",leader_id:0,cost:0,first_day_begin:{hours:0,minutes:0},first_day_end:{hours:0,minutes:0},second_day_begin:{hours:0,minutes:0},second_day_end:{hours:0,minutes:0},min_grade:0,max_grade:0,min_participants:0,max_participants:0,messages:[],participants:[]},this.newMessage={message:""},this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}var i,s,o;return i=t,(s=[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.paramMap.subscribe(function(n){n.has("LeaderName")?e.leaderUrl=n.get("LeaderName"):e.router.navigate([""])}),this.getProject(),this.getLeader(),this.subscriptions.push(this.messagesService.update.subscribe(function(){return e.getProject()}),this.messagesService.update.subscribe(function(){return e.getLeader()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getLeader",value:function(){var e=this;this.leadersService.getSelfLeader().subscribe(function(n){e.loadedLeader=n.data})}},{key:"getProject",value:function(){var e=this;this.projectsService.getSelfLeadedProject("leaders").subscribe(function(n){e.leadedProject=n.data})}},{key:"send",value:function(e){var n=this;!0===e.valid&&(this.messagesService.createMessage("leaders",this.newMessage).subscribe(function(e){n.messagesService.update.emit(),n.leadedProject.messages.push(e.data)},function(e){n.alert.error("Versandt der Nachricht fehlgeschlagen!",e.error)}),e.reset())}},{key:"delete",value:function(e){this.leadedProject.messages=this.leadedProject.messages.filter(function(n){return n.id!==e.id}),this.messagesService.deleteMessage("leaders",e.id)}}])&&n(i.prototype,s),o&&n(i,o),t}(),y.\u0275fac=function(e){return new(e||y)(b.Jb(r.a),b.Jb(r.g),b.Jb(d.a),b.Jb(u.a),b.Jb(l.a),b.Jb(g.a),b.Jb(f.a))},y.\u0275cmp=b.Db({type:y,selectors:[["app-messages"]],decls:18,vars:6,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["class","content",4,"ngIf"],["color","background","name","MessageBox",1,"content"],["id","Formular","name","MessageForm",3,"ngSubmit"],["form","ngForm"],["color","items"],["color","text","required","","name","MessageText","type","text",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","type","submit","expand","block",1,"ion-no-margin",3,"disabled"],["name","duplicate"],[1,"content"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],["slot","end",3,"click",4,"ngIf"],["class","message sended_message","slot","end","color","background",4,"ngIf"],["class","message","slot","start","color","background",4,"ngIf"],["slot","start",3,"click",4,"ngIf"],["slot","end",3,"click"],["color","danger","name","close"],["slot","end","color","background",1,"message","sended_message"],["color","buttons"],["color","text"],["slot","start","color","background",1,"message"],["slot","start",3,"click"]],template:function(e,n){if(1&e){var t=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",0),b.Mb(2,"ion-button",1),b.Kb(3,"ion-back-button",2),b.Lb(),b.Mb(4,"ion-title"),b.pc(5,"Notizen"),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",3),b.oc(7,M,2,1,"ion-list",4),b.Mb(8,"ion-card",5),b.Mb(9,"form",6,7),b.Ub("ngSubmit",function(){b.lc(t);var e=b.jc(10);return n.send(e)}),b.Mb(11,"ion-item",8),b.Mb(12,"ion-input",9),b.Ub("ngModelChange",function(e){return n.newMessage.message=e}),b.Lb(),b.Lb(),b.Mb(13,"div",10),b.Mb(14,"ion-button",11),b.Mb(15,"ion-label"),b.Kb(16,"ion-icon",12),b.pc(17," Notiz an das Projekt anheften"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&e){var i=b.jc(10);b.yb(3),b.ec("defaultHref","",n.eventName,"/",n.projectNoun,"leiter/",n.leaderUrl,""),b.yb(4),b.bc("ngIf",n.leadedProject.messages.length),b.yb(5),b.bc("ngModel",n.newMessage.message),b.yb(2),b.bc("disabled",i.invalid)}},directives:[c.t,c.R,c.h,c.e,c.f,c.P,c.p,o.j,c.j,a.k,a.g,a.h,c.x,c.w,c.ab,a.j,a.f,a.i,c.A,c.u,c.B,o.i,c.i,c.k,c.N],styles:[""]}),y)}],j=((_=function n(){e(this,n)}).\u0275mod=b.Hb({type:_}),_.\u0275inj=b.Gb({factory:function(e){return new(e||_)},imports:[[o.b,a.a,c.S,r.k.forChild(k)]]}),_)}}])}();