(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"67tE":function(e,t,n){"use strict";n.r(t),n.d(t,"ExchangeRequestPageModule",function(){return f});var a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),o=n("TEn/"),c=n("fXoL"),b=n("ZvwH"),s=n("hQbD"),l=n("3LUQ"),d=n("r4Kj");function u(e,t){if(1&e&&(c.Mb(0,"ion-card-content"),c.Mb(1,"ion-label",18),c.pc(2),c.Lb(),c.Lb()),2&e){const e=c.Wb(2);c.yb(2),c.rc(" ",e.text," ")}}function h(e,t){1&e&&(c.Mb(0,"ion-title"),c.pc(1,"Dein Freund "),c.Lb())}function g(e,t){if(1&e&&(c.Mb(0,"ion-title"),c.pc(1),c.Lb()),2&e){const e=c.Wb(2);c.yb(1),c.uc(" ",e.exchangePartner.first_name," ",e.exchangePartner.last_name," ",e.exchangePartner.grade,"",e.exchangePartner.letter," ")}}function M(e,t){if(1&e){const e=c.Nb();c.Mb(0,"ion-card",7),c.Mb(1,"ion-card-header",5),c.Mb(2,"ion-card-title"),c.pc(3,"Tauschanfragen senden"),c.Lb(),c.Lb(),c.oc(4,u,3,1,"ion-card-content",8),c.Mb(5,"ion-card-content"),c.Mb(6,"form",9,10),c.Ub("ngSubmit",function(){return c.lc(e),c.Wb().submit()}),c.Mb(8,"ion-list"),c.Mb(9,"ion-item-divider",5),c.Mb(10,"ion-card-title"),c.pc(11,"Du"),c.Lb(),c.Lb(),c.Mb(12,"ion-item",11),c.Mb(13,"ion-input",12),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().loadedStudent.first_name=t}),c.Lb(),c.Lb(),c.Mb(14,"ion-item",11),c.Mb(15,"ion-input",13),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().loadedStudent.last_name=t}),c.Lb(),c.Lb(),c.Mb(16,"ion-item",11),c.Mb(17,"ion-input",14),c.pc(18),c.Lb(),c.Lb(),c.Mb(19,"ion-item-divider",5),c.oc(20,h,2,0,"ion-title",8),c.oc(21,g,2,4,"ion-title",8),c.Lb(),c.Mb(22,"ion-item",15),c.Mb(23,"ion-input",16),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().exchangePartner.first_name=t}),c.Lb(),c.Lb(),c.Mb(24,"ion-item",15),c.Mb(25,"ion-input",17),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().exchangePartner.last_name=t}),c.Lb(),c.Lb(),c.Mb(26,"ion-item",15),c.Mb(27,"ion-label",18),c.pc(28,"Klassenstufe"),c.Lb(),c.Mb(29,"ion-select",19),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().exchangePartner.grade=t}),c.Mb(30,"ion-select-option",20),c.pc(31,"5"),c.Lb(),c.Mb(32,"ion-select-option",21),c.pc(33,"6"),c.Lb(),c.Mb(34,"ion-select-option",22),c.pc(35,"7"),c.Lb(),c.Mb(36,"ion-select-option",23),c.pc(37,"8"),c.Lb(),c.Mb(38,"ion-select-option",24),c.pc(39,"9"),c.Lb(),c.Mb(40,"ion-select-option",25),c.pc(41,"10"),c.Lb(),c.Mb(42,"ion-select-option",26),c.pc(43,"11"),c.Lb(),c.Lb(),c.Lb(),c.Mb(44,"ion-item",15),c.Mb(45,"ion-radio-group",27),c.Ub("ngModelChange",function(t){return c.lc(e),c.Wb().exchangePartner.letter=t}),c.Mb(46,"ion-item",11),c.Mb(47,"ion-label",18),c.pc(48,"A "),c.Lb(),c.Kb(49,"ion-radio",28),c.Lb(),c.Mb(50,"ion-item",11),c.Mb(51,"ion-label",18),c.pc(52,"B "),c.Lb(),c.Kb(53,"ion-radio",29),c.Lb(),c.Mb(54,"ion-item",11),c.Mb(55,"ion-label",18),c.pc(56,"C "),c.Lb(),c.Kb(57,"ion-radio",30),c.Lb(),c.Mb(58,"ion-item",11),c.Mb(59,"ion-label",18),c.pc(60,"D "),c.Lb(),c.Kb(61,"ion-radio",31),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(62,"div",32),c.Mb(63,"ion-button",33),c.pc(64,"Tauschanfrage senden"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&e){const e=c.jc(7),t=c.Wb();c.yb(4),c.bc("ngIf",t.text),c.yb(9),c.bc("ngModel",t.loadedStudent.first_name),c.yb(2),c.bc("ngModel",t.loadedStudent.last_name),c.yb(3),c.sc("",t.loadedStudent.grade,"",t.loadedStudent.letter,""),c.yb(2),c.bc("ngIf",0===t.exchangePartner.id),c.yb(1),c.bc("ngIf",0!=t.exchangePartner.id),c.yb(2),c.bc("ngModel",t.exchangePartner.first_name),c.yb(2),c.bc("ngModel",t.exchangePartner.last_name),c.yb(4),c.bc("selectedText",t.exchangePartner.grade)("ngModel",t.exchangePartner.grade),c.yb(16),c.bc("ngModel",t.exchangePartner.letter),c.yb(18),c.bc("disabled",e.invalid)}}function m(e,t){if(1&e&&(c.Mb(0,"ion-card",7),c.Mb(1,"ion-card-content"),c.Mb(2,"ion-text",34),c.pc(3),c.Lb(),c.Lb(),c.Lb()),2&e){const e=c.Wb();c.yb(3),c.qc(e.studentAlreadyExchangeError)}}const p=[{path:"",component:(()=>{class e{constructor(e,t,n,a,i,r,o){this.activatedRoute=e,this.router=t,this.studentsService=n,this.exchangesService=a,this.alertCtrl=i,this.alert=r,this.config=o,this.subscriptions=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.exchangePartner={first_name:"",last_name:"",grade:0,letter:""},this.eventName=this.config.app_config.event_name}ngOnInit(){this.text=this.config.get_content("student-exchange-request"),this.studentAlreadyExchangeError=this.config.get_error("student-already_exchange"),this.activatedRoute.paramMap.subscribe(e=>{e.has("ParticipantName")?this.studentUrl=e.get("ParticipantName"):this.router.navigate([""])}),this.getStudent(),this.subscriptions.push(this.studentsService.update.subscribe(()=>this.getStudent()))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getStudent(){this.studentsService.getSelfStudent().subscribe(e=>{this.loadedStudent=e.data})}submit(){this.studentsService.getStudentID(this.exchangePartner).subscribe(e=>{0!=e.id&&0==this.loadedStudent.exchange_id?this.exchangesService.createExchange(e.id).subscribe(e=>{this.alert.alert(e.message),this.router.navigate([this.eventName+"/Sch\xfcler/"+this.studentUrl]),this.exchangesService.update.emit()},e=>{this.alert.error("Erstellung des Tausches fehlgeschlagen!",e.error)}):this.alertCtrl.create({header:"Fehler",message:"Du must zuerst einen validen Tauschpartner ausw\xe4hlen!",buttons:[{text:"Ok",role:"cancel"}]}).then(e=>{e.present()})})}delete(){this.alertCtrl.create({header:"Bist du sicher?",message:"Willst du wirklich deine Tauschanfrage l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:()=>{this.exchangesService.deleteSelfExchange().subscribe(e=>{this.alert.alert(e.message),this.router.navigate([this.eventName+"/Sch\xfcler/"+this.studentUrl]),this.exchangesService.update.emit()},e=>{this.alert.error("L\xf6schung der Tauschanfrage fehlgeschlagen!",e.error)})}}]}).then(e=>{e.present()})}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(r.a),c.Jb(r.g),c.Jb(b.a),c.Jb(s.a),c.Jb(o.a),c.Jb(l.a),c.Jb(d.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-exchange-request"]],decls:11,vars:5,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","slot","end","color","danger",3,"disabled","click"],["name","trash"],["color","background"],["color","background","class","content",4,"ngIf"],["color","background",1,"content"],[4,"ngIf"],["name","ExchangeForm",3,"ngSubmit"],["form","ngForm"],["color","items","lines","none"],["color","text","readonly","","name","ExchangeFirstFirstName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstLastName",3,"ngModel","ngModelChange"],["color","text","readonly","","name","ExchangeFirstGradeAndClass"],["color","items"],["color","text","type","text","required","","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","required","","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","danger"]],template:function(e,t){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-button",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.pc(5,"Tausch anfragen"),c.Lb(),c.Mb(6,"ion-button",3),c.Ub("click",function(){return t.delete()}),c.Kb(7,"ion-icon",4),c.Lb(),c.Lb(),c.Lb(),c.Mb(8,"ion-content",5),c.oc(9,M,65,13,"ion-card",6),c.oc(10,m,4,1,"ion-card",6),c.Lb()),2&e&&(c.yb(3),c.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),c.yb(3),c.bc("disabled",0==t.loadedStudent.exchange_id),c.yb(3),c.bc("ngIf",0==t.loadedStudent.exchange_id),c.yb(1),c.bc("ngIf",0!=t.loadedStudent.exchange_id))},directives:[o.t,o.R,o.h,o.e,o.f,o.P,o.u,o.p,a.j,o.j,o.l,o.n,o.k,i.k,i.g,i.h,o.B,o.y,o.x,o.w,o.ab,i.f,i.i,i.j,o.A,o.I,o.Z,o.J,o.D,o.C,o.X,o.N],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[a.b,i.a,o.S,r.k.forChild(p)]]}),e})()}}]);
//# sourceMappingURL=log-in-student-page-exchange-request-exchange-request-module-es2015.a6e29eb99eb4588435d7.js.map