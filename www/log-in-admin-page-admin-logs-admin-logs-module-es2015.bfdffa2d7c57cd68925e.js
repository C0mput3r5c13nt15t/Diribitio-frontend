(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{HFXa:function(e,n,i){"use strict";i.r(n),i.d(n,"AdminLogsPageModule",function(){return p});var t=i("ofXK"),o=i("3Pt+"),c=i("tyNb"),a=i("TEn/"),s=i("fXoL"),r=i("OeS+"),b=i("uVPj"),l=i("3LUQ"),d=i("r4Kj");function g(e,n){if(1&e&&(s.Mb(0,"ion-card-content"),s.Mb(1,"ion-label",14),s.pc(2),s.Lb(),s.Lb()),2&e){const e=s.Wb();s.yb(2),s.rc(" ",e.text," ")}}function m(e,n){if(1&e){const e=s.Nb();s.Mb(0,"ion-item",16),s.Mb(1,"ion-card",3),s.Mb(2,"ion-card-content"),s.Mb(3,"ion-text",14),s.pc(4),s.Lb(),s.Lb(),s.Lb(),s.Mb(5,"ion-buttons",17),s.Ub("click",function(){s.lc(e);const i=n.$implicit;return s.Wb(2).deleteSignUpEmail(i.id)}),s.Kb(6,"ion-icon",18),s.Lb(),s.Lb()}if(2&e){const e=n.$implicit;s.yb(4),s.qc(e.email)}}function u(e,n){if(1&e&&(s.Mb(0,"ion-card-content"),s.oc(1,m,7,1,"ion-item",15),s.Lb()),2&e){const e=s.Wb();s.yb(1),s.bc("ngForOf",e.SignUpEmails)}}const h=[{path:"",component:(()=>{class e{constructor(e,n,i,o,c,a){this.activatedRoute=e,this.scheduleService=n,this.adminsService=i,this.alertCtrl=o,this.alert=c,this.config=a,this.subscriptions=[],this.SignUpEmails=[],this.SignUpEmail={id:0,email:"",email_confirmation:""},this.schedule={id:1,begin:Object(t.n)(new Date,"yyyy-MM-dd","en"),control:Object(t.n)(new Date,"yyyy-MM-dd","en"),registration:Object(t.n)(new Date,"yyyy-MM-dd","en"),sort_students:Object(t.n)(new Date,"yyyy-MM-dd","en"),exchange:Object(t.n)(new Date,"yyyy-MM-dd","en"),projects:Object(t.n)(new Date,"yyyy-MM-dd","en"),end:Object(t.n)(new Date,"yyyy-MM-dd","en")},this.eventName=this.config.app_config.event_name}ngOnInit(){this.text=this.config.get_content("admin-logs"),this.currentDate=Object(t.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(e=>{this.adminUrl=e.get("AdminName")}),this.getSchedule(),this.getSignUpemails(),this.subscriptions.push(this.scheduleService.update.subscribe(()=>this.getSchedule()),this.adminsService.update.subscribe(()=>this.getSignUpemails()))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}getSchedule(){this.scheduleService.getSchedule().subscribe(e=>{this.schedule=e.data})}getSignUpemails(){this.adminsService.getAllSignUpEmails().subscribe(e=>{this.SignUpEmails=e.data})}postSignUpEmail(e){this.adminsService.createSignUpEmail(this.SignUpEmail).subscribe(n=>{this.SignUpEmails.push(n.data),this.alert.alert(n.message),e.reset(),this.adminsService.update.emit()},e=>{this.alert.error("Freigeben der E-Mail fehlgeschlagen!",e.error)})}deleteSignUpEmail(e){this.alertCtrl.create({header:"Sind Sie sicher?",message:"Wollen Sie diese E-Mail wirklich sperren?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Sperren",handler:()=>{this.SignUpEmail.email===this.SignUpEmail.email_confirmation?(this.SignUpEmails=this.SignUpEmails.filter(n=>e!==n.id),this.adminsService.deleteSignUpEmail(e)):this.alert.error("Die angegebenen E-Mails stimmen nicht \xfcberein.")}}]}).then(e=>{e.present()})}}return e.\u0275fac=function(n){return new(n||e)(s.Jb(c.a),s.Jb(r.a),s.Jb(b.a),s.Jb(a.a),s.Jb(l.a),s.Jb(d.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-admin-logs"]],decls:26,vars:7,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["name","SignUpEmailForm",1,"content",3,"ngSubmit"],["signUpEmail","ngForm"],["color","background","color","background"],["color","items"],["color","text","name","Email","placeholder","E-Mail","required","","type","email",3,"ngModel","ngModelChange"],["color","text","name","Email","placeholder","E-Mail-Best\xe4tigung","required","","type","email",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","text"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],[3,"click"],["color","danger","name","close"]],template:function(e,n){if(1&e){const e=s.Nb();s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar",0),s.Mb(2,"ion-button",1),s.Kb(3,"ion-back-button",2),s.Lb(),s.Mb(4,"ion-title"),s.pc(5,"Appverwaltung"),s.Lb(),s.Lb(),s.Lb(),s.Mb(6,"ion-content",3),s.Mb(7,"ion-card",4),s.Mb(8,"ion-card-header"),s.Mb(9,"ion-card-title"),s.pc(10,"E-Mails f\xfcr Admin-Accounts verwalten"),s.Lb(),s.Lb(),s.oc(11,g,3,1,"ion-card-content",5),s.oc(12,u,2,1,"ion-card-content",5),s.Mb(13,"ion-card-content"),s.Mb(14,"form",6,7),s.Ub("ngSubmit",function(){s.lc(e);const i=s.jc(15);return n.postSignUpEmail(i)}),s.Mb(16,"ion-card",8),s.Mb(17,"ion-card-content"),s.Mb(18,"ion-list"),s.Mb(19,"ion-item",9),s.Mb(20,"ion-input",10),s.Ub("ngModelChange",function(e){return n.SignUpEmail.email=e}),s.Lb(),s.Lb(),s.Mb(21,"ion-item",9),s.Mb(22,"ion-input",11),s.Ub("ngModelChange",function(e){return n.SignUpEmail.email_confirmation=e}),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"div",12),s.Mb(24,"ion-button",13),s.pc(25,"Freigeben"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=s.jc(15);s.yb(3),s.dc("defaultHref","",n.eventName,"/Admin/",n.adminUrl,""),s.yb(8),s.bc("ngIf",n.text),s.yb(1),s.bc("ngIf",n.SignUpEmails.length),s.yb(8),s.bc("ngModel",n.SignUpEmail.email),s.yb(2),s.bc("ngModel",n.SignUpEmail.email_confirmation),s.yb(2),s.bc("disabled",e.invalid||n.currentDate<=n.schedule.begin&&n.currentDate>n.schedule.sort_students)}},directives:[a.t,a.R,a.h,a.e,a.f,a.P,a.p,a.j,a.l,a.n,t.j,a.k,o.k,o.g,o.h,a.B,a.x,a.w,a.ab,o.j,o.f,o.i,a.A,t.i,a.N,a.i,a.u],styles:["ion-col[_ngcontent-%COMP%]{height:80px}"]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(n){return new(n||e)},imports:[[t.b,o.a,a.S,c.k.forChild(h)]]}),e})()}}]);
//# sourceMappingURL=log-in-admin-page-admin-logs-admin-logs-module-es2015.bfdffa2d7c57cd68925e.js.map