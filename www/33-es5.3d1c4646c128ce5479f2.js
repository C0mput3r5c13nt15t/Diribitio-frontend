!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[33,49,50,51,52],{oKxh:function(t,a,r){"use strict";r.r(a),r.d(a,"AdminExchangeDetailPageModule",(function(){return j}));var i=r("ofXK"),o=r("3Pt+"),c=r("tyNb"),s=r("TEn/"),d=r("fXoL"),l=r("SfEx"),h=r("zbRu"),u=r("wxHw");function b(e,t){if(1&e&&(d.Lb(0,"ion-card-header"),d.Lb(1,"ion-card-title"),d.oc(2),d.Kb(),d.Kb()),2&e){var n=d.Vb();d.xb(2),d.tc("Tauschanfrage von ",n.loadedExchange.sender.first_name," ",n.loadedExchange.sender.last_name," und ",n.loadedExchange.receiver.first_name," ",n.loadedExchange.receiver.last_name,"")}}function g(e,t){if(1&e&&(d.Lb(0,"ion-label",14),d.oc(1),d.Kb()),2&e){var n=d.Vb(2);d.xb(1),d.sc("",n.loadedExchange.receiver.first_name," ",n.loadedExchange.receiver.last_name," erf\xfcllt NICHT die ",n.projectNoun,"bedingungen!")}}function p(e,t){if(1&e&&(d.Lb(0,"ion-label",14),d.oc(1),d.Kb()),2&e){var n=d.Vb(2);d.xb(1),d.sc("",n.loadedExchange.sender.first_name," ",n.loadedExchange.sender.last_name," erf\xfcllt NICHT die ",n.projectNoun,"bedingungen!")}}function f(e,t){if(1&e&&(d.Lb(0,"ion-item-group"),d.Lb(1,"ion-item-divider",5),d.Lb(2,"ion-label",11),d.oc(3),d.Kb(),d.Kb(),d.Lb(4,"ion-item",12),d.oc(5),d.Kb(),d.Lb(6,"ion-item",12),d.oc(7),d.Kb(),d.Lb(8,"ion-item",12),d.nc(9,g,2,3,"ion-label",13),d.Kb(),d.Lb(10,"ion-item-divider",5),d.Lb(11,"ion-label",11),d.oc(12),d.Kb(),d.Kb(),d.Lb(13,"ion-item",12),d.oc(14),d.Kb(),d.Lb(15,"ion-item",12),d.oc(16),d.Kb(),d.Lb(17,"ion-item",12),d.nc(18,p,2,3,"ion-label",13),d.Kb(),d.Kb()),2&e){var n=d.Vb();d.xb(3),d.rc("",n.loadedExchange.sender.first_name," ",n.loadedExchange.sender.last_name," (Ersteller/in der Anfrage)"),d.xb(2),d.rc(" Klasse: ",n.loadedExchange.sender.grade,"",n.loadedExchange.sender.letter," "),d.xb(2),d.tc(" ",n.projectNoun,": ",n.firstProjectName," (",n.firstMinGrade,".Klasse bis ",n.firstMaxGrade,".Klasse) "),d.xb(2),d.ac("ngIf",n.loadedExchange.receiver.grade>n.firstMaxGrade||n.loadedExchange.receiver.grade<n.firstMinGrade),d.xb(3),d.rc("",n.loadedExchange.receiver.first_name," ",n.loadedExchange.receiver.last_name," (Empf\xe4nger/in)"),d.xb(2),d.rc(" Klasse: ",n.loadedExchange.receiver.grade,"",n.loadedExchange.receiver.letter," "),d.xb(2),d.tc(" ",n.projectNoun,": ",n.secondProjectName," (",n.secondMinGrade,".Klasse bis ",n.secondMaxGrade,".Klasse) "),d.xb(2),d.ac("ngIf",n.loadedExchange.sender.grade>n.secondMaxGrade||n.loadedExchange.sender.grade<n.secondMinGrade)}}var m,v,x=[{path:"",component:(m=function(){function t(n,a,r,i,o,c){e(this,t),this.activatedRoute=n,this.router=a,this.exchangesService=r,this.projectService=i,this.alertCtrl=o,this.config=c,this.loadedExchange={id:0,sender_id:0,receiver_id:0,confirmed:0,accomplished:0,sender:null,receiver:null},this.firstProjectName="",this.firstMinGrade=0,this.firstMaxGrade=0,this.secondProjectName="",this.secondMinGrade=0,this.secondMaxGrade=0,this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.paramMap.subscribe((function(t){if(t.has("ExchangeID")){e.adminUrl=t.get("AdminName");var n=t.get("ExchangeID");e.exchangesService.getExchange(n).subscribe((function(t){e.loadedExchange=t.data,e.projectService.getProject(e.loadedExchange.sender.project_id).subscribe((function(t){e.firstProjectName=t.data.title,e.firstMinGrade=t.data.min_grade,e.firstMaxGrade=t.data.max_grade})),e.projectService.getProject(e.loadedExchange.receiver.project_id).subscribe((function(t){e.secondProjectName=t.data.title,e.secondMinGrade=t.data.min_grade,e.secondMaxGrade=t.data.max_grade}))}))}else e.router.navigate([""])}))}},{key:"deleteExchange",value:function(){var e=this;this.alertCtrl.create({header:"Bist du sicher?",message:"Wollen sie diesen Tausch wirklich unwiederruflich l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:function(){e.exchangesService.deleteExchange(e.loadedExchange.id),e.router.navigate([e.eventName+"/Admin/"+e.adminUrl+"/Tauschanfragen"])}}]}).then((function(e){e.present()}))}},{key:"carryOutExchange",value:function(){this.exchangesService.carryOutExchange(this.loadedExchange.id),this.router.navigate([this.eventName+"/Admin/"+this.adminUrl+"/Tauschanfragen"])}}]),t}(),m.\u0275fac=function(e){return new(e||m)(d.Ib(c.a),d.Ib(c.g),d.Ib(l.a),d.Ib(h.a),d.Ib(s.a),d.Ib(u.a))},m.\u0275cmp=d.Cb({type:m,selectors:[["app-admin-exchange-detail"]],decls:20,vars:4,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","buttons","color","danger","slot","end",3,"click"],["name","trash"],["color","background"],["color","background",1,"content"],[4,"ngIf"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"click"],["color","buttons","expand","block","color","buttons","color","danger","slot","end",1,"ion-no-margin",3,"click"],["color","text"],["color","items","lines","none"],["color","danger",4,"ngIf"],["color","danger"]],template:function(e,t){1&e&&(d.Lb(0,"ion-header"),d.Lb(1,"ion-toolbar",0),d.Lb(2,"ion-button",1),d.Jb(3,"ion-back-button",2),d.Kb(),d.Lb(4,"ion-title"),d.oc(5,"Tauschanfrage"),d.Kb(),d.Lb(6,"ion-button",3),d.Tb("click",(function(){return t.deleteExchange()})),d.Jb(7,"ion-icon",4),d.Kb(),d.Kb(),d.Kb(),d.Lb(8,"ion-content",5),d.Lb(9,"ion-card",6),d.nc(10,b,3,4,"ion-card-header",7),d.Lb(11,"ion-card-content"),d.Lb(12,"form"),d.nc(13,f,19,18,"ion-item-group",7),d.Lb(14,"div",8),d.Lb(15,"ion-button",9),d.Tb("click",(function(){return t.carryOutExchange()})),d.oc(16,"Tausch best\xe4tigen"),d.Kb(),d.Kb(),d.Lb(17,"div",8),d.Lb(18,"ion-button",10),d.Tb("click",(function(){return t.deleteExchange()})),d.oc(19,"Tauschanfrage l\xf6schen"),d.Kb(),d.Kb(),d.Kb(),d.Kb(),d.Kb(),d.Kb()),2&e&&(d.xb(3),d.cc("defaultHref","",t.eventName,"/Admin/",t.adminUrl,"/Tauschanfragen"),d.xb(7),d.ac("ngIf",t.loadedExchange.sender&&t.loadedExchange.receiver),d.xb(3),d.ac("ngIf",t.loadedExchange.sender&&t.loadedExchange.receiver))},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.u,s.p,s.j,i.j,s.k,o.k,o.g,o.h,s.l,s.n,s.z,s.y,s.A,s.x],styles:[""]}),m)}],j=((v=function t(){e(this,t)}).\u0275mod=d.Gb({type:v}),v.\u0275inj=d.Fb({factory:function(e){return new(e||v)},imports:[[i.b,o.a,s.S,c.k.forChild(x)]]}),v)},zbRu:function(t,a,r){"use strict";r.d(a,"a",(function(){return h}));var i=r("fXoL"),o=r("tk/3"),c=r("18Le"),s=r("YdJ5"),d=r("wxHw"),l=r("tyNb"),h=function(){var t=function(){function t(n,a,r,o,c){e(this,t),this.http=n,this.auth=a,this.alert=r,this.config=o,this.router=c,this.update=new i.n,this.backendUrl=this.config.backend_config.url,this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}return n(t,[{key:"getAllProjects",value:function(){var e=new o.c({"Content-Type":"application/json"});return this.http.get(this.backendUrl+"projects",{headers:e})}},{key:"getProject",value:function(e){var t=new o.c({"Content-Type":"application/json"});return this.http.get(this.backendUrl+"projects/"+e,{headers:t})}},{key:"getLittleProject",value:function(e){var t=new o.c({"Content-Type":"application/json"});return this.http.get(this.backendUrl+"projects/show_little/"+e,{headers:t})}},{key:"getProjectAdmin",value:function(e){var t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/project/"+e,{headers:t})}},{key:"getSelfProject",value:function(){var e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"students/project",{headers:e})}},{key:"getSelfLeadedProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"students",t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+e+"/leaded_project",{headers:t})}},{key:"createProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"students",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={headers:new o.c({Authorization:"Bearer "+this.auth.jwt})},r=new FormData;return r.append("title",t.title),r.append("image",n),r.append("descr",t.descr),r.append("leader_name",t.leader_name),r.append("cost",t.cost),r.append("first_day_begin",t.first_day_begin),r.append("first_day_end",t.first_day_end),r.append("second_day_begin",t.second_day_begin),r.append("second_day_end",t.second_day_end),r.append("min_grade",t.min_grade),r.append("max_grade",t.max_grade),r.append("min_participants",t.min_participants),r.append("max_participants",t.max_participants),this.http.post(this.backendUrl+e+"/store_project",r,a)}},{key:"toogleAuthorizedProject",value:function(e,t){var n=this,a=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+"admins/toogle_authorized/"+e,{authorized:t},{headers:a}).subscribe((function(e){e&&n.alert.alert(e.message),n.update.emit()}),(function(e){n.alert.error("Aktualisierung des Projektes fehlgeschlagen!",e.error)}))}},{key:"toogleEditableProject",value:function(e,t){var n=this,a=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.put(this.backendUrl+"admins/toogle_editable/"+e,{editable:t},{headers:a}).subscribe((function(e){n.alert.alert(e.message),n.update.emit()}),(function(e){n.alert.error("Aktualisierung des Projektes fehlgeschlagen!",e.error)}))}},{key:"putProject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"students",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=new o.c({Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+t+"/update_project",n,{headers:r}).subscribe((function(n){e.alert.alert(n.message),e.router.navigate("students"===t?[e.eventName+"/Sch\xfcler/"+a]:[e.eventName+"/"+e.projectNoun+"leiter/"+a]),e.update.emit()}),(function(t){e.alert.error("Aktualisierung des Projektes fehlgeschlagen!",t.error)}))}},{key:"touchUpProject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"students",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=new o.c({Authorization:"Bearer "+this.auth.jwt});this.http.put(this.backendUrl+t+"/touch_up_project",n,{headers:r}).subscribe((function(n){e.alert.alert(n.message),e.router.navigate("students"===t?[e.eventName+"/Sch\xfcler/"+a]:[e.eventName+"/"+e.projectNoun+"leiter/"+a]),e.update.emit()}),(function(t){e.alert.error("Aktualisierung des Projektes fehlgeschlagen!",t.error)}))}},{key:"deleteProject",value:function(e){var t=this,n=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.delete(this.backendUrl+"admins/destroy_project/"+e,{headers:n}).subscribe((function(e){t.alert.alert(e.message),t.update.emit()}),(function(e){t.alert.error("L\xf6schen des Projektes fehlgeschlagen!",e.error)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(c.a),i.Pb(s.a),i.Pb(d.a),i.Pb(l.g))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();