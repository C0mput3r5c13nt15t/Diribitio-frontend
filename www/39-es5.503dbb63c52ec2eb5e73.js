!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"1i7b":function(n,i,o){"use strict";o.r(i),o.d(i,"RegistrationPageModule",function(){return j});var d=o("ofXK"),r=o("3Pt+"),a=o("tyNb"),s=o("TEn/"),c=o("fXoL"),l=o("CoJz"),b=o("ZvwH"),u=o("r4Kj");function h(e,t){if(1&e&&(c.Mb(0,"ion-card-content"),c.Mb(1,"ion-label",11),c.pc(2),c.Lb(),c.Lb()),2&e){var n=c.Wb();c.yb(2),c.rc(" ",n.text," ")}}function p(e,t){if(1&e){var n=c.Nb();c.Mb(0,"ion-card",3),c.Mb(1,"form",6,7),c.Ub("ngSubmit",function(){return c.lc(n),c.Wb().appendFriendFunction()}),c.Mb(3,"ion-item",8),c.Mb(4,"ion-input",34),c.Ub("ngModelChange",function(e){return c.lc(n),c.Wb().appendFriend.first_name=e}),c.Lb(),c.Lb(),c.Mb(5,"ion-item",8),c.Mb(6,"ion-input",35),c.Ub("ngModelChange",function(e){return c.lc(n),c.Wb().appendFriend.last_name=e}),c.Lb(),c.Lb(),c.Mb(7,"ion-item",8),c.Mb(8,"ion-label",11),c.pc(9,"Klassenstufe"),c.Lb(),c.Mb(10,"ion-select",36),c.Ub("ngModelChange",function(e){return c.lc(n),c.Wb().appendFriend.grade=e}),c.Mb(11,"ion-select-option",13),c.pc(12,"5"),c.Lb(),c.Mb(13,"ion-select-option",14),c.pc(14,"6"),c.Lb(),c.Mb(15,"ion-select-option",15),c.pc(16,"7"),c.Lb(),c.Mb(17,"ion-select-option",16),c.pc(18,"8"),c.Lb(),c.Mb(19,"ion-select-option",17),c.pc(20,"9"),c.Lb(),c.Mb(21,"ion-select-option",18),c.pc(22,"10"),c.Lb(),c.Mb(23,"ion-select-option",19),c.pc(24,"11"),c.Lb(),c.Lb(),c.Lb(),c.Mb(25,"ion-item",8),c.Mb(26,"ion-radio-group",37),c.Ub("ngModelChange",function(e){return c.lc(n),c.Wb().appendFriend.letter=e}),c.Mb(27,"ion-item",21),c.Mb(28,"ion-label",11),c.pc(29,"A "),c.Lb(),c.Kb(30,"ion-radio",22),c.Lb(),c.Mb(31,"ion-item",21),c.Mb(32,"ion-label",11),c.pc(33,"B "),c.Lb(),c.Kb(34,"ion-radio",23),c.Lb(),c.Mb(35,"ion-item",21),c.Mb(36,"ion-label",11),c.pc(37,"C "),c.Lb(),c.Kb(38,"ion-radio",24),c.Lb(),c.Mb(39,"ion-item",21),c.Mb(40,"ion-label",11),c.pc(41,"D "),c.Lb(),c.Kb(42,"ion-radio",25),c.Lb(),c.Lb(),c.Lb(),c.Mb(43,"div",32),c.Mb(44,"ion-button",33),c.pc(45,"Als Freund hinzuf\xfcgen"),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&e){var i=c.jc(2),o=c.Wb();c.yb(4),c.bc("ngModel",o.appendFriend.first_name),c.yb(2),c.bc("ngModel",o.appendFriend.last_name),c.yb(4),c.bc("selectedText",o.appendFriend.grade)("ngModel",o.appendFriend.grade),c.yb(16),c.bc("ngModel",o.appendFriend.letter),c.yb(18),c.bc("disabled",i.invalid)}}function g(e,t){if(1&e){var n=c.Nb();c.Mb(0,"ion-item",21),c.pc(1),c.Mb(2,"ion-button",39),c.Ub("click",function(){c.lc(n);var e=t.$implicit;return c.Wb(2).removeFriendFunction(e)}),c.Kb(3,"ion-icon",40),c.Lb(),c.Lb()}if(2&e){var i=t.$implicit;c.yb(1),c.uc(" ",i.first_name," ",i.last_name," ",i.grade,"",i.letter," ")}}function f(e,t){if(1&e&&(c.Mb(0,"ion-item",8),c.Mb(1,"ion-list"),c.oc(2,g,4,4,"ion-item",38),c.Lb(),c.Lb()),2&e){var n=c.Wb();c.yb(2),c.bc("ngForOf",n.friendsList)}}function M(e,t){if(1&e&&(c.Mb(0,"ion-item",8),c.Mb(1,"ion-label",11),c.pc(2),c.Lb(),c.Lb()),2&e){var n=c.Wb();c.yb(2),c.uc(" ",n.definiteArticle," ",n.projectNoun," muss die Klassenstufen ",n.lowestGrade," bis ",n.highestGrade," erlauben. ")}}function m(e,t){if(1&e&&(c.Mb(0,"ion-item",3),c.Mb(1,"ion-label",41),c.pc(2),c.Lb(),c.Lb()),2&e){var n=c.Wb();c.yb(2),c.sc(" Du kanst leider keine Freunde ausw\xe4hlen, da du selbst ",n.indefiniteArticle," ",n.projectNoun," erstellt hast. ")}}function L(e,t){if(1&e&&(c.Mb(0,"ion-select-option",42),c.pc(1),c.Lb()),2&e){var n=t.$implicit;c.bc("value",n.id),c.yb(1),c.tc("",n.title," (",n.min_grade,". - ",n.max_grade,".Klasse)")}}function S(e,t){if(1&e&&(c.Mb(0,"ion-select-option",42),c.pc(1),c.Lb()),2&e){var n=t.$implicit;c.bc("value",n.id),c.yb(1),c.tc("",n.title," (",n.min_grade,". - ",n.max_grade,".Klasse)")}}function v(e,t){if(1&e&&(c.Mb(0,"ion-select-option",42),c.pc(1),c.Lb()),2&e){var n=t.$implicit;c.bc("value",n.id),c.yb(1),c.tc("",n.title," (",n.min_grade,". - ",n.max_grade,".Klasse)")}}var _,y,w=[{path:"",component:(_=function(){function n(t,i,o,d,r,a){e(this,n),this.projectsService=t,this.studentsService=i,this.activatedRoute=o,this.router=d,this.alertCtrl=r,this.config=a,this.subscriptions=[],this.loadedProjects=[],this.possibleProjects=[],this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:1},this.appendFriend={id:0,first_name:"",last_name:"",grade:0,letter:""},this.friendsList=[],this.definiteArticle=this.config.definite_article,this.indefiniteArticle=this.config.indefinite_article.toLowerCase(),this.projectsNoun=this.config.app_config.projects_noun,this.projectNoun=this.config.app_config.project_noun,this.eventName=this.config.app_config.event_name}var i,o,d;return i=n,(o=[{key:"ngOnInit",value:function(){var e=this;this.text=this.config.get_content("user-registration"),this.activatedRoute.paramMap.subscribe(function(t){t.has("ParticipantName")?e.studentUrl=t.get("ParticipantName"):e.router.navigate([""])}),this.getProjects(),this.getStudent(),this.subscriptions.push(this.projectsService.update.subscribe(function(){return e.getProjects()}),this.studentsService.update.subscribe(function(){return e.getStudent()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getStudent",value:function(){var e=this;this.studentsService.getSelfStudent().subscribe(function(t){e.loadedStudent=t.data,e.lowestGrade=+t.data.grade,e.highestGrade=+t.data.grade,e.friendsList=[],e.studentsService.getFriends().subscribe(function(t){e.friendsList=t.data,e.friendsList.forEach(function(t){+t.grade<=e.lowestGrade&&(e.lowestGrade=+t.grade),+t.grade>=e.highestGrade&&(e.highestGrade=+t.grade),e.filterProjects()})})})}},{key:"userChanges",value:function(){var e=this;this.lowestGrade=+this.loadedStudent.grade,this.highestGrade=+this.loadedStudent.grade,this.friendsList.forEach(function(t){+t.grade<=e.lowestGrade&&(e.lowestGrade=+t.grade),+t.grade>=e.highestGrade&&(e.highestGrade=+t.grade)}),this.filterProjects()}},{key:"getProjects",value:function(){var e=this;this.projectsService.getAllProjects().subscribe(function(t){e.loadedProjects=t.data})}},{key:"validateProject",value:function(e){return this.lowestGrade>=+e.min_grade&&+e.max_grade>=this.highestGrade&&e.id!==this.loadedStudent.project_id&&!!e.authorized}},{key:"filterProjects",value:function(){var e=this;this.possibleProjects=[],this.loadedProjects.forEach(function(t){e.validateProject(t)&&e.possibleProjects.push(t)})}},{key:"appendFriendFunction",value:function(){var e=this;this.studentsService.getStudentID(this.appendFriend).subscribe(function(t){0!=t.id?(e.appendFriend.id=t.id,e.friendsList.length<3&&!e.friendsList.some(function(e){return e.id===t.id})&&(e.friendsList.push(JSON.parse(JSON.stringify(e.appendFriend))),console.log(e.friendsList),+e.appendFriend.grade<=e.lowestGrade&&(e.lowestGrade=+e.appendFriend.grade),+e.appendFriend.grade>=e.highestGrade&&(e.highestGrade=+e.appendFriend.grade)),e.filterProjects()):e.alertCtrl.create({header:"Fehler",message:"Der angegebene Sch\xfcler konnte nicht gefunden werden!",buttons:[{text:"Ok",role:"cancel"}]}).then(function(e){e.present()})})}},{key:"removeFriendFunction",value:function(e){var t=this;this.friendsList.splice(this.friendsList.indexOf(e),1),this.lowestGrade=+this.loadedStudent.grade,this.highestGrade=+this.loadedStudent.grade,this.friendsList.forEach(function(e){+e.grade<t.lowestGrade&&(t.lowestGrade=+e.grade),+e.grade>t.highestGrade&&(t.highestGrade=+e.grade)}),this.filterProjects()}},{key:"registrate",value:function(){this.loadedStudent.first_wish!=this.loadedStudent.project_id&&this.loadedStudent.second_wish!=this.loadedStudent.project_id&&this.loadedStudent.third_wish!=this.loadedStudent.project_id?this.loadedStudent.first_wish!==this.loadedStudent.second_wish&&this.loadedStudent.first_wish!==this.loadedStudent.third_wish&&this.loadedStudent.second_wish!==this.loadedStudent.third_wish?3===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=this.friendsList[1].id,this.loadedStudent.third_friend=this.friendsList[2].id,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):2===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=this.friendsList[1].id,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):1===this.friendsList.length?(this.loadedStudent.first_friend=this.friendsList[0].id,this.loadedStudent.second_friend=0,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):(this.loadedStudent.first_friend=0,this.loadedStudent.second_friend=0,this.loadedStudent.third_friend=0,this.studentsService.putSelfStudent(this.loadedStudent,this.studentUrl)):this.alertCtrl.create({header:"Fehler",message:"Du must drei verschiedene Projektw\xfcnsche angeben!",buttons:[{text:"Ok",role:"cancel"}]}).then(function(e){e.present()}):this.alertCtrl.create({header:"Fehler",message:"Du kannst nicht an deinem eigenen Projekt teilnehmen!",buttons:[{text:"Ok",role:"cancel"}]}).then(function(e){e.present()})}}])&&t(i.prototype,o),d&&t(i,d),n}(),_.\u0275fac=function(e){return new(e||_)(c.Jb(l.a),c.Jb(b.a),c.Jb(a.a),c.Jb(a.g),c.Jb(s.a),c.Jb(u.a))},_.\u0275cmp=c.Db({type:_,selectors:[["app-registration"]],decls:81,vars:20,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["name","ParticipantForm",3,"ngSubmit"],["form","ngForm"],["color","items"],["color","text","required","","name","ParticipantFirstName","placeholder","Vorname","type","text",3,"ngModel","ngModelChange"],["color","text","required","","name","ParticipantLastName","placeholder","Nachname","type","text",3,"ngModel","ngModelChange"],["color","text"],["required","","name","ParticipantGrade","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ionChange","ngModelChange"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["required","","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","items","lines","none"],["color","text","slot","start","value","a"],["color","text","slot","start","value","b"],["color","text","slot","start","value","c"],["color","text","slot","start","value","d"],["color","background",4,"ngIf"],["color","items",4,"ngIf"],["required","","placeholder","1. Wunsch","name","ParticipantFirstWish","okText","Ausw\xe4hlen","cancelText","Abbrechen","type","number",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["required","","placeholder","2. Wunsch","name","ParticipantSecondWish","okText","Ausw\xe4hlen","cancelText","Abbrechen","type","number",3,"ngModel","ngModelChange"],["required","","placeholder","3. Wunsch","name","ParticipantThirdWish","okText","Ausw\xe4hlen","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","text","type","text","placeholder","Vorname","name","ExchangeSecondFirstName",3,"ngModel","ngModelChange"],["color","text","type","text","placeholder","Nachname","name","ExchangeSecondLastName",3,"ngModel","ngModelChange"],["name","ParticipantGrade","cancelText","Abbrechen","doneText","Ok",3,"selectedText","ngModel","ngModelChange"],["color","buttons","name","ParticipantClass",3,"ngModel","ngModelChange"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","buttons","slot","end",3,"click"],["color","text","name","close"],["color","danger"],[3,"value"]],template:function(e,t){if(1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-button",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.pc(5,"Anmeldung"),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content",3),c.Mb(7,"ion-card",4),c.Mb(8,"ion-card-header",3),c.Mb(9,"ion-card-title"),c.pc(10),c.Lb(),c.Lb(),c.oc(11,h,3,1,"ion-card-content",5),c.Mb(12,"ion-card-content"),c.Mb(13,"form",6,7),c.Ub("ngSubmit",function(){return t.registrate()}),c.Mb(15,"ion-list"),c.Mb(16,"ion-item",8),c.Mb(17,"ion-input",9),c.Ub("ngModelChange",function(e){return t.loadedStudent.first_name=e}),c.Lb(),c.Lb(),c.Mb(18,"ion-item",8),c.Mb(19,"ion-input",10),c.Ub("ngModelChange",function(e){return t.loadedStudent.last_name=e}),c.Lb(),c.Lb(),c.Mb(20,"ion-item",8),c.Mb(21,"ion-label",11),c.pc(22,"Klassenstufe"),c.Lb(),c.Mb(23,"ion-select",12),c.Ub("ionChange",function(){return t.userChanges()})("ngModelChange",function(e){return t.loadedStudent.grade=e}),c.Mb(24,"ion-select-option",13),c.pc(25,"5"),c.Lb(),c.Mb(26,"ion-select-option",14),c.pc(27,"6"),c.Lb(),c.Mb(28,"ion-select-option",15),c.pc(29,"7"),c.Lb(),c.Mb(30,"ion-select-option",16),c.pc(31,"8"),c.Lb(),c.Mb(32,"ion-select-option",17),c.pc(33,"9"),c.Lb(),c.Mb(34,"ion-select-option",18),c.pc(35,"10"),c.Lb(),c.Mb(36,"ion-select-option",19),c.pc(37,"11"),c.Lb(),c.Lb(),c.Lb(),c.Mb(38,"ion-item",8),c.Mb(39,"ion-radio-group",20),c.Ub("ngModelChange",function(e){return t.loadedStudent.letter=e}),c.Mb(40,"ion-item",21),c.Mb(41,"ion-label",11),c.pc(42,"A "),c.Lb(),c.Kb(43,"ion-radio",22),c.Lb(),c.Mb(44,"ion-item",21),c.Mb(45,"ion-label",11),c.pc(46,"B "),c.Lb(),c.Kb(47,"ion-radio",23),c.Lb(),c.Mb(48,"ion-item",21),c.Mb(49,"ion-label",11),c.pc(50,"C "),c.Lb(),c.Kb(51,"ion-radio",24),c.Lb(),c.Mb(52,"ion-item",21),c.Mb(53,"ion-label",11),c.pc(54,"D "),c.Lb(),c.Kb(55,"ion-radio",25),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.oc(56,p,46,6,"ion-card",26),c.Mb(57,"ion-list"),c.Mb(58,"ion-title",3),c.pc(59,"Freunde"),c.Lb(),c.oc(60,f,3,1,"ion-item",27),c.oc(61,M,3,4,"ion-item",27),c.oc(62,m,3,2,"ion-item",26),c.Mb(63,"ion-item",8),c.Mb(64,"ion-label",11),c.pc(65,"1. Wunsch"),c.Lb(),c.Mb(66,"ion-select",28),c.Ub("ngModelChange",function(e){return t.loadedStudent.first_wish=e}),c.oc(67,L,2,4,"ion-select-option",29),c.Lb(),c.Lb(),c.Mb(68,"ion-item",8),c.Mb(69,"ion-label",11),c.pc(70,"2. Wunsch"),c.Lb(),c.Mb(71,"ion-select",30),c.Ub("ngModelChange",function(e){return t.loadedStudent.second_wish=e}),c.oc(72,S,2,4,"ion-select-option",29),c.Lb(),c.Lb(),c.Mb(73,"ion-item",8),c.Mb(74,"ion-label",11),c.pc(75,"3. Wunsch"),c.Lb(),c.Mb(76,"ion-select",31),c.Ub("ngModelChange",function(e){return t.loadedStudent.third_wish=e}),c.oc(77,v,2,4,"ion-select-option",29),c.Lb(),c.Lb(),c.Lb(),c.Mb(78,"div",32),c.Mb(79,"ion-button",33),c.pc(80,"Anmelden"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e){var n=c.jc(14);c.yb(3),c.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),c.yb(7),c.rc("F\xfcr ",t.projectsNoun," Anmelden"),c.yb(1),c.bc("ngIf",t.text),c.yb(6),c.bc("ngModel",t.loadedStudent.first_name),c.yb(2),c.bc("ngModel",t.loadedStudent.last_name),c.yb(4),c.bc("selectedText",t.loadedStudent.grade)("ngModel",t.loadedStudent.grade),c.yb(16),c.bc("ngModel",t.loadedStudent.letter),c.yb(17),c.bc("ngIf",0==t.loadedStudent.project_id),c.yb(4),c.bc("ngIf",0==t.loadedStudent.project_id||null==t.loadedStudent.project_id),c.yb(1),c.bc("ngIf",0==t.loadedStudent.project_id&&1===t.loadedStudent.role||null==t.loadedStudent.project_id&&1===t.loadedStudent.role),c.yb(1),c.bc("ngIf",0!=t.loadedStudent.project_id&&null!=t.loadedStudent.project_id||2===t.loadedStudent.role),c.yb(4),c.bc("ngModel",t.loadedStudent.first_wish),c.yb(1),c.bc("ngForOf",t.possibleProjects),c.yb(4),c.bc("ngModel",t.loadedStudent.second_wish),c.yb(1),c.bc("ngForOf",t.possibleProjects),c.yb(4),c.bc("ngModel",t.loadedStudent.third_wish),c.yb(1),c.bc("ngForOf",t.possibleProjects),c.yb(2),c.bc("disabled",n.invalid)}},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.p,s.j,s.l,s.n,d.j,s.k,r.k,r.g,r.h,s.B,s.x,s.w,s.ab,r.j,r.f,r.i,s.A,s.I,s.Z,s.J,s.D,s.C,s.X,d.i,s.u],styles:[""]}),_)}],j=((y=function t(){e(this,t)}).\u0275mod=c.Hb({type:y}),y.\u0275inj=c.Gb({factory:function(e){return new(e||y)},imports:[[d.b,r.a,s.S,a.k.forChild(w)]]}),y)}}])}();