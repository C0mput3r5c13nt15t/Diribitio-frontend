(window.webpackJsonp=window.webpackJsonp||[]).push([[26,30,31,40,41],{"9pHg":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("fXoL"),o=n("tk/3"),r=n("18Le"),s=n("wxHw");let a=(()=>{class t{constructor(t,e,n){this.http=t,this.auth=e,this.config=n,this.update=new i.n,this.backendUrl=this.config.backend_config.url}getSchedule(){const t=new o.c({"Content-Type":"application/json"});return this.http.get(this.backendUrl+"schedule/1",{headers:t})}putSchedule(t){const e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.put(this.backendUrl+"admins/update_schedule",t,{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(r.a),i.Pb(s.a))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},iKym:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminPagePageModule",(function(){return k}));var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),s=n("TEn/"),a=n("fXoL"),c=n("kXZ0"),l=n("9pHg"),h=n("wxHw"),u=n("YdJ5");function d(t,e){if(1&t&&(a.Lb(0,"ion-card-content"),a.Lb(1,"ion-label",18),a.oc(2),a.Kb(),a.Kb()),2&t){const t=a.Vb();a.xb(2),a.qc(" ",t.text," ")}}function b(t,e){if(1&t){const t=a.Mb();a.Lb(0,"ion-card-content"),a.Lb(1,"ion-label",18),a.oc(2," Sie heaben ihre E-Mail noch nicht verifiziert. Bitte holen sie dies nach bevor sie fortfahren. "),a.Kb(),a.Lb(3,"div",16),a.Lb(4,"ion-button",17),a.Tb("click",(function(){return a.kc(t),a.Vb().sendVerificationEmail()})),a.oc(5,"E-Mail senden"),a.Kb(),a.Kb(),a.Kb()}}const p=function(){return["./Tauschanfragen"]};function g(t,e){if(1&t&&(a.Lb(0,"ion-item",10),a.Jb(1,"ion-icon",12),a.oc(2,"Tauschanfragen verwalten "),a.Kb()),2&t){const t=a.Vb();a.ac("disabled",null==t.loadedAdmin.email_verified_at)("routerLink",a.ec(2,p))}}const m=function(){return["./Zeitplan verwalten"]},f=function(){return["./App verwalten"]},w=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,r){this.activatedRoute=t,this.router=e,this.adminsService=n,this.scheduleService=i,this.config=o,this.alert=r,this.loadedAdmin={id:0,user_name:"",email:"",password:""},this.schedule={id:1,begin:null,control:null,registration:null,sort_students:null,exchange:null,projects:null,end:null},this.buttonPressed=!0,this.projectsNoun=this.config.app_config.projects_noun,this.projectNoun=this.config.app_config.project_noun}ngOnInit(){this.projectsNoun=this.config.app_config.projects_noun,this.projectNoun=this.config.app_config.project_noun,this.text=this.config.get_content("admin-page"),this.currentDate=Object(i.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(t=>{t.has("AdminName")||this.router.navigate([""])}),this.scheduleService.getSchedule().subscribe(t=>{this.schedule=t.data}),this.getAdmin(),this.adminsService.update.subscribe(()=>this.getAdmin())}getAdmin(){this.adminsService.getSelfAdmin().subscribe(t=>{this.loadedAdmin=t.data,null==this.loadedAdmin.email_verified_at&&(this.buttonPressed=!1)})}refresh(){this.getAdmin(),this.scheduleService.getSchedule().subscribe(t=>{this.schedule=t.data})}sendVerificationEmail(){this.adminsService.sendAuthentificationEmailSubscribe().subscribe(t=>{this.alert.alert(t.message),this.buttonPressed=!0},t=>{this.alert.error("Versandt der Verifizierungs E-Mail fehlgeschlagen!",t.error)})}logout(){this.adminsService.logOutAdmin()}}return t.\u0275fac=function(e){return new(e||t)(a.Ib(r.a),a.Ib(r.g),a.Ib(c.a),a.Ib(l.a),a.Ib(h.a),a.Ib(u.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-admin-page"]],decls:35,vars:16,consts:[["color","menu"],["color","buttons","slot","end",3,"click"],["name","log-out"],["color","background"],["color","background",1,"content"],["color","items","lines","none"],["color","buttons"],["slot","end","color","buttons",3,"click"],["name","refresh"],[4,"ngIf"],["color","items",3,"disabled","routerLink"],["color","text","slot","start","name","apps"],["color","text","slot","start","name","people"],["color","items",3,"disabled","routerLink",4,"ngIf"],["color","text","slot","start","name","calendar"],["color","text","slot","start","name","construct"],[1,"ion-padding"],["color","buttons","expand","block",1,"ion-no-margin",3,"click"],["color","text"]],template:function(t,e){1&t&&(a.Lb(0,"ion-header"),a.Lb(1,"ion-toolbar",0),a.Lb(2,"ion-title"),a.oc(3,"Admin"),a.Kb(),a.Lb(4,"ion-button",1),a.Tb("click",(function(){return e.logout()})),a.Jb(5,"ion-icon",2),a.Kb(),a.Kb(),a.Kb(),a.Lb(6,"ion-content",3),a.Lb(7,"ion-card",4),a.Lb(8,"ion-card-header"),a.Lb(9,"ion-item",5),a.Lb(10,"ion-card-title"),a.Lb(11,"ion-label",6),a.oc(12),a.Kb(),a.Kb(),a.Lb(13,"ion-button",7),a.Tb("click",(function(){return e.refresh()})),a.Jb(14,"ion-icon",8),a.Kb(),a.Kb(),a.Kb(),a.nc(15,d,3,1,"ion-card-content",9),a.nc(16,b,6,0,"ion-card-content",9),a.Lb(17,"ion-card-content"),a.Lb(18,"ion-list"),a.Lb(19,"ion-item",10),a.Jb(20,"ion-icon",11),a.oc(21),a.Kb(),a.Lb(22,"ion-item",10),a.Jb(23,"ion-icon",12),a.oc(24),a.Kb(),a.nc(25,g,3,3,"ion-item",13),a.Lb(26,"ion-item",10),a.Jb(27,"ion-icon",14),a.oc(28,"Zeitplan verwalten "),a.Kb(),a.Lb(29,"ion-item",10),a.Jb(30,"ion-icon",15),a.oc(31,"App verwalten "),a.Kb(),a.Kb(),a.Lb(32,"div",16),a.Lb(33,"ion-button",17),a.Tb("click",(function(){return e.logout()})),a.oc(34,"Abmelden"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Kb()),2&t&&(a.xb(12),a.qc("Wilkommen ",e.loadedAdmin.user_name,""),a.xb(3),a.ac("ngIf",e.text),a.xb(1),a.ac("ngIf",null==e.loadedAdmin.email_verified_at&&!e.buttonPressed),a.xb(3),a.bc("routerLink","./",e.projectsNoun,""),a.ac("disabled",null==e.loadedAdmin.email_verified_at),a.xb(2),a.qc("",e.projectsNoun," verwalten "),a.xb(1),a.bc("routerLink","./Sch\xfcler und ",e.projectNoun,"leiter verwalten"),a.ac("disabled",null==e.loadedAdmin.email_verified_at),a.xb(2),a.qc("Sch\xfcler und ",e.projectNoun,"leiter verwalten "),a.xb(1),a.ac("ngIf",e.currentDate>e.schedule.exchange&&e.currentDate<=e.schedule.projects),a.xb(1),a.ac("disabled",null==e.loadedAdmin.email_verified_at)("routerLink",a.ec(14,m)),a.xb(3),a.ac("disabled",null==e.loadedAdmin.email_verified_at)("routerLink",a.ec(15,f)))},directives:[s.t,s.R,s.P,s.h,s.u,s.p,s.j,s.l,s.x,s.n,s.A,i.j,s.k,s.B,s.Y,r.h],styles:["ion-col[_ngcontent-%COMP%]{height:80px}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[i.b,o.a,s.S,r.k.forChild(w)]]}),t})()},kXZ0:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),o=n("tk/3"),r=n("18Le"),s=n("YdJ5"),a=n("wxHw"),c=n("tyNb");let l=(()=>{class t{constructor(t,e,n,o,r){this.http=t,this.auth=e,this.alert=n,this.config=o,this.router=r,this.update=new i.n,this.backendUrl=this.config.backend_config.url,this.eventName=this.config.app_config.event_name}signUpAdmin(t,e){const n=new o.c({"Content-Type":"application/json"});this.http.post(this.backendUrl+"admins/register",t,{headers:n}).subscribe(t=>{t.token&&(this.auth.set_jwt(t.token),this.auth.setLoggedIn(!0),this.router.navigate([this.eventName+"/Anmeldung"])),this.alert.alert("Dein Account wurde erfolgreich erstellt!"),this.sendAuthentificationEmail(),this.update.emit(),e.reset()},t=>{this.alert.error("Erstellung des Accounts fehlgeschlagen!",t.error)})}sendAuthentificationEmail(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"admins/email/resend",null,{headers:t}).subscribe(t=>{this.alert.alert(t.message)},t=>{this.alert.error("Versandt der Verifizierungs E-Mail fehlgeschlagen!",t.error)})}sendAuthentificationEmailSubscribe(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"admins/email/resend",null,{headers:t})}logInAdmin(t){const e=new o.c({"Content-Type":"application/json"});return this.http.post(this.backendUrl+"admins/login",t,{headers:e})}logOutAdmin(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"admins/logout",null,{headers:t}).subscribe(t=>{this.alert.alert(t.message),this.auth.setLoggedIn(!1),this.router.navigate([this.eventName+"/Anmeldung"])},t=>{this.alert.error("Logout fehlgeschlagen!",t.error)})}getSelfAdmin(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/self",{headers:t})}getAllSignUpEmails(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"sign_up_emails",{headers:t})}createSignUpEmail(t){const e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"sign_up_emails",t,{headers:e})}deleteSignUpEmail(t){const e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.delete(this.backendUrl+"sign_up_emails/"+t,{headers:e}).subscribe(t=>{this.alert.alert(t.message),this.update.emit()},t=>{this.alert.error("Sperrung der E-Mail fehlgeschlagen!",t.error)})}createSortingProposal(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.post(this.backendUrl+"admins/create_sorting_proposal",null,{headers:t})}requestSortingProposal(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});return this.http.get(this.backendUrl+"admins/request_sorting_proposal",{headers:t})}editSortingProposal(t){const e=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"admins/edit_sorting_proposal",t,{headers:e}).subscribe(t=>{this.alert.alert(t.message)},t=>{this.alert.error("Erstellung eines Backups fehlgeschlagen!",t.error)})}applySortingProposal(){const t=new o.c({"Content-Type":"application/json",Authorization:"Bearer "+this.auth.jwt});this.http.post(this.backendUrl+"admins/apply_sorting_proposal",null,{headers:t}).subscribe(t=>{this.alert.alert(t.message)},t=>{this.alert.error("Erstellung eines Backups fehlgeschlagen!",t.error)})}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(r.a),i.Pb(s.a),i.Pb(a.a),i.Pb(c.g))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);