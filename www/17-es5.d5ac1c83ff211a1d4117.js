!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{HFXa:function(i,t,o){"use strict";o.r(t),o.d(t,"AdminLogsPageModule",function(){return v});var a=o("ofXK"),c=o("3Pt+"),r=o("tyNb"),l=o("TEn/"),b=o("fXoL"),s=o("OeS+"),u=o("uVPj"),d=o("3LUQ"),g=o("r4Kj");function m(e,n){if(1&e&&(b.Mb(0,"ion-card-content"),b.Mb(1,"ion-label",14),b.pc(2),b.Lb(),b.Lb()),2&e){var i=b.Wb();b.yb(2),b.rc(" ",i.text," ")}}function p(e,n){if(1&e){var i=b.Nb();b.Mb(0,"ion-item",16),b.Mb(1,"ion-card",3),b.Mb(2,"ion-card-content"),b.Mb(3,"ion-text",14),b.pc(4),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"ion-buttons",17),b.Ub("click",function(){b.lc(i);var e=n.$implicit;return b.Wb(2).deleteSignUpEmail(e.id)}),b.Kb(6,"ion-icon",18),b.Lb(),b.Lb()}if(2&e){var t=n.$implicit;b.yb(4),b.qc(t.email)}}function f(e,n){if(1&e&&(b.Mb(0,"ion-card-content"),b.oc(1,p,7,1,"ion-item",15),b.Lb()),2&e){var i=b.Wb();b.yb(1),b.bc("ngForOf",i.SignUpEmails)}}var h,y,M=[{path:"",component:(h=function(){function i(n,t,o,c,r,l){e(this,i),this.activatedRoute=n,this.scheduleService=t,this.adminsService=o,this.alertCtrl=c,this.alert=r,this.config=l,this.subscriptions=[],this.SignUpEmails=[],this.SignUpEmail={id:0,email:"",email_confirmation:""},this.schedule={id:1,begin:Object(a.n)(new Date,"yyyy-MM-dd","en"),control:Object(a.n)(new Date,"yyyy-MM-dd","en"),registration:Object(a.n)(new Date,"yyyy-MM-dd","en"),sort_students:Object(a.n)(new Date,"yyyy-MM-dd","en"),exchange:Object(a.n)(new Date,"yyyy-MM-dd","en"),projects:Object(a.n)(new Date,"yyyy-MM-dd","en"),end:Object(a.n)(new Date,"yyyy-MM-dd","en")},this.eventName=this.config.app_config.event_name}var t,o,c;return t=i,(o=[{key:"ngOnInit",value:function(){var e=this;this.text=this.config.get_content("admin-logs"),this.currentDate=Object(a.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(function(n){e.adminUrl=n.get("AdminName")}),this.getSchedule(),this.getSignUpemails(),this.subscriptions.push(this.scheduleService.update.subscribe(function(){return e.getSchedule()}),this.adminsService.update.subscribe(function(){return e.getSignUpemails()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getSchedule",value:function(){var e=this;this.scheduleService.getSchedule().subscribe(function(n){e.schedule=n.data})}},{key:"getSignUpemails",value:function(){var e=this;this.adminsService.getAllSignUpEmails().subscribe(function(n){e.SignUpEmails=n.data})}},{key:"postSignUpEmail",value:function(e){var n=this;this.adminsService.createSignUpEmail(this.SignUpEmail).subscribe(function(i){n.SignUpEmails.push(i.data),n.alert.alert(i.message),e.reset(),n.adminsService.update.emit()},function(e){n.alert.error("Freigeben der E-Mail fehlgeschlagen!",e.error)})}},{key:"deleteSignUpEmail",value:function(e){var n=this;this.alertCtrl.create({header:"Sind sie sicher?",message:"Wollen sie diese E-Mail wirklich sperren?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Sperren",handler:function(){n.SignUpEmail.email===n.SignUpEmail.email_confirmation?(n.SignUpEmails=n.SignUpEmails.filter(function(n){return e!==n.id}),n.adminsService.deleteSignUpEmail(e)):n.alert.error("Die angegebenen E-Mails stimmen nicht \xfcberein.")}}]}).then(function(e){e.present()})}}])&&n(t.prototype,o),c&&n(t,c),i}(),h.\u0275fac=function(e){return new(e||h)(b.Jb(r.a),b.Jb(s.a),b.Jb(u.a),b.Jb(l.a),b.Jb(d.a),b.Jb(g.a))},h.\u0275cmp=b.Db({type:h,selectors:[["app-admin-logs"]],decls:26,vars:7,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["name","SignUpEmailForm",1,"content",3,"ngSubmit"],["signUpEmail","ngForm"],["color","background","color","background"],["color","items"],["color","text","name","Email","placeholder","E-Mail","required","","type","email",3,"ngModel","ngModelChange"],["color","text","name","Email","placeholder","E-Mail-Best\xe4tigung","required","","type","email",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],["color","text"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],[3,"click"],["color","danger","name","close"]],template:function(e,n){if(1&e){var i=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",0),b.Mb(2,"ion-button",1),b.Kb(3,"ion-back-button",2),b.Lb(),b.Mb(4,"ion-title"),b.pc(5,"Appverwaltung"),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",3),b.Mb(7,"ion-card",4),b.Mb(8,"ion-card-header"),b.Mb(9,"ion-card-title"),b.pc(10,"E-Mails f\xfcr Admin-Accounts verwalten"),b.Lb(),b.Lb(),b.oc(11,m,3,1,"ion-card-content",5),b.oc(12,f,2,1,"ion-card-content",5),b.Mb(13,"ion-card-content"),b.Mb(14,"form",6,7),b.Ub("ngSubmit",function(){b.lc(i);var e=b.jc(15);return n.postSignUpEmail(e)}),b.Mb(16,"ion-card",8),b.Mb(17,"ion-card-content"),b.Mb(18,"ion-list"),b.Mb(19,"ion-item",9),b.Mb(20,"ion-input",10),b.Ub("ngModelChange",function(e){return n.SignUpEmail.email=e}),b.Lb(),b.Lb(),b.Mb(21,"ion-item",9),b.Mb(22,"ion-input",11),b.Ub("ngModelChange",function(e){return n.SignUpEmail.email_confirmation=e}),b.Lb(),b.Lb(),b.Lb(),b.Mb(23,"div",12),b.Mb(24,"ion-button",13),b.pc(25,"Freigeben"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&e){var t=b.jc(15);b.yb(3),b.dc("defaultHref","",n.eventName,"/Admin/",n.adminUrl,""),b.yb(8),b.bc("ngIf",n.text),b.yb(1),b.bc("ngIf",n.SignUpEmails.length),b.yb(8),b.bc("ngModel",n.SignUpEmail.email),b.yb(2),b.bc("ngModel",n.SignUpEmail.email_confirmation),b.yb(2),b.bc("disabled",t.invalid||n.currentDate<=n.schedule.begin&&n.currentDate>n.schedule.sort_students)}},directives:[l.t,l.R,l.h,l.e,l.f,l.P,l.p,l.j,l.l,l.n,a.j,l.k,c.k,c.g,c.h,l.B,l.x,l.w,l.ab,c.j,c.f,c.i,l.A,a.i,l.N,l.i,l.u],styles:["ion-col[_ngcontent-%COMP%]{height:80px}"]}),h)}],v=((y=function n(){e(this,n)}).\u0275mod=b.Hb({type:y}),y.\u0275inj=b.Gb({factory:function(e){return new(e||y)},imports:[[a.b,c.a,l.S,r.k.forChild(M)]]}),y)}}])}();