!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{V6Bk:function(n,s,i){"use strict";i.r(s),i.d(s,"StudentMessagesPageModule",function(){return S});var o=i("ofXK"),a=i("3Pt+"),r=i("tyNb"),c=i("TEn/"),b=i("fXoL"),d=i("3LUQ"),u=i("CoJz"),l=i("ZvwH"),g=i("Hzbo"),f=i("r4Kj");function m(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-buttons",20),b.Ub("click",function(){b.lc(n);var e=b.Wb().$implicit;return b.Wb(2).delete(e)}),b.Kb(1,"ion-icon",21),b.Lb()}}function h(e,t){if(1&e&&(b.Mb(0,"ion-card",22),b.Mb(1,"ion-card-content"),b.Mb(2,"ion-text",23),b.pc(3),b.Lb(),b.Kb(4,"br"),b.Mb(5,"ion-text",24),b.pc(6),b.Lb(),b.Lb(),b.Lb()),2&e){var n=b.Wb().$implicit;b.yb(3),b.qc(n.sender_name),b.yb(3),b.qc(n.message)}}function p(e,t){if(1&e&&(b.Mb(0,"ion-card",25),b.Mb(1,"ion-card-content"),b.Mb(2,"ion-text",23),b.pc(3),b.Lb(),b.Kb(4,"br"),b.Mb(5,"ion-text",24),b.pc(6),b.Lb(),b.Lb(),b.Lb()),2&e){var n=b.Wb().$implicit;b.yb(3),b.qc(n.sender_name),b.yb(3),b.qc(n.message)}}function v(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-buttons",26),b.Ub("click",function(){b.lc(n);var e=b.Wb().$implicit;return b.Wb(2).delete(e)}),b.Kb(1,"ion-icon",21),b.Lb()}}function _(e,t){if(1&e&&(b.Mb(0,"ion-item",15),b.oc(1,m,2,0,"ion-buttons",16),b.oc(2,h,7,2,"ion-card",17),b.oc(3,p,7,2,"ion-card",18),b.oc(4,v,2,0,"ion-buttons",19),b.Lb()),2&e){var n=t.$implicit,s=b.Wb(2);b.yb(1),b.bc("ngIf",n.sender_name==s.loadedStudent.user_name),b.yb(1),b.bc("ngIf",n.sender_name==s.loadedStudent.user_name),b.yb(1),b.bc("ngIf",n.sender_name!=s.loadedStudent.user_name),b.yb(1),b.bc("ngIf",n.sender_name!=s.loadedStudent.user_name)}}function M(e,t){if(1&e&&(b.Mb(0,"ion-list",13),b.oc(1,_,5,4,"ion-item",14),b.Lb()),2&e){var n=b.Wb();b.yb(1),b.bc("ngForOf",n.leadedProject.messages)}}var y,k,L=[{path:"",component:(y=function(){function n(t,s,i,o,a,r,c){e(this,n),this.activatedRoute=t,this.router=s,this.alert=i,this.projectsService=o,this.studentsService=a,this.messagesService=r,this.config=c,this.subscriptions=[],this.leadedProject={id:0,authorized:0,editable:0,title:"",image:"",descr:"",leader_name:"",leader_id:0,cost:0,first_day_begin:{hours:0,minutes:0},first_day_end:{hours:0,minutes:0},second_day_begin:{hours:0,minutes:0},second_day_end:{hours:0,minutes:0},min_grade:0,max_grade:0,min_participants:0,max_participants:0,messages:[],participants:[]},this.loadedStudent={id:0,user_name:"",email:"",password:"",first_name:"",last_name:"",grade:0,letter:"",exchange_id:0,exchange_requests:[],first_friend:0,second_friend:0,third_friend:0,first_wish:0,second_wish:0,third_wish:0,project_id:0,role:2},this.newMessage={project_id:0,message:""},this.eventName=this.config.app_config.event_name}var s,i,o;return s=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.paramMap.subscribe(function(t){t.has("ParticipantName")?e.studentUrl=t.get("ParticipantName"):e.router.navigate([""])}),this.getProject(),this.getStudent(),this.subscriptions.push(this.messagesService.update.subscribe(function(){return e.getProject()}),this.messagesService.update.subscribe(function(){return e.getStudent()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"getStudent",value:function(){var e=this;this.studentsService.getSelfStudent().subscribe(function(t){e.loadedStudent=t.data})}},{key:"getProject",value:function(){var e=this;this.projectsService.getSelfLeadedProject("students").subscribe(function(t){e.leadedProject=t.data})}},{key:"send",value:function(e){var t=this;!0===e.valid&&(this.messagesService.createMessage("students",this.newMessage).subscribe(function(e){t.messagesService.update.emit(),t.leadedProject.messages.push(e.data)},function(e){t.alert.error("Versandt der Nachricht fehlgeschlagen!",e.error)}),e.reset())}},{key:"delete",value:function(e){this.leadedProject.messages=this.leadedProject.messages.filter(function(t){return e.id!==t.id}),this.messagesService.deleteMessage("students",e.id)}}])&&t(s.prototype,i),o&&t(s,o),n}(),y.\u0275fac=function(e){return new(e||y)(b.Jb(r.a),b.Jb(r.g),b.Jb(d.a),b.Jb(u.a),b.Jb(l.a),b.Jb(g.a),b.Jb(f.a))},y.\u0275cmp=b.Db({type:y,selectors:[["app-messages"]],decls:18,vars:5,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["class","content",4,"ngIf"],["color","background","name","MessageBox",1,"content"],["id","Formular","name","MessageForm",3,"ngSubmit"],["form","ngForm"],["color","items"],["color","text","required","","name","MessageText","type","text",3,"ngModel","ngModelChange"],[1,"ion-padding"],["color","buttons","type","submit","expand","block",1,"ion-no-margin",3,"disabled"],["name","duplicate"],[1,"content"],["color","items","lines","none",4,"ngFor","ngForOf"],["color","items","lines","none"],["slot","end",3,"click",4,"ngIf"],["class","message sended_message","slot","end","color","background",4,"ngIf"],["class","message","slot","start","color","background",4,"ngIf"],["slot","start",3,"click",4,"ngIf"],["slot","end",3,"click"],["color","danger","name","close"],["slot","end","color","background",1,"message","sended_message"],["color","buttons"],["color","text"],["slot","start","color","background",1,"message"],["slot","start",3,"click"]],template:function(e,t){if(1&e){var n=b.Nb();b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar",0),b.Mb(2,"ion-button",1),b.Kb(3,"ion-back-button",2),b.Lb(),b.Mb(4,"ion-title"),b.pc(5,"Notizen"),b.Lb(),b.Lb(),b.Lb(),b.Mb(6,"ion-content",3),b.oc(7,M,2,1,"ion-list",4),b.Mb(8,"ion-card",5),b.Mb(9,"form",6,7),b.Ub("ngSubmit",function(){b.lc(n);var e=b.jc(10);return t.send(e)}),b.Mb(11,"ion-item",8),b.Mb(12,"ion-input",9),b.Ub("ngModelChange",function(e){return t.newMessage.message=e}),b.Lb(),b.Lb(),b.Mb(13,"div",10),b.Mb(14,"ion-button",11),b.Mb(15,"ion-label"),b.Kb(16,"ion-icon",12),b.pc(17," Notiz an das Projekt anheften"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&e){var s=b.jc(10);b.yb(3),b.dc("defaultHref","",t.eventName,"/Sch\xfcler/",t.studentUrl,""),b.yb(4),b.bc("ngIf",t.leadedProject.messages.length),b.yb(5),b.bc("ngModel",t.newMessage.message),b.yb(2),b.bc("disabled",s.invalid)}},directives:[c.t,c.R,c.h,c.e,c.f,c.P,c.p,o.j,c.j,a.k,a.g,a.h,c.x,c.w,c.ab,a.j,a.f,a.i,c.A,c.u,c.B,o.i,c.i,c.k,c.N],styles:[""]}),y)}],S=((k=function t(){e(this,t)}).\u0275mod=b.Hb({type:k}),k.\u0275inj=b.Gb({factory:function(e){return new(e||k)},imports:[[o.b,a.a,c.S,r.k.forChild(L)]]}),k)}}])}();
//# sourceMappingURL=log-in-student-page-student-messages-student-messages-module-es5.df8a5ba548db8de3786c.js.map