!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{ZReS:function(i,n,r){"use strict";r.r(n),r.d(n,"AdminStudentsLeadersPageModule",function(){return ne});var o=r("ofXK"),c=r("3Pt+"),a=r("tyNb"),s=r("TEn/"),b=r("mrSG"),d=r("fXoL"),l=r("ZvwH"),u=r("OeS+"),f=r("PO/Q"),h=r("CoJz"),_=r("uVPj"),p=r("3LUQ"),g=r("r4Kj");function m(e,t){if(1&e&&(d.Mb(0,"ion-card-content"),d.Mb(1,"ion-label",16),d.pc(2),d.Lb(),d.Lb()),2&e){var i=d.Wb();d.yb(2),d.rc(" ",i.text1," ")}}function L(e,t){1&e&&(d.Mb(0,"ion-label",16),d.pc(1,"(Leiter)"),d.Lb())}function y(e,t){1&e&&(d.Mb(0,"ion-label",16),d.pc(1,"(Leiter)"),d.Lb())}function M(e,t){if(1&e&&(d.Mb(0,"a",21),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit,n=d.Wb(2);d.dc("routerLink","../../",n.projectsNoun,"/",i.project_id,""),d.yb(1),d.qc(i.project_title)}}function v(e,t){if(1&e&&(d.Mb(0,"a"),d.pc(1),d.Lb()),2&e){var i=d.Wb(3);d.yb(1),d.rc("kein ",i.projectNoun,"")}}function j(e,t){if(1&e&&(d.Mb(0,"a"),d.pc(1),d.Lb()),2&e){var i=d.Wb(3);d.yb(1),d.rc("",i.projectNoun," ist fehlerhaft")}}function w(e,t){if(1&e&&(d.Mb(0,"ion-row",18),d.Mb(1,"ion-col"),d.Mb(2,"ion-label",16),d.pc(3),d.Lb(),d.oc(4,L,2,0,"ion-label",19),d.Lb(),d.Mb(5,"ion-col"),d.Mb(6,"ion-label",16),d.pc(7),d.Lb(),d.oc(8,y,2,0,"ion-label",19),d.Lb(),d.Mb(9,"ion-col"),d.Mb(10,"ion-label",16),d.pc(11),d.Kb(12,"br"),d.pc(13),d.Kb(14,"br"),d.pc(15),d.Lb(),d.Lb(),d.Mb(16,"ion-col",16),d.Mb(17,"ion-label",16),d.pc(18),d.Kb(19,"br"),d.pc(20),d.Kb(21,"br"),d.pc(22),d.Lb(),d.Lb(),d.Mb(23,"ion-col"),d.oc(24,M,2,3,"a",20),d.oc(25,v,2,1,"a",5),d.oc(26,j,2,1,"a",5),d.Lb(),d.Lb()),2&e){var i=t.$implicit;d.yb(3),d.rc(" ",i.user_name," "),d.yb(1),d.bc("ngIf",2==i.role),d.yb(3),d.uc(" ",i.first_name," ",i.last_name," ",i.grade,"",i.letter," "),d.yb(1),d.bc("ngIf",2==i.role),d.yb(3),d.rc(" ",i.first_wish_title,""),d.yb(2),d.rc(" ",i.second_wish_title,""),d.yb(2),d.rc(" ",i.third_wish_title," "),d.yb(3),d.rc(" ",i.first_friend_name,""),d.yb(2),d.rc(" ",i.second_friend_name,""),d.yb(2),d.rc(" ",i.third_friend_name," "),d.yb(2),d.bc("ngIf",0!=i.project_id&&"fehlerhaftes Projekt"!=i.project_title),d.yb(1),d.bc("ngIf",0==i.project_id),d.yb(1),d.bc("ngIf","fehlerhaftes Projekt"==i.project_title)}}function k(e,t){if(1&e&&(d.Mb(0,"ion-grid"),d.Mb(1,"ion-row"),d.Mb(2,"ion-col"),d.Mb(3,"h2"),d.pc(4,"Benutzername"),d.Lb(),d.Lb(),d.Mb(5,"ion-col"),d.Mb(6,"h2"),d.pc(7,"Sch\xfcler"),d.Lb(),d.Lb(),d.Mb(8,"ion-col"),d.Mb(9,"h2"),d.pc(10,"W\xfcnsche"),d.Lb(),d.Lb(),d.Mb(11,"ion-col"),d.Mb(12,"h2"),d.pc(13,"Freunde"),d.Lb(),d.Lb(),d.Mb(14,"ion-col"),d.Mb(15,"h2"),d.pc(16),d.Lb(),d.Lb(),d.Lb(),d.oc(17,w,27,16,"ion-row",17),d.Lb()),2&e){var i=d.Wb();d.yb(16),d.rc("Link zum ",i.projectNoun,""),d.yb(1),d.bc("ngForOf",i.searchStudents)}}function P(e,t){1&e&&(d.Mb(0,"ion-label",16),d.pc(1,"(Leiter)"),d.Lb())}function S(e,t){if(1&e&&(d.Mb(0,"ion-label",16),d.pc(1),d.Lb()),2&e){var i=d.Wb(3);d.yb(1),d.rc(" (",i.projectNoun,"leiter)")}}function x(e,t){if(1&e&&(d.Mb(0,"a",21),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit,n=d.Wb(2);d.dc("routerLink","../../",n.projectsNoun,"/",i.project_id,""),d.yb(1),d.qc(i.project_title)}}function N(e,t){if(1&e&&(d.Mb(0,"a"),d.pc(1),d.Lb()),2&e){var i=d.Wb(3);d.yb(1),d.rc("kein ",i.projectNoun,"")}}function W(e,t){if(1&e&&(d.Mb(0,"a"),d.pc(1),d.Lb()),2&e){var i=d.Wb(3);d.yb(1),d.rc("",i.projectNoun," ist fehlerhaft")}}function I(e,t){if(1&e&&(d.Mb(0,"ion-row",18),d.Mb(1,"ion-col"),d.Mb(2,"ion-label",16),d.pc(3),d.Lb(),d.oc(4,P,2,0,"ion-label",19),d.Lb(),d.Mb(5,"ion-col"),d.Mb(6,"ion-label",16),d.pc(7),d.Lb(),d.oc(8,S,2,1,"ion-label",19),d.Lb(),d.Mb(9,"ion-col"),d.Mb(10,"ion-label",16),d.pc(11),d.Kb(12,"br"),d.pc(13),d.Kb(14,"br"),d.pc(15),d.Lb(),d.Lb(),d.Mb(16,"ion-col",16),d.Mb(17,"ion-label",16),d.pc(18),d.Kb(19,"br"),d.pc(20),d.Kb(21,"br"),d.pc(22),d.Lb(),d.Lb(),d.Mb(23,"ion-col"),d.oc(24,x,2,3,"a",20),d.oc(25,N,2,1,"a",5),d.oc(26,W,2,1,"a",5),d.Lb(),d.Lb()),2&e){var i=t.$implicit;d.yb(3),d.rc(" ",i.user_name," "),d.yb(1),d.bc("ngIf",2==i.role),d.yb(3),d.uc(" ",i.first_name," ",i.last_name," ",i.grade,"",i.letter," "),d.yb(1),d.bc("ngIf",2==i.role),d.yb(3),d.rc(" ",i.first_wish_title,""),d.yb(2),d.rc(" ",i.second_wish_title,""),d.yb(2),d.rc(" ",i.third_wish_title," "),d.yb(3),d.rc(" ",i.first_friend_name,""),d.yb(2),d.rc(" ",i.second_friend_name,""),d.yb(2),d.rc(" ",i.third_friend_name," "),d.yb(2),d.bc("ngIf",0!=i.project_id&&"fehlerhaftes Projekt"!=i.project_title),d.yb(1),d.bc("ngIf",0==i.project_id),d.yb(1),d.bc("ngIf","fehlerhaftes Projekt"==i.project_title)}}function O(e,t){if(1&e&&(d.Mb(0,"ion-grid"),d.Mb(1,"ion-row"),d.Mb(2,"ion-col"),d.Mb(3,"h2"),d.pc(4,"Benutzername"),d.Lb(),d.Lb(),d.Mb(5,"ion-col"),d.Mb(6,"h2"),d.pc(7,"Sch\xfcler"),d.Lb(),d.Lb(),d.Mb(8,"ion-col"),d.Mb(9,"h2"),d.pc(10,"W\xfcnsche"),d.Lb(),d.Lb(),d.Mb(11,"ion-col"),d.Mb(12,"h2"),d.pc(13,"Freunde"),d.Lb(),d.Lb(),d.Mb(14,"ion-col"),d.Mb(15,"h2"),d.pc(16),d.Lb(),d.Lb(),d.Lb(),d.oc(17,I,27,16,"ion-row",17),d.Lb()),2&e){var i=d.Wb();d.yb(16),d.rc("Link zum ",i.projectNoun,""),d.yb(1),d.bc("ngForOf",i.loadedStudents)}}function D(e,t){if(1&e){var i=d.Nb();d.Mb(0,"div",13),d.Mb(1,"ion-button",22),d.Ub("click",function(){return d.lc(i),d.Wb().getMoreStudents()}),d.pc(2,"Weiter Sch\xfcler laden"),d.Lb(),d.Lb()}}function F(e,t){if(1&e&&(d.Mb(0,"ion-card-content"),d.Mb(1,"ion-label",16),d.pc(2),d.Lb(),d.Lb()),2&e){var i=d.Wb();d.yb(2),d.rc(" ",i.text2," ")}}function T(e,t){if(1&e&&(d.Mb(0,"a",25),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit,n=d.Wb();d.dc("routerLink","../../",n.projectsNoun,"/",i.project_id,""),d.yb(1),d.qc(i.project_title)}}function A(e,t){if(1&e){var i=d.Nb();d.Mb(0,"ion-icon",26),d.Ub("click",function(){d.lc(i);var e=d.Wb().$implicit;return d.Wb().deleteLeader(e.id)}),d.Lb()}}function K(e,t){if(1&e&&(d.Mb(0,"ion-row",6),d.Mb(1,"ion-col"),d.Mb(2,"ion-label",16),d.pc(3),d.Lb(),d.Lb(),d.Mb(4,"ion-col"),d.oc(5,T,2,3,"a",23),d.oc(6,A,1,0,"ion-icon",24),d.Lb(),d.Lb()),2&e){var i=t.$implicit;d.yb(3),d.qc(i.user_name),d.yb(2),d.bc("ngIf",0!=i.project_id),d.yb(1),d.bc("ngIf",0==i.project_id)}}function $(e,t){if(1&e&&(d.Mb(0,"ion-card-content"),d.Mb(1,"ion-label",16),d.pc(2),d.Lb(),d.Lb()),2&e){var i=d.Wb();d.yb(2),d.rc(" ",i.text3," ")}}function U(e,t){if(1&e){var i=d.Nb();d.Mb(0,"div",13),d.Mb(1,"ion-button",14),d.Ub("click",function(){return d.lc(i),d.Wb().createSortingProposal()}),d.pc(2,"Sortiervorschlag erstellen"),d.Lb(),d.Lb()}if(2&e){var n=d.Wb();d.yb(1),d.bc("disabled",!(n.currentDate>n.schedule.sort_students&&n.currentDate<=n.schedule.exchange))}}function J(e,t){if(1&e){var i=d.Nb();d.Mb(0,"div",13),d.Mb(1,"ion-button",14),d.Ub("click",function(){return d.lc(i),d.Wb().createSortingProposal()}),d.pc(2,"Neuen Sortiervorschlag erstellen"),d.Lb(),d.Lb()}if(2&e){var n=d.Wb();d.yb(1),d.bc("disabled",!(n.currentDate>n.schedule.sort_students&&n.currentDate<=n.schedule.exchange))}}function C(e,t){if(1&e&&(d.Mb(0,"ion-card-content"),d.Mb(1,"ion-label",16),d.pc(2),d.Lb(),d.Lb()),2&e){var i=d.Wb(2);d.yb(2),d.rc(" ",i.text4," ")}}function R(e,t){if(1&e&&(d.Mb(0,"ion-label",29),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(1),d.rc("",i.title," (Zu wenige Teilnehmer)")}}function q(e,t){if(1&e&&(d.Mb(0,"ion-label",29),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(1),d.rc("",i.title," (Zu viele Teilnehmer)")}}function E(e,t){if(1&e&&(d.Mb(0,"ion-label"),d.pc(1),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(1),d.qc(i.title)}}function V(e,t){if(1&e&&(d.Mb(0,"div"),d.Mb(1,"ion-item",30),d.Mb(2,"ion-text",16),d.Kb(3,"ion-icon",31),d.pc(4),d.Lb(),d.Lb(),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(4),d.uc(" ",i.leader.first_name," ",i.leader.last_name," ",i.leader.grade,"",i.leader.letter,"")}}function z(e,t){if(1&e&&(d.Mb(0,"ion-item",30),d.Mb(1,"ion-text",16),d.Kb(2,"ion-icon",33),d.pc(3),d.Lb(),d.Lb()),2&e){var i=t.$implicit;d.yb(3),d.uc(" ",i.first_name," ",i.last_name," ",i.grade,"",i.letter,"")}}function H(e,t){if(1&e&&(d.Mb(0,"div"),d.oc(1,z,4,4,"ion-item",32),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(1),d.bc("ngForOf",i.assistant_student_leaders)}}var Z=function(e,t,i){return[e,t,i]};function B(e,t){if(1&e&&(d.Mb(0,"ion-select-option",36),d.pc(1),d.Lb()),2&e){var i=t.$implicit,n=d.Wb().$implicit,r=d.Wb(2).$implicit;d.bc("value",d.hc(4,Z,n,r.id,i.id)),d.yb(1),d.tc("",i.title," (",i.min_grade,". - ",i.max_grade,".Klasse)")}}function G(e,t){if(1&e){var i=d.Nb();d.Mb(0,"ion-item",30),d.Mb(1,"ion-text",16),d.pc(2),d.Lb(),d.Mb(3,"ion-select",34),d.Ub("ionChange",function(e){return d.lc(i),d.Wb(4).moveParticipant(e)}),d.oc(4,B,2,8,"ion-select-option",35),d.Lb(),d.Lb()}if(2&e){var n=t.$implicit,r=d.Wb(4);d.yb(2),d.uc("",n.first_name," ",n.last_name," ",n.grade,"",n.letter,""),d.yb(2),d.bc("ngForOf",r.sortedProjects)}}function Q(e,t){if(1&e&&(d.Mb(0,"div"),d.oc(1,G,5,5,"ion-item",32),d.Lb()),2&e){var i=d.Wb().$implicit;d.yb(1),d.bc("ngForOf",i.participants)}}function X(e,t){if(1&e&&(d.Mb(0,"ion-card",3),d.Mb(1,"ion-card-header"),d.Mb(2,"ion-card-title"),d.oc(3,R,2,1,"ion-label",28),d.oc(4,q,2,1,"ion-label",28),d.oc(5,E,2,1,"ion-label",5),d.Lb(),d.Mb(6,"ion-card-subtitle"),d.Mb(7,"ion-label",16),d.pc(8),d.Lb(),d.Lb(),d.Lb(),d.Mb(9,"ion-card-content"),d.oc(10,V,5,4,"div",5),d.oc(11,H,2,1,"div",5),d.oc(12,Q,2,1,"div",5),d.Lb(),d.Lb()),2&e){var i=t.$implicit;d.yb(3),d.bc("ngIf",i.participants.length<i.min_participants),d.yb(1),d.bc("ngIf",i.participants.length>i.max_participants),d.yb(1),d.bc("ngIf",i.participants.length>=i.min_participants&&i.participants.length<=i.max_participants),d.yb(3),d.vc("",i.min_grade,". bis ",i.max_grade,".Klasse | ",i.min_participants," bis ",i.max_participants," Teilnehmer | ",i.leader_name,""),d.yb(2),d.bc("ngIf",i.leader&&"App\\Student"===i.leader_type),d.yb(1),d.bc("ngIf",i.assistant_student_leaders.length),d.yb(1),d.bc("ngIf",i.participants.length)}}function Y(e,t){if(1&e){var i=d.Nb();d.Mb(0,"ion-card",4),d.Mb(1,"ion-card-header"),d.Mb(2,"ion-card-title"),d.pc(3," Vorschlag f\xfcr Einsortierung der Sch\xfcler "),d.Lb(),d.Lb(),d.oc(4,C,3,1,"ion-card-content",5),d.Mb(5,"ion-card-content"),d.oc(6,X,13,11,"ion-card",27),d.Lb(),d.Mb(7,"div",13),d.Mb(8,"ion-button",22),d.Ub("click",function(){return d.lc(i),d.Wb().editSortingProposal()}),d.pc(9,"\xc4nderungen speichern"),d.Lb(),d.Lb(),d.Mb(10,"div",13),d.Mb(11,"ion-button",14),d.Ub("click",function(){return d.lc(i),d.Wb().applySortingProposal()}),d.pc(12,"Vorschlag anwenden"),d.Lb(),d.Lb(),d.Lb()}if(2&e){var n=d.Wb();d.yb(4),d.bc("ngIf",n.text4),d.yb(2),d.bc("ngForOf",n.sortedProjects),d.yb(5),d.bc("disabled",!n.sorted)}}var ee,te,ie=[{path:"",component:(ee=function(){function i(t,n,r,c,a,s,b,d,l){e(this,i),this.studentsService=t,this.scheduleService=n,this.leadersService=r,this.projectsService=c,this.activatedRoute=a,this.alertCtrl=s,this.adminsService=b,this.alert=d,this.config=l,this.subscriptions=[],this.loadedProjects=[],this.loadedParticipantsNames=[],this.sortedProjects=[],this.loadedStudents=[],this.loadedLeaders=[],this.sorted=!1,this.schedule={id:1,begin:Object(o.n)(new Date,"yyyy-MM-dd","en"),control:Object(o.n)(new Date,"yyyy-MM-dd","en"),registration:Object(o.n)(new Date,"yyyy-MM-dd","en"),sort_students:Object(o.n)(new Date,"yyyy-MM-dd","en"),exchange:Object(o.n)(new Date,"yyyy-MM-dd","en"),projects:Object(o.n)(new Date,"yyyy-MM-dd","en"),end:Object(o.n)(new Date,"yyyy-MM-dd","en")},this.text1=this.config.get_content_by_index("admin-students-leaders",0),this.text2=this.config.get_content_by_index("admin-students-leaders",1),this.text3=this.config.get_content_by_index("admin-students-leaders",2),this.text4=this.config.get_content_by_index("admin-students-leaders",3),this.page=1,this.lastPage=1,this.projectNoun=this.config.app_config.project_noun,this.projectsNoun=this.config.app_config.projects_noun,this.eventName=this.config.app_config.event_name}var n,r,c;return n=i,(r=[{key:"ngOnInit",value:function(){var e=this;this.currentDate=Object(o.n)(new Date,"yyyy-MM-dd","en"),this.activatedRoute.paramMap.subscribe(function(t){e.adminUrl=t.get("AdminName")}),this.load(),this.subscriptions.push(this.studentsService.update.subscribe(function(){return e.load()}),this.leadersService.update.subscribe(function(){return e.load()}),this.projectsService.update.subscribe(function(){return e.load()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"load",value:function(){var e=this;this.alert.loading(2e3),this.page=1,this.scheduleService.getSchedule().subscribe(function(t){e.schedule=t.data}),this.getProjects(),this.getAllStudentNames(),this.currentDate>this.schedule.sort_students&&this.currentDate<=this.schedule.exchange&&this.requestSortingProposal()}},{key:"eventHandler",value:function(e){13===e&&this.search()}},{key:"search",value:function(){var e=this;""!=this.searchValue?this.studentsService.getAllSearchedStudents(this.searchValue).subscribe(function(t){e.searchStudents=[],t.data.forEach(function(t){return Object(b.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(i={id:0,user_name:"",first_name:"",last_name:"",grade:1,letter:"",first_friend:0,first_friend_name:"",second_friend:0,second_friend_name:"",third_friend:0,third_friend_name:"",first_wish:0,first_wish_title:"",second_wish:0,second_wish_title:"",third_wish:0,third_wish_title:"",project_id:0,project_title:"kein Projekt",role:1}).id=t.id,i.user_name=t.user_name,i.first_name=t.first_name,i.last_name=t.last_name,i.grade=t.grade,i.letter=t.letter,i.first_friend=t.first_friend,i.second_friend=t.second_friend,i.third_friend=t.third_friend,i.first_wish=t.first_wish,i.second_wish=t.second_wish,i.third_wish=t.third_wish,i.project_id=t.project_id,i.role=t.role,i.first_friend_name=this.getParticipantName(i.first_friend),i.second_friend_name=this.getParticipantName(i.second_friend),i.third_friend_name=this.getParticipantName(i.third_friend),i.first_wish_title=this.getProjectTitle(i.first_wish),i.second_wish_title=this.getProjectTitle(i.second_wish),i.third_wish_title=this.getProjectTitle(i.third_wish),i.project_title=this.getProjectTitle(i.project_id),this.searchStudents.push(i);case 2:case"end":return e.stop()}},e,this)}))})}):this.searchStudents=null}},{key:"refresh",value:function(){this.page=1,this.getProjects(),this.getAllStudentNames()}},{key:"getProjects",value:function(){var e=this;this.projectsService.getAllProjects().subscribe(function(t){e.loadedProjects=t.data,e.getStudents(),e.getLeaders()})}},{key:"getAllStudentNames",value:function(){var e=this;this.studentsService.getAllStudentNames().subscribe(function(t){e.loadedParticipantsNames=t.data})}},{key:"getStudents",value:function(){var e=this;this.loadedStudents=[],this.studentsService.getAllStudents(this.page).subscribe(function(t){e.lastPage=t.meta.last_page,t.data.forEach(function(t){return Object(b.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(i={id:0,user_name:"",first_name:"",last_name:"",grade:1,letter:"",first_friend:0,first_friend_name:"",second_friend:0,second_friend_name:"",third_friend:0,third_friend_name:"",first_wish:0,first_wish_title:"",second_wish:0,second_wish_title:"",third_wish:0,third_wish_title:"",project_id:0,project_title:"kein Projekt",role:1}).id=t.id,i.user_name=t.user_name,i.first_name=t.first_name,i.last_name=t.last_name,i.grade=t.grade,i.letter=t.letter,i.first_friend=t.first_friend,i.second_friend=t.second_friend,i.third_friend=t.third_friend,i.first_wish=t.first_wish,i.second_wish=t.second_wish,i.third_wish=t.third_wish,i.project_id=t.project_id,i.role=t.role,i.first_friend_name=this.getParticipantName(i.first_friend),i.second_friend_name=this.getParticipantName(i.second_friend),i.third_friend_name=this.getParticipantName(i.third_friend),i.first_wish_title=this.getProjectTitle(i.first_wish),i.second_wish_title=this.getProjectTitle(i.second_wish),i.third_wish_title=this.getProjectTitle(i.third_wish),i.project_title=this.getProjectTitle(i.project_id),this.loadedStudents.push(i);case 2:case"end":return e.stop()}},e,this)}))})})}},{key:"getMoreStudents",value:function(){var e=this;this.alert.loading(2e3),this.page+=1,this.studentsService.getAllStudents(this.page).subscribe(function(t){t.data.forEach(function(t){return Object(b.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(i={id:0,user_name:"",first_name:"",last_name:"",grade:1,letter:"",first_friend:0,first_friend_name:"",second_friend:0,second_friend_name:"",third_friend:0,third_friend_name:"",first_wish:0,first_wish_title:"",second_wish:0,second_wish_title:"",third_wish:0,third_wish_title:"",project_id:0,project_title:"kein Projekt",role:1}).id=t.id,i.user_name=t.user_name,i.first_name=t.first_name,i.last_name=t.last_name,i.grade=t.grade,i.letter=t.letter,i.first_friend=t.first_friend,i.second_friend=t.second_friend,i.third_friend=t.third_friend,i.first_wish=t.first_wish,i.second_wish=t.second_wish,i.third_wish=t.third_wish,i.project_id=t.project_id,i.role=t.role,i.first_friend_name=this.getParticipantName(i.first_friend),i.second_friend_name=this.getParticipantName(i.second_friend),i.third_friend_name=this.getParticipantName(i.third_friend),i.first_wish_title=this.getProjectTitle(i.first_wish),i.second_wish_title=this.getProjectTitle(i.second_wish),i.third_wish_title=this.getProjectTitle(i.third_wish),i.project_title=this.getProjectTitle(i.project_id),this.loadedStudents.push(i);case 2:case"end":return e.stop()}},e,this)}))})})}},{key:"getLeaders",value:function(){var e=this;this.loadedLeaders=[],this.leadersService.getAllLeaders().subscribe(function(t){t.data.forEach(function(t){var i={id:0,user_name:"",email:"",project_id:0,project_title:"kein Projekt"};i.id=t.id,i.user_name=t.user_name,i.email=t.email,i.project_id=t.project_id,i.project_title=e.getProjectTitle(i.project_id),e.loadedLeaders.push(i)})})}},{key:"getProjectTitle",value:function(e){if(0!==e&&this.loadedProjects){var t=this.loadedProjects.filter(function(t){return t.id===e});return null!=t[0]?t[0].title:"fehlerhaftes Projekt"}return"kein Projekt"}},{key:"getParticipantName",value:function(e){if(0!==e&&this.loadedParticipantsNames){var t=this.loadedParticipantsNames.filter(function(t){return t.id===e});return null!=t[0]?t[0].first_name+" "+t[0].last_name:"fehlerhafter Freund"}return""}},{key:"deleteLeader",value:function(e){var t=this;this.alertCtrl.create({header:"Sind sie sicher?",message:"Wollen sie diesen Projektleiter wirklich unwiederruflich l\xf6schen?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"L\xf6schen",handler:function(){t.leadersService.deleteLeader(e)}}]}).then(function(e){e.present()})}},{key:"createSortingProposal",value:function(){var e=this;this.adminsService.createSortingProposal().subscribe(function(t){e.alert.alert(t.message),e.sorted=!0,e.sortedProjects=t.data},function(t){e.alert.error("Sortierung der Sch\xfcler fehlgeschlagen.",t.error)})}},{key:"requestSortingProposal",value:function(){var e=this;this.adminsService.requestSortingProposal().subscribe(function(t){e.sortedProjects=t.data,e.sorted=!0},function(t){e.alert.error("Es konnte kein Sortiervorschlag gefunden werden.",t.error)})}},{key:"moveParticipant",value:function(e){var t=e.detail.value[0],i=e.detail.value[1],n=e.detail.value[2];if(0!==i&&this.sortedProjects){var r=this.sortedProjects.filter(function(e){return e.id===i});if(null!=r[0]){var o=r[0],c=o.participants.indexOf(t);-1!==c&&o.participants.splice(c,1)}}if(0!==n&&this.sortedProjects){var a=this.sortedProjects.filter(function(e){return e.id===n});if(null!=a[0]){var s=a[0];t&&s.participants.push(t)}}}},{key:"editSortingProposal",value:function(){this.adminsService.editSortingProposal({data:this.sortedProjects}),this.sorted=!0}},{key:"applySortingProposal",value:function(){var e=this;!0===this.sorted&&this.alertCtrl.create({header:"Sind sie sicher?",message:"Wollen sie die vorgeschlagene Konfiguration wirklich anwenden?",buttons:[{text:"Abbrechen",role:"cancel"},{text:"Anwenden",handler:function(){e.adminsService.applySortingProposal(),e.sorted=!1,e.refresh()}}]}).then(function(e){e.present()})}}])&&t(n.prototype,r),c&&t(n,c),i}(),ee.\u0275fac=function(e){return new(e||ee)(d.Jb(l.a),d.Jb(u.a),d.Jb(f.a),d.Jb(h.a),d.Jb(a.a),d.Jb(s.a),d.Jb(_.a),d.Jb(p.a),d.Jb(g.a))},ee.\u0275cmp=d.Db({type:ee,selectors:[["app-admin-students-leaders"]],decls:50,vars:18,consts:[["color","menu"],["color","buttons","slot","start"],["icon","arrow-back",3,"defaultHref"],["color","background"],["color","background",1,"content"],[4,"ngIf"],["color","items","lines","none"],["slot","start","color","buttons",3,"click"],["color","text","name","refresh"],["color","text","name","search"],["color","text","placeholder","Vorname Nachname Klasse","type","text","name","Serch",3,"ngModel","keypress","ngModelChange"],["class","ion-padding",4,"ngIf"],["color","items","lines","none",4,"ngFor","ngForOf"],[1,"ion-padding"],["color","buttons","expand","block",1,"ion-no-margin",3,"disabled","click"],["color","background","class","content",4,"ngIf"],["color","text"],["color","background","id","participant.ID",4,"ngFor","ngForOf"],["color","background","id","participant.ID"],["color","text",4,"ngIf"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["color","buttons","expand","block",1,"ion-no-margin",3,"click"],["color","buttons",3,"routerLink",4,"ngIf"],["color","danger","name","trash",3,"click",4,"ngIf"],["color","buttons",3,"routerLink"],["color","danger","name","trash",3,"click"],["color","background",4,"ngFor","ngForOf"],["color","danger",4,"ngIf"],["color","danger"],["color","items"],["name","star"],["color","items",4,"ngFor","ngForOf"],["name","star-half"],["slot","end","name","ParticipantProject","okText","Ausw\xe4hlen","cancelText","Abbrechen","type","number",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar",0),d.Mb(2,"ion-button",1),d.Kb(3,"ion-back-button",2),d.Lb(),d.Mb(4,"ion-title"),d.pc(5),d.Lb(),d.Lb(),d.Lb(),d.Mb(6,"ion-content",3),d.Mb(7,"ion-card",4),d.Mb(8,"ion-card-header"),d.Mb(9,"ion-card-title"),d.pc(10,"Sch\xfcler"),d.Lb(),d.Lb(),d.oc(11,m,3,1,"ion-card-content",5),d.Mb(12,"ion-card-content"),d.Mb(13,"ion-item",6),d.Mb(14,"ion-button",7),d.Ub("click",function(){return t.refresh()}),d.Kb(15,"ion-icon",8),d.Lb(),d.Mb(16,"ion-button",7),d.Ub("click",function(){return t.search()}),d.Kb(17,"ion-icon",9),d.Lb(),d.Mb(18,"ion-input",10),d.Ub("keypress",function(e){return t.eventHandler(e.keyCode)})("ngModelChange",function(e){return t.searchValue=e}),d.Lb(),d.Lb(),d.Lb(),d.Mb(19,"ion-card-content",3),d.oc(20,k,18,2,"ion-grid",5),d.oc(21,O,18,2,"ion-grid",5),d.oc(22,D,3,0,"div",11),d.Lb(),d.Lb(),d.Mb(23,"ion-card",4),d.Mb(24,"ion-card-header"),d.Mb(25,"ion-card-title"),d.pc(26),d.Lb(),d.Lb(),d.oc(27,F,3,1,"ion-card-content",5),d.Mb(28,"ion-card-content"),d.Mb(29,"ion-grid"),d.Mb(30,"ion-row"),d.Mb(31,"ion-col"),d.Mb(32,"h2"),d.pc(33),d.Lb(),d.Lb(),d.Mb(34,"ion-col"),d.Mb(35,"h2"),d.pc(36),d.Lb(),d.Lb(),d.Lb(),d.oc(37,K,7,3,"ion-row",12),d.Lb(),d.Lb(),d.Lb(),d.Mb(38,"ion-card",4),d.Mb(39,"ion-card-header"),d.Mb(40,"ion-card-title"),d.pc(41," Sch\xfcler sortieren "),d.Lb(),d.Lb(),d.oc(42,$,3,1,"ion-card-content",5),d.Mb(43,"ion-card-content"),d.oc(44,U,3,1,"div",11),d.oc(45,J,3,1,"div",11),d.Mb(46,"div",13),d.Mb(47,"ion-button",14),d.Ub("click",function(){return t.requestSortingProposal()}),d.pc(48,"aktuellen Sortiervorschlag ansehen"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.oc(49,Y,13,3,"ion-card",15),d.Lb()),2&e&&(d.yb(3),d.dc("defaultHref","",t.eventName,"/Admin/",t.adminUrl,""),d.yb(2),d.rc("Sch\xfcler und ",t.projectNoun,"leiter verwalten"),d.yb(6),d.bc("ngIf",t.text1),d.yb(7),d.bc("ngModel",t.searchValue),d.yb(2),d.bc("ngIf",t.searchStudents),d.yb(1),d.bc("ngIf",!t.searchStudents),d.yb(1),d.bc("ngIf",t.page<t.lastPage&&!t.searchStudents),d.yb(4),d.rc(" ",t.projectNoun,"leiter "),d.yb(1),d.bc("ngIf",t.text2),d.yb(6),d.rc("",t.projectNoun,"leiter"),d.yb(3),d.rc("Link zum ",t.projectNoun,""),d.yb(1),d.bc("ngForOf",t.loadedLeaders),d.yb(5),d.bc("ngIf",t.text3),d.yb(2),d.bc("ngIf",!t.sorted),d.yb(1),d.bc("ngIf",t.sorted),d.yb(2),d.bc("disabled",!(t.currentDate>t.schedule.sort_students&&t.currentDate<=t.schedule.exchange)),d.yb(2),d.bc("ngIf",t.sortedProjects.length))},directives:[s.t,s.R,s.h,s.e,s.f,s.P,s.p,s.j,s.l,s.n,o.j,s.k,s.x,s.u,s.w,s.ab,c.f,c.i,s.s,s.F,s.o,o.i,s.A,a.j,s.Y,s.m,s.N,s.I,s.Z,s.J],styles:[".height[_ngcontent-%COMP%]{min-height:500px}"]}),ee)}],ne=((te=function t(){e(this,t)}).\u0275mod=d.Hb({type:te}),te.\u0275inj=d.Gb({factory:function(e){return new(e||te)},imports:[[o.b,c.a,s.S,a.k.forChild(ie)]]}),te)}}])}();